<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
<meta http-equiv="Content-Language" content="en" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<title>Tuning Oracle Database</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 020" />
<meta name="Date" content="2011-03-24T3:32:28Z" />
<meta name="robots" content="all" scheme="http://www.robotstxt.org/" />
<meta name="doctitle" content="Oracle&reg; Database Administrator's Reference 11g Release 2 (11.2) for Linux and UNIX-Based Operating Systems" />
<meta name="partno" content="E10839-14" />
<meta name="docid" content="UNXAR" />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />
<link rel="Stylesheet" href="../../dcommon/css/blafdoc.css" title="Default" type="text/css" />
<script type="text/javascript" src="../../dcommon/js/doccd.js">
</script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="ldr_demo.htm" title="Previous" type="text/html" />
<link rel="Next" href="appa_aix.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10839.pdf" title="PDF version" type="application/pdf" />
</head>
<body>
<div class="header">
<div class="zz-skip-header"><a name="top" id="top" href="#BEGIN">Skip Headers</a></div>
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<tr>
<td align="left" valign="top"><b>Oracle&reg; Database Administrator's Reference<br />
11<i>g</i> Release 2 (11.2) for Linux and UNIX-Based Operating Systems</b><br />
Part Number E10839-14</td>
<td valign="bottom" align="right">
<table class="icons oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="245">
<tr>
<td align="center" valign="top"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td align="center" valign="top"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td align="center" valign="top"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td align="center" valign="top"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td align="center" valign="top"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
<hr />
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<tr>
<td align="left" valign="top">
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="98">
<tr>
<td align="center" valign="top"><a href="ldr_demo.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td align="center" valign="top"><a href="appa_aix.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td align="right" valign="top" style="font-size: 90%"><a href="../e10839.pdf">View PDF</a></td>
</tr>
</table>
<a name="BEGIN" id="BEGIN"></a></div>
<div class="IND"><!-- End Header --><a id="BCEJBDJH" name="BCEJBDJH"></a><a id="UNXAR008" name="UNXAR008"></a>
<h1 class="chapter"><span class="secnum">8</span> Tuning Oracle Database</h1>
<p>This chapter describes how to tune Oracle Database. It contains the following sections:</p>
<ul>
<li>
<p><a href="#BABBGFEI">Importance of Tuning</a></p>
</li>
<li>
<p><a href="#BABFAABG">Operating System Tools</a></p>
</li>
<li>
<p><a href="#i19293">Tuning Memory Management</a></p>
</li>
<li>
<p><a href="#BABEBEIC">Tuning Disk Input-Output</a></p>
</li>
<li>
<p><a href="#i10932">Monitoring Disk Performance</a></p>
</li>
<li>
<p><a href="#i85390">System Global Area</a></p>
</li>
<li>
<p><a href="#i23890">Tuning the Operating System Buffer Cache</a></p>
</li>
</ul>
<a id="BABBGFEI" name="BABBGFEI"></a><a id="UNXAR238" name="UNXAR238"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">8.1</span> Importance of Tuning</h2>
<p>The intent of this section is to efficiently tune and optimize the performance of Oracle Database. Frequent tuning enhances system performance and prevents data bottlenecks.</p>
<p>Before tuning the database, you must observe its normal behavior by using the tools described in the <a href="#BABFAABG">"Operating System Tools"</a> section.</p>
</div>
<!-- class="sect1" -->
<a id="BABFAABG" name="BABFAABG"></a><a id="UNXAR239" name="UNXAR239"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">8.2</span> Operating System Tools</h2>
<p>Several operating system tools are available to enable you to assess database performance and determine database requirements. In addition to providing statistics for Oracle processes, these tools provide statistics for CPU usage, interrupts, swapping, paging, context switching, and Input-Output for the entire system.</p>
<p>This section provides information about the following common tools:</p>
<ul>
<li>
<p><a href="#BABDECCF">vmstat</a></p>
</li>
<li>
<p><a href="#BABIDADA">sar</a></p>
</li>
<li>
<p><a href="#BABGEIJC">iostat</a></p>
</li>
<li>
<p><a href="#CHEFADHA">swap, swapinfo, swapon, or lsps</a></p>
</li>
<li>
<p><a href="#BCGGDJAF">AIX Tools</a></p>
</li>
<li>
<p><a href="#BCGEFHHE">HP-UX Tools</a></p>
</li>
<li>
<p><a href="#CEGDBEID">Linux Tools</a></p>
</li>
<li>
<p><a href="#CEGDIJDH">Solaris Tools</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
The operating system documentation and man pages for more information about these tools</div>
<a id="UNXAR240" name="UNXAR240"></a>
<div class="sect2"><a id="BABDECCF" name="BABDECCF"></a>
<h3 class="sect2"><span class="secnum">8.2.1</span> vmstat<a id="sthref341" name="sthref341"></a><a id="sthref342" name="sthref342"></a><a id="sthref343" name="sthref343"></a><a id="sthref344" name="sthref344"></a></h3>
<p>Use the <code>vmstat</code> command to view process, virtual memory, disk, trap, and CPU activity, depending on the switches that you supply with the command. Run one of the following commands to display a summary of CPU activity six times, at five-second intervals:</p>
<ul>
<li>
<p>On HP-UX and Solaris:</p>
<pre xml:space="preserve" class="oac_no_warn">$ vmstat -S 5 6
</pre></li>
<li>
<p>On AIX and Linux:</p>
<pre xml:space="preserve" class="oac_no_warn">$ vmstat 5 6
</pre></li>
</ul>
<p>The following is sample output of this command on HP-UX:</p>
<pre xml:space="preserve" class="oac_no_warn">procs     memory            page            disk          faults      cpu
 r b w   swap  free  si  so pi po fr de sr f0 s0 s1 s3   in   sy   cs us sy id
 0 0 0   1892  5864   0   0  0  0  0  0  0  0  0  0  0   90   74   24  0  0 99
 0 0 0  85356  8372   0   0  0  0  0  0  0  0  0  0  0   46   25   21  0  0 100
 0 0 0  85356  8372   0   0  0  0  0  0  0  0  0  0  0   47   20   18  0  0 100
 0 0 0  85356  8372   0   0  0  0  0  0  0  0  0  0  2   53   22   20  0  0 100
 0 0 0  85356  8372   0   0  0  0  0  0  0  0  0  0  0   87   23   21  0  0 100
 0 0 0  85356  8372   0   0  0  0  0  0  0  0  0  0  0   48   41   23  0  0 100
</pre>
<p>The <code>w</code> sub column, under the <code>procs</code> column, shows the number of potential processes that have been swapped out and written to disk. If the value is not zero, then swapping occurs and the system is short of memory.</p>
<p>The <code>si</code> and <code>so</code> columns under the <code>page</code> column indicate the number of swap-ins and swap-outs per second, respectively. Swap-ins and swap-outs should always be zero.</p>
<p>The <code>sr</code> column under the <code>page</code> column indicates the scan rate. High scan rates are caused by a shortage of available memory.</p>
<p>The <code>pi</code> and <code>po</code> columns under the <code>page</code> column indicate the number of page-ins and page-outs per second, respectively. It is normal for the number of page-ins and page-outs to increase. Some paging always occurs even on systems with sufficient available memory.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
The output from the <code>vmstat</code> command differs across platforms.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Refer to the man page for information about interpreting the output</div>
</div>
<!-- class="sect2" -->
<a id="UNXAR241" name="UNXAR241"></a>
<div class="sect2"><a id="BABIDADA" name="BABIDADA"></a>
<h3 class="sect2"><span class="secnum">8.2.2</span> sar<a id="sthref345" name="sthref345"></a><a id="sthref346" name="sthref346"></a><a id="sthref347" name="sthref347"></a><a id="sthref348" name="sthref348"></a></h3>
<p>Depending on the switches that you supply with the command, use the <code>sar</code> (system activity reporter) command to display cumulative activity counters in the operating system.</p>
<p>On an HP-UX system, the following command displays a summary of Input-Output activity every ten seconds:</p>
<pre xml:space="preserve" class="oac_no_warn">$ sar -b 10 10
</pre>
<p>The following example shows the output of this command:</p>
<pre xml:space="preserve" class="oac_no_warn">13:32:45 bread/s lread/s %rcache bwrit/s lwrit/s %wcache pread/s pwrit/s
13:32:55       0      14     100       3      10      69       0       0
13:33:05       0      12     100       4       4       5       0       0
13:33:15       0       1     100       0       0       0       0       0
13:33:25       0       1     100       0       0       0       0       0
13:33:35       0      17     100       5       6       7       0       0
13:33:45       0       1     100       0       0       0       0       0
13:33:55       0       9     100       2       8      80       0       0
13:34:05       0      10     100       4       4       5       0       0
13:34:15       0       7     100       2       2       0       0       0
13:34:25       0       0     100       0       0     100       0       0

Average        0       7     100       2       4      41       0       0
</pre>
<p>The <code>sar</code> output provides a snapshot of system Input-Output activity at a given point in time. If you specify the interval time with multiple options, then the output can become difficult to read. If you specify an interval time of less than 5, then the <code>sar</code> activity itself can affect the output.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
The man page for more information about <code>sar</code></div>
</div>
<!-- class="sect2" -->
<a id="UNXAR242" name="UNXAR242"></a>
<div class="sect2"><a id="BABGEIJC" name="BABGEIJC"></a>
<h3 class="sect2"><span class="secnum">8.2.3</span> iostat<a id="sthref349" name="sthref349"></a><a id="sthref350" name="sthref350"></a><a id="sthref351" name="sthref351"></a><a id="sthref352" name="sthref352"></a></h3>
<p>Use the <code>iostat</code> command to view terminal and disk activity, depending on the switches that you supply with the command. The output from the <code>iostat</code> command does not include disk request queues, but it shows which disks are busy. You can use this information to balance the Input-Output loads.</p>
<p>The following command displays terminal and disk activity five times, at five-second intervals:</p>
<pre xml:space="preserve" class="oac_no_warn">$ iostat 5 5
</pre>
<p>The following is sample output of the command on Solaris:</p>
<pre xml:space="preserve" class="oac_no_warn">tty          fd0           sd0           sd1           sd3          cpu
 tin tout Kps tps serv  Kps tps serv  Kps tps serv  Kps tps serv  us sy wt id
   0    1   0   0    0    0   0   31    0   0   18    3   0   42   0  0  0 99
   0   16   0   0    0    0   0    0    0   0    0    1   0   14   0  0  0 100
   0   16   0   0    0    0   0    0    0   0    0    0   0    0   0  0  0 100
   0   16   0   0    0    0   0    0    0   0    0    0   0    0   0  0  0 100
   0   16   0   0    0    0   0    0    2   0   14   12   2   47   0  0  1 98
</pre>
<p>Use the <code>iostat</code> command to look for large disk request queues. A request queue shows how long the Input-Output requests on a particular disk device must wait to be serviced. Request queues are caused by a high volume of Input-Output requests to that disk or by Input-Output with long average seek times. Ideally, disk request queues should be at or near zero.</p>
</div>
<!-- class="sect2" -->
<a id="BABDGDBA" name="BABDGDBA"></a><a id="UNXAR243" name="UNXAR243"></a>
<div class="sect2"><a id="CHEFADHA" name="CHEFADHA"></a>
<h3 class="sect2"><span class="secnum">8.2.4</span> swap, swapinfo, swapon, or lsps<a id="sthref353" name="sthref353"></a><a id="sthref354" name="sthref354"></a><a id="sthref355" name="sthref355"></a><a id="sthref356" name="sthref356"></a><a id="sthref357" name="sthref357"></a><a id="sthref358" name="sthref358"></a><a id="sthref359" name="sthref359"></a><a id="sthref360" name="sthref360"></a><a id="sthref361" name="sthref361"></a><a id="sthref362" name="sthref362"></a><a id="sthref363" name="sthref363"></a><a id="sthref364" name="sthref364"></a><a id="sthref365" name="sthref365"></a><a id="sthref366" name="sthref366"></a><a id="sthref367" name="sthref367"></a><a id="sthref368" name="sthref368"></a></h3>
<p>Use the <code>swap</code>, <code>swapinfo</code>, <code>swapon</code>, or <code>lsps</code> command to report information about swap space usage. A shortage of swap space can stop processes responding, leading to process failures with <code>Out of Memory</code> errors. The following table lists the appropriate command to use for each platform:</p>
<div class="inftblinformal">
<table class="Informal" title="Swap, Swapinfo, swapon, and lsps commands" summary="This table lists commands for determining swap space usage" dir="ltr" border="1" width="100%" frame="hsides" rules="groups" cellpadding="3" cellspacing="0">
<col width="28%" />
<col width="*" />
<thead>
<tr align="left" valign="top">
<th align="left" valign="bottom" id="r1c1-t6">Platform</th>
<th align="left" valign="bottom" id="r1c2-t6">Command</th>
</tr>
</thead>
<tbody>
<tr align="left" valign="top">
<td align="left" id="r2c1-t6" headers="r1c1-t6">AIX</td>
<td align="left" headers="r2c1-t6 r1c2-t6"><code>lsps -a</code></td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r3c1-t6" headers="r1c1-t6">HP-UX</td>
<td align="left" headers="r3c1-t6 r1c2-t6"><code>swapinfo -m</code></td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r4c1-t6" headers="r1c1-t6">Linux</td>
<td align="left" headers="r4c1-t6 r1c2-t6"><code>swapon -s</code></td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r5c1-t6" headers="r1c1-t6">Solaris</td>
<td align="left" headers="r5c1-t6 r1c2-t6"><code>swap -l</code> and <code>swap -s</code></td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<p>The following example shows sample output from the <code>swap -l</code> command on Solaris:</p>
<pre xml:space="preserve" class="oac_no_warn">swapfile             dev        swaplo blocks        free  
/dev/dsk/c0t3d0s1    32,25      8      197592        162136
</pre></div>
<!-- class="sect2" -->
<a id="BCGGDJAF" name="BCGGDJAF"></a><a id="UNXAR244" name="UNXAR244"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">8.2.5</span> AIX Tools<a id="sthref369" name="sthref369"></a></h3>
<p>The following sections describe tools available on AIX systems:</p>
<ul>
<li>
<p><a href="#CEGEEFDJ">Base Operation System Tools</a></p>
</li>
<li>
<p><a href="#CEGHJDGC">Performance Toolbox</a></p>
</li>
<li>
<p><a href="#CEGGAIGE">System Management Interface Tool</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
The AIX operating system documentation and man pages for more information about these tools</div>
<a id="CEGEEFDJ" name="CEGEEFDJ"></a><a id="UNXAR245" name="UNXAR245"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">8.2.5.1</span> Base Operation System Tools<a id="sthref370" name="sthref370"></a></h4>
<p>The AIX Base Operation System contains performance tools that are historically part of UNIX systems or are required to manage the implementation-specific features of AIX. The following table lists the most important Base Operation System tools:</p>
<div class="inftblinformal">
<table class="Informal" title="AIX Base Operation System Tools" summary="This table describes AIX Base Operation System tools" dir="ltr" border="1" width="100%" frame="hsides" rules="groups" cellpadding="3" cellspacing="0">
<col width="20%" />
<col width="*" />
<thead>
<tr align="left" valign="top">
<th align="left" valign="bottom" id="r1c1-t8">Tool</th>
<th align="left" valign="bottom" id="r1c2-t8">Function</th>
</tr>
</thead>
<tbody>
<tr align="left" valign="top">
<td align="left" id="r2c1-t8" headers="r1c1-t8"><code>lsattr</code></td>
<td align="left" headers="r2c1-t8 r1c2-t8">Displays the attributes of devices</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r3c1-t8" headers="r1c1-t8"><code>lslv</code></td>
<td align="left" headers="r3c1-t8 r1c2-t8">Displays information about a logical volume or the logical volume allocations of a physical volume</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r4c1-t8" headers="r1c1-t8"><code>netstat</code></td>
<td align="left" headers="r4c1-t8 r1c2-t8">Displays the contents of network-related data structures</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r5c1-t8" headers="r1c1-t8"><code>nfsstat</code></td>
<td align="left" headers="r5c1-t8 r1c2-t8">Displays statistics about Network File System and Remote Procedure Call activity</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r6c1-t8" headers="r1c1-t8"><code>nice</code></td>
<td align="left" headers="r6c1-t8 r1c2-t8">Changes the initial priority of a process</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r7c1-t8" headers="r1c1-t8"><code>no</code></td>
<td align="left" headers="r7c1-t8 r1c2-t8">Displays or sets network options</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r8c1-t8" headers="r1c1-t8"><code>ps</code></td>
<td align="left" headers="r8c1-t8 r1c2-t8">Displays the status of one or more processes</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r9c1-t8" headers="r1c1-t8"><code>reorgvg</code></td>
<td align="left" headers="r9c1-t8 r1c2-t8">Reorganizes the physical-partition allocation within a volume group</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r10c1-t8" headers="r1c1-t8"><code>time</code></td>
<td align="left" headers="r10c1-t8 r1c2-t8">Displays the elapsed execution, user CPU processing, and system CPU processing time</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r11c1-t8" headers="r1c1-t8"><code>trace</code></td>
<td align="left" headers="r11c1-t8 r1c2-t8">Records and reports selected system events</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r12c1-t8" headers="r1c1-t8"><code>vmo</code></td>
<td align="left" headers="r12c1-t8 r1c2-t8">Manages Virtual Memory Manager tunable parameters</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" --></div>
<!-- class="sect3" -->
<a id="CEGHJDGC" name="CEGHJDGC"></a><a id="UNXAR246" name="UNXAR246"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">8.2.5.2</span> Performance Toolbox</h4>
<p>The AIX Performance Toolbox contains tools for monitoring and tuning system activity locally and remotely. The Performance Tool Box consists of two main components, the <a id="sthref371" name="sthref371"></a><a id="sthref372" name="sthref372"></a>Performance Tool Box Manager and the <a id="sthref373" name="sthref373"></a><a id="sthref374" name="sthref374"></a><a id="sthref375" name="sthref375"></a>Performance Tool Box Agent. The Performance Tool Box Manager collects and displays data from various systems in the configuration by using the <code>xmperf</code> utility. The Performance Tool Box Agent collects and transmits data to the Performance Tool Box Manager by using the <code>xmserd</code> daemon. The Performance Tool Box Agent is also available as a separate product called Performance Aide for AIX.</p>
<p>Both Performance Tool Box and Performance Aide include the monitoring and tuning tools listed in the following table:</p>
<div class="inftblinformal">
<table class="Informal" title="AIX Monitoring and Tuning Tools" summary="This table describes AIX monitoring and tuning tools" dir="ltr" border="1" width="100%" frame="hsides" rules="groups" cellpadding="3" cellspacing="0">
<col width="20%" />
<col width="*" />
<thead>
<tr align="left" valign="top">
<th align="left" valign="bottom" id="r1c1-t9">Tool</th>
<th align="left" valign="bottom" id="r1c2-t9">Description</th>
</tr>
</thead>
<tbody>
<tr align="left" valign="top">
<td align="left" id="r2c1-t9" headers="r1c1-t9"><code>fdpr</code></td>
<td align="left" headers="r2c1-t9 r1c2-t9">Optimizes an executable program for a particular workload</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r3c1-t9" headers="r1c1-t9"><code>filemon</code></td>
<td align="left" headers="r3c1-t9 r1c2-t9">Uses the trace facility to monitor and report the activity of the file system</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r4c1-t9" headers="r1c1-t9"><code>fileplace</code></td>
<td align="left" headers="r4c1-t9 r1c2-t9">Displays the placement of blocks of a file within logical or physical volumes</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r5c1-t9" headers="r1c1-t9"><code>lockstat</code></td>
<td align="left" headers="r5c1-t9 r1c2-t9">Displays statistics about contention for kernel locks</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r6c1-t9" headers="r1c1-t9"><code>lvedit</code></td>
<td align="left" headers="r6c1-t9 r1c2-t9">Facilitates interactive placement of logical volumes within a volume group</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r7c1-t9" headers="r1c1-t9"><code>netpmon</code></td>
<td align="left" headers="r7c1-t9 r1c2-t9">Uses the trace facility to report on network Input-Output and network-related CPU usage</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r8c1-t9" headers="r1c1-t9"><code>rmss</code></td>
<td align="left" headers="r8c1-t9 r1c2-t9">Simulates systems with various memory sizes for performance testing</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r9c1-t9" headers="r1c1-t9"><code>svmon</code></td>
<td align="left" headers="r9c1-t9 r1c2-t9">Captures and analyzes information about virtual-memory usage</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r10c1-t9" headers="r1c1-t9"><code>syscalls</code></td>
<td align="left" headers="r10c1-t9 r1c2-t9">Records and counts system calls</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r11c1-t9" headers="r1c1-t9"><code>tprof</code></td>
<td align="left" headers="r11c1-t9 r1c2-t9">Uses the <code>trace</code> facility to report CPU usage at module and source-code-statement levels</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r12c1-t9" headers="r1c1-t9"><code>BigFoot</code></td>
<td align="left" headers="r12c1-t9 r1c2-t9">Reports the memory access patterns of processes</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r13c1-t9" headers="r1c1-t9"><code>stem</code></td>
<td align="left" headers="r13c1-t9 r1c2-t9">Permits subroutine-level entry and exit instrumentation of existing executables</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><span class="italic">Performance Toolbox for AIX Guide and Reference</span> for information about these tools</p>
</li>
<li>
<p><span class="italic">AIX 5L Performance Management Guide</span> for information about the syntax of some of these tools</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CEGGAIGE" name="CEGGAIGE"></a><a id="UNXAR247" name="UNXAR247"></a>
<div class="sect3">
<h4 class="sect3"><span class="secnum">8.2.5.3</span> System Management Interface Tool<a id="sthref376" name="sthref376"></a><a id="sthref377" name="sthref377"></a></h4>
<p>The AIX System Management Interface Tool (SMIT) provides a menu-driven interface to various system administrative and performance tools. By using SMIT, you can navigate through large numbers of tools and focus on the jobs that you want to perform.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="BCGEFHHE" name="BCGEFHHE"></a><a id="UNXAR248" name="UNXAR248"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">8.2.6</span> HP-UX Tools</h3>
<p>The following performance analysis tools are available on HP-UX systems:</p>
<ul>
<li>
<p><a id="BABHAFAJ" name="BABHAFAJ"></a><a id="sthref378" name="sthref378"></a><a id="sthref379" name="sthref379"></a>GlancePlus/UX</p>
<p>This HP-UX utility is an online diagnostic tool that measures the activities of the system. GlancePlus displays information about how system resources are used. It displays dynamic information about the system Input-Output, CPU, and memory usage on a series of screens. You can use the utility to monitor how individual processes are using resources.</p>
</li>
<li>
<p><a id="BABFCBBD" name="BABFCBBD"></a>HP Programmer's Analysis Kit<a id="sthref380" name="sthref380"></a><a id="sthref381" name="sthref381"></a><a id="sthref382" name="sthref382"></a></p>
<p>HP Programmer's Analysis Kit consists of the following tools:</p>
<ul>
<li>
<p>Puma</p>
<p>This tool collects performance statistics during a program run. It provides several graphical displays for viewing and analyzing the collected statistics.</p>
</li>
<li>
<p>Thread Trace Visualizer</p>
<p>This tool displays trace files produced by the instrumented thread library, <code>libpthread_tr.sl</code>, in a graphical format. It enables you to view how threads are interacting and to find where threads are blocked waiting for resources.</p>
</li>
</ul>
<p>HP Programmer's Analysis Kit is bundled with the HP Fortran 77, HP Fortran 90, HP C, HP C++, HP ANSI C++, and HP Pascal compilers.</p>
</li>
</ul>
<p>The following table lists the performance tuning<a id="sthref383" name="sthref383"></a> tools that you can use for additional performance tuning on HP-UX:</p>
<div class="inftblinformal">
<table class="Informal" title="HP Performance Tuning Tools" summary="This table describes HP performance tuning tools" dir="ltr" border="1" width="100%" frame="hsides" rules="groups" cellpadding="3" cellspacing="0">
<col width="21%" />
<col width="*" />
<thead>
<tr align="left" valign="top">
<th align="left" valign="bottom" id="r1c1-t11">Tools</th>
<th align="left" valign="bottom" id="r1c2-t11">Function</th>
</tr>
</thead>
<tbody>
<tr align="left" valign="top">
<td align="left" id="r2c1-t11" headers="r1c1-t11"><code>caliper</code> (Itanium only)</td>
<td align="left" headers="r2c1-t11 r1c2-t11">Collects run-time application data for system analysis tasks such as cache misses, translation look-aside buffer or instruction cycles, along with fast dynamic instrumentation. It is a dynamic performance measurement tool for C, C++, Fortran, and assembly applications.</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r3c1-t11" headers="r1c1-t11"><code>gprof</code></td>
<td align="left" headers="r3c1-t11 r1c2-t11">Creates an execution profile for programs.</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r4c1-t11" headers="r1c1-t11"><code>monitor</code></td>
<td align="left" headers="r4c1-t11 r1c2-t11">Monitors the program counter and calls to certain functions.</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r5c1-t11" headers="r1c1-t11"><code>netfmt</code></td>
<td align="left" headers="r5c1-t11 r1c2-t11">Monitors the network.</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r6c1-t11" headers="r1c1-t11"><code>netstat</code></td>
<td align="left" headers="r6c1-t11 r1c2-t11">Reports statistics on network performance.</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r7c1-t11" headers="r1c1-t11"><code>nfsstat</code></td>
<td align="left" headers="r7c1-t11 r1c2-t11">Displays statistics about Network File System and Remote Procedure Call activity.</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r8c1-t11" headers="r1c1-t11"><code>nettl</code></td>
<td align="left" headers="r8c1-t11 r1c2-t11">Captures network events or packets by logging and tracing.</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r9c1-t11" headers="r1c1-t11"><code>prof</code></td>
<td align="left" headers="r9c1-t11 r1c2-t11">Creates an execution profile of C programs and displays performance statistics for the program, showing where the program is spending most of its execution time.</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r10c1-t11" headers="r1c1-t11"><code>profil</code></td>
<td align="left" headers="r10c1-t11 r1c2-t11">Copies program counter information into a buffer.</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r11c1-t11" headers="r1c1-t11"><code>top</code></td>
<td align="left" headers="r11c1-t11 r1c2-t11">Displays the top processes on the system and periodically updates the information.</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" --></div>
<!-- class="sect2" -->
<a id="CEGDBEID" name="CEGDBEID"></a><a id="UNXAR249" name="UNXAR249"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">8.2.7</span> Linux Tools<a id="sthref384" name="sthref384"></a></h3>
<p>On Linux systems, use the <code>top</code>, <code>free</code>, and <code>cat /proc/meminfo</code> commands to view information about swap space, memory, and buffer usage.</p>
</div>
<!-- class="sect2" -->
<a id="CEGDIJDH" name="CEGDIJDH"></a><a id="UNXAR250" name="UNXAR250"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">8.2.8</span> Solaris Tools<a id="sthref385" name="sthref385"></a></h3>
<p>On Solaris systems, use the <code><a id="sthref386" name="sthref386"></a><a id="sthref387" name="sthref387"></a>mpstat</code> command to view statistics for each processor in a multiprocessor system. Each row of the table represents the activity of one processor. The first row summarizes all activity since the last system restart. Each subsequent row summarizes activity for the preceding interval. All values are events per second unless otherwise noted. The arguments are for time intervals between statistics and number of iterations.</p>
<p>The following example shows sample output from the <code>mpstat</code> command:</p>
<pre xml:space="preserve" class="oac_no_warn">CPU minf mjf xcal  intr ithr  csw icsw migr smtx  srw syscl  usr sys  wt idl
  0    0   0    1    71   21   23    0    0    0    0    55    0   0   0  99
  2    0   0    1    71   21   22    0    0    0    0    54    0   0   0  99
CPU minf mjf xcal  intr ithr  csw icsw migr smtx  srw syscl  usr sys  wt idl
  0    0   0    0    61   16   25    0    0    0    0    57    0   0   0 100
  2    1   0    0    72   16   24    0    0    0    0    59    0   0   0 100
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i19293" name="i19293"></a><a id="UNXAR251" name="UNXAR251"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">8.3</span> Tuning Memory Management<a id="sthref388" name="sthref388"></a></h2>
<p>Start the memory tuning process by measuring paging and swapping space to determine how much memory is available.<a id="sthref389" name="sthref389"></a><a id="sthref390" name="sthref390"></a><a id="sthref391" name="sthref391"></a><a id="sthref392" name="sthref392"></a><a id="sthref393" name="sthref393"></a> After you determine the system memory usage, tune the Oracle buffer cache.</p>
<p><a id="sthref394" name="sthref394"></a><a id="sthref395" name="sthref395"></a>The Oracle buffer manager ensures that the most frequently accessed data is cached longer. If you monitor the buffer manager and tune the buffer cache, then you can significantly improve Oracle Database performance. The optimal Oracle Database buffer size for the system depends on the overall system load and the relative priority of Oracle Database over other applications.<a id="sthref396" name="sthref396"></a></p>
<p>This section includes the following topics:</p>
<ul>
<li>
<p><a href="#BCGIGFEH">Allocating Sufficient Swap Space</a></p>
</li>
<li>
<p><a href="#BCGDJFAJ">Controlling Paging</a></p>
</li>
<li>
<p><a href="#i8852">Adjusting Oracle Block Size</a></p>
</li>
<li>
<p><a href="#BABBJHAC">Allocating Memory Resource</a></p>
</li>
</ul>
<a id="BCGIGFEH" name="BCGIGFEH"></a><a id="UNXAR252" name="UNXAR252"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">8.3.1</span> Allocating Sufficient Swap Space<a id="sthref397" name="sthref397"></a><a id="sthref398" name="sthref398"></a></h3>
<p>Try to minimize swapping because it causes significant operating system overhead. To check for swapping, use the <code>sar</code> or <code>vmstat</code> commands. For information about the appropriate options to use with these commands, refer to the man pages.</p>
<p>If the system is swapping and you must conserve memory, then:</p>
<ul>
<li>
<p>Avoid running unnecessary system daemon processes or application processes.</p>
</li>
<li>
<p>Decrease the number of database buffers to free some memory.</p>
</li>
<li>
<p>Decrease the number of operating system file buffers.</p>
</li>
</ul>
<p>To determine the amount of swap space, run one of the following commands, depending on the platform:</p>
<div class="inftblinformal">
<table class="Informal" title="Swap Space Commands" summary="This table lists the commands to determine swap space by platform" dir="ltr" border="1" width="100%" frame="hsides" rules="groups" cellpadding="3" cellspacing="0">
<col width="28%" />
<col width="*" />
<thead>
<tr align="left" valign="top">
<th align="left" valign="bottom" id="r1c1-t12">Platform</th>
<th align="left" valign="bottom" id="r1c2-t12">Command</th>
</tr>
</thead>
<tbody>
<tr align="left" valign="top">
<td align="left" id="r2c1-t12" headers="r1c1-t12">AIX</td>
<td align="left" headers="r2c1-t12 r1c2-t12"><code>lsps -a</code></td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r3c1-t12" headers="r1c1-t12">HP-UX</td>
<td align="left" headers="r3c1-t12 r1c2-t12"><code>swapinfo -m</code></td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r4c1-t12" headers="r1c1-t12">Linux</td>
<td align="left" headers="r4c1-t12 r1c2-t12"><code>swapon -s</code></td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r5c1-t12" headers="r1c1-t12">Solaris</td>
<td align="left" headers="r5c1-t12 r1c2-t12"><code>swap -l</code> and <code>swap -s</code></td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<p>To add swap space to the system, run one of the following commands, depending on the platform:</p>
<div class="inftblinformal">
<table class="Informal" title="Adding Swap Space" summary="This table lists platform-specific commands to add swap space" dir="ltr" border="1" width="100%" frame="hsides" rules="groups" cellpadding="3" cellspacing="0">
<col width="28%" />
<col width="*" />
<thead>
<tr align="left" valign="top">
<th align="left" valign="bottom" id="r1c1-t13">Platform</th>
<th align="left" valign="bottom" id="r1c2-t13">Command</th>
</tr>
</thead>
<tbody>
<tr align="left" valign="top">
<td align="left" id="r2c1-t13" headers="r1c1-t13">AIX</td>
<td align="left" headers="r2c1-t13 r1c2-t13"><code>chps</code> or <code>mkps</code></td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r3c1-t13" headers="r1c1-t13">HP-UX</td>
<td align="left" headers="r3c1-t13 r1c2-t13"><code>swapon</code></td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r4c1-t13" headers="r1c1-t13">Linux</td>
<td align="left" headers="r4c1-t13 r1c2-t13"><code>swapon -a</code></td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r5c1-t13" headers="r1c1-t13">Solaris</td>
<td align="left" headers="r5c1-t13 r1c2-t13"><code>swap -a</code></td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<p>Set the swap space to the level listed for your platform in the respective platform-specific installation guide, based on your physical RAM and memory features used.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink GINST" href="http://www.oracle.com/pls/db112/lookup?id=GINST"></a>
<ul>
<li>
<p><a class="olink GINST" href="http://www.oracle.com/pls/db112/lookup?id=GINST"><span class="italic">Oracle Database Installation Guide</span></a> for your platform for more information about checking swap space</p>
</li>
<li>
<p>The operating system documentation for more information about these commands</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="BCGDJFAJ" name="BCGDJFAJ"></a><a id="UNXAR253" name="UNXAR253"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">8.3.2</span> Controlling Paging<a id="sthref399" name="sthref399"></a></h3>
<p>Paging may not present as serious a problem as swapping, because an entire program does not have to be stored in memory to run. A small number of page-outs may not noticeably affect the performance of the system.</p>
<p>To detect excessive paging, run measurements during periods of fast response or idle time to compare against measurements from periods of slow response.</p>
<p>Use the <code>vmstat</code> or <code>sar</code> comman<a id="sthref400" name="sthref400"></a>d to monitor paging.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
The man pages or the operating system documentation for information about interpreting the results for the platform</div>
<p>The following table lists the important columns from the output of these commands:</p>
<div class="inftblinformal">
<table class="Informal" title="vmstat and sar Command Output Columns" summary="This table list important columns in the output of the vmstat and sar commands" dir="ltr" border="1" width="100%" frame="hsides" rules="groups" cellpadding="3" cellspacing="0">
<col width="12%" />
<col width="13%" />
<col width="*" />
<thead>
<tr align="left" valign="top">
<th align="left" valign="bottom" id="r1c1-t16">Platform</th>
<th align="left" valign="bottom" id="r1c2-t16">Column</th>
<th align="left" valign="bottom" id="r1c3-t16">Function</th>
</tr>
</thead>
<tbody>
<tr align="left" valign="top">
<td align="left" id="r2c1-t16" headers="r1c1-t16">Solaris</td>
<td align="left" headers="r2c1-t16 r1c2-t16"><code>vflt/s</code></td>
<td align="left" headers="r2c1-t16 r1c3-t16">Indicates the number of address translation page faults. Address translation faults occur when a process refers to a valid page not in memory.</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r3c1-t16" headers="r1c1-t16">HP-UX</td>
<td align="left" headers="r3c1-t16 r1c2-t16"><code>at</code></td>
<td align="left" headers="r3c1-t16 r1c3-t16">Indicates the number of address translation page faults. Address translation faults occur when a process refers to a valid page not in memory.</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r4c1-t16" headers="r1c1-t16">HP-UX</td>
<td align="left" headers="r4c1-t16 r1c2-t16"><code>re</code></td>
<td align="left" headers="r4c1-t16 r1c3-t16">Indicates the number of valid pages that have been reclaimed and added to the free list by page-out activity. This value should be zero.</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<p>If the system consistently has excessive page-out activity<a id="sthref401" name="sthref401"></a>, then consider the following solutions:</p>
<ul>
<li>
<p>Install more memory.</p>
</li>
<li>
<p>Move some work to another system.</p>
</li>
<li>
<p>Configure the System Global Area (SGA) to use less memory.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="i8852" name="i8852"></a><a id="UNXAR254" name="UNXAR254"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">8.3.3</span> Adjusting Oracle Block Size<a id="sthref402" name="sthref402"></a><a id="sthref403" name="sthref403"></a></h3>
<p>During read operations, entire operating system blocks are read from the disk. If the database block size is smaller than the operating system file system block size, then Input-Output bandwidth is inefficient. If you set Oracle Database block size to be a multiple of the file system block size, then you can increase performance by up to 5 percent.</p>
<p>The <code>DB_BLOCK_SIZE</code> initialization parameter sets the database block size. However, to change the value of this parameter, you must re-create the database.</p>
<p>To see the current value of the <code>DB_BLOCK_SIZE</code> parameter, run the <code>SHOW PARAMETER</code> <code>DB_BLOCK_SIZE</code> command in SQL*Plus.</p>
</div>
<!-- class="sect2" -->
<a id="BABBJHAC" name="BABBJHAC"></a><a id="UNXAR255" name="UNXAR255"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">8.3.4</span> Allocating Memory Resource</h3>
<p>You can set parameters to automatically allocate memory based on the demands of workload and the requirements of various database instances running on the same system. The <code>MEMORY_TARGET</code> parameter specifies the Oracle systemwide usable memory for that instance and automatically tunes SGA and Process Global Area (PGA) components. The <code>MEMORY_MAX_TARGET</code> parameter identifies the value up to which the <code>MEMORY_TARGET</code> parameter can grow dynamically.</p>
<p>By default, the value for both these parameters is zero and there is no auto-tuning. You can activate auto-tuning by setting the <code>MEMORY_TARGET</code> parameter to a nonzero value. To dynamically enable the <code>MEMORY_TARGET</code> parameter, the <code>MEMORY_MAX_TARGET</code> parameter must be set at startup.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
If you just set the <code>MEMORY_TARGET</code> parameter to a nonzero value, the <code>MEMORY_MAX_TARGET</code> parameter automatically acquires this value.
<p>The <code>MEMORY_TARGET</code> and <code>MEMORY_MAX_TARGET</code> parameters are only supported on Linux, Solaris, AIX and HP-UX platforms.</p>
<p>On Solaris, Dynamic Intimate Shared Memory is enabled for <code>MEMORY_TARGET</code> or <code>MEMORY_MAX_TARGET</code>.</p>
<p>On Linux, some shared resource requirements are increased when <code>MEMORY_TARGET</code> or <code>MEMORY_MAX_TARGET</code> are enabled. For more information, refer to the <a href="appc_linux.htm#CHDFHJHA">"Allocating Shared Resources"</a> section.</p>
</div>
<div class="infoboxnotealso">
<p class="notep1">Tip:</p>
You can set the <code>MEMORY_TARGET</code> and <code>MEMORY_MAX_TARGET</code> parameters based on original setup, memory available for Oracle on the computer, and workload memory requirements.</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABEBEIC" name="BABEBEIC"></a><a id="UNXAR256" name="UNXAR256"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">8.4</span> Tuning Disk Input-Output<a id="sthref404" name="sthref404"></a></h2>
<p>Balance Input-Output evenly across all available disks to reduce disk access times. For smaller databases and those not using RAID, ensure that different data files and tablespaces are distributed across the available disks.<a id="sthref405" name="sthref405"></a><a id="sthref406" name="sthref406"></a><a id="sthref407" name="sthref407"></a></p>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#BABCBGDH">Using Automatic Storage Management</a></p>
</li>
<li>
<p><a href="#BABJEJEF">Choosing the Appropriate File System Type</a></p>
</li>
</ul>
<a id="BABCBGDH" name="BABCBGDH"></a><a id="UNXAR257" name="UNXAR257"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">8.4.1</span> Using Automatic Storage Management<a id="sthref408" name="sthref408"></a></h3>
<p>If you choose to use Automatic Storage Management for database storage, then all database Input-Output is balanced across all available disk devices in the Automatic Storage Management disk group.</p>
<p>By using Automatic Storage Management, you avoid manually tuning disk Input-Output.</p>
</div>
<!-- class="sect2" -->
<a id="BABJEJEF" name="BABJEJEF"></a><a id="UNXAR258" name="UNXAR258"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">8.4.2</span> Choosing the Appropriate File System Type<a id="sthref409" name="sthref409"></a></h3>
<p>Depending on the operating system, you can choose from a range of file system types. Each file system type has different characteristics. This fact can have a substantial impact on database performance. The following table lists common file system types:</p>
<div class="inftblinformal">
<table class="Informal" title="File System Types" summary="This table lists platform-specific files system types" dir="ltr" border="1" width="100%" frame="hsides" rules="groups" cellpadding="3" cellspacing="0">
<col width="*" />
<col width="33%" />
<col width="33%" />
<thead>
<tr align="left" valign="top">
<th align="left" valign="bottom" id="r1c1-t19">File System</th>
<th align="left" valign="bottom" id="r1c2-t19">Platform</th>
<th align="left" valign="bottom" id="r1c3-t19">Description</th>
</tr>
</thead>
<tbody>
<tr align="left" valign="top">
<td align="left" id="r2c1-t19" headers="r1c1-t19">S5<a id="sthref410" name="sthref410"></a></td>
<td align="left" headers="r2c1-t19 r1c2-t19">HP-UX and Solaris</td>
<td align="left" headers="r2c1-t19 r1c3-t19"><a id="sthref411" name="sthref411"></a>UNIX System V file system</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r3c1-t19" headers="r1c1-t19">U<a id="sthref412" name="sthref412"></a>FS</td>
<td align="left" headers="r3c1-t19 r1c2-t19">AIX, HP-UX, and Solaris</td>
<td align="left" headers="r3c1-t19 r1c3-t19"><a id="sthref413" name="sthref413"></a>Unified file system, derived from BSD UNIX</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r4c1-t19" headers="r1c1-t19">V<a id="sthref414" name="sthref414"></a>xFS</td>
<td align="left" headers="r4c1-t19 r1c2-t19">AIX, HP-UX, and Solaris</td>
<td align="left" headers="r4c1-t19 r1c3-t19"><a id="sthref415" name="sthref415"></a>VERITAS file system</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r5c1-t19" headers="r1c1-t19">ext2/<a id="sthref416" name="sthref416"></a>ext3</td>
<td align="left" headers="r5c1-t19 r1c2-t19">Linux</td>
<td align="left" headers="r5c1-t19 r1c3-t19"><a id="sthref417" name="sthref417"></a>Extended file system for Linux</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r6c1-t19" headers="r1c1-t19">OC<a id="sthref418" name="sthref418"></a>FS2</td>
<td align="left" headers="r6c1-t19 r1c2-t19">Linux</td>
<td align="left" headers="r6c1-t19 r1c3-t19">Oracle cluster file system</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r7c1-t19" headers="r1c1-t19">JF<a id="sthref419" name="sthref419"></a>S/JFS2</td>
<td align="left" headers="r7c1-t19 r1c2-t19">AIX</td>
<td align="left" headers="r7c1-t19 r1c3-t19">J<a id="sthref420" name="sthref420"></a>ournaled file system</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r8c1-t19" headers="r1c1-t19">GP<a id="sthref421" name="sthref421"></a>FS</td>
<td align="left" headers="r8c1-t19 r1c2-t19">AIX</td>
<td align="left" headers="r8c1-t19 r1c3-t19">General parallel file system</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<p>The suitability of a file system for an application is usually not documented. For example, even different implementations of the Unified file system are hard to compare. Depending on the file system that you choose, performance differences can be up to 20 percent. If you choose to use a file system, then:</p>
<ul>
<li>
<p>Make a new file system partition to ensure that the hard disk is clean and unfragmented.</p>
</li>
<li>
<p>Perform a file system check on the partition before using it for database files.</p>
</li>
<li>
<p>Distribute disk Input-Output as evenly as possible.</p>
</li>
<li>
<p>If you are not using a logical volume manager or a RAID device, then consider placing log files on a different file system from data files.</p>
</li>
</ul>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i10932" name="i10932"></a><a id="UNXAR259" name="UNXAR259"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">8.5</span> Monitoring Disk Performance<a id="sthref422" name="sthref422"></a></h2>
<p>The following sections describe the procedure for monitoring disk performance:</p>
<ul>
<li>
<p><a href="#BABJFIAH">Monitoring Disk Performance on Other Operating Systems</a></p>
</li>
<li>
<p><a href="#BABIEIGD">Using Disk Resync to Monitor Automatic Storage Management Disk Group</a></p>
</li>
</ul>
<a id="BABJFIAH" name="BABJFIAH"></a><a id="UNXAR260" name="UNXAR260"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">8.5.1</span> Monitoring Disk Performance on Other Operating Systems</h3>
<p>To monitor disk performance, use the <code>sar -b</code> and <code>sar -u</code> commands.</p>
<p>The following table describes the columns of the <code>sar -b</code> command output that are significant for analyzing disk performance:</p>
<div class="inftblinformal">
<table class="Informal" title="Important sar -b Output Columns" summary="This table lists the important output columns of the sar -b command" dir="ltr" border="1" width="100%" frame="hsides" rules="groups" cellpadding="3" cellspacing="0">
<col width="27%" />
<col width="*" />
<thead>
<tr align="left" valign="top">
<th align="left" valign="bottom" id="r1c1-t20">Columns</th>
<th align="left" valign="bottom" id="r1c2-t20">Description</th>
</tr>
</thead>
<tbody>
<tr align="left" valign="top">
<td align="left" id="r2c1-t20" headers="r1c1-t20"><code>bread/s</code>, <code>bwrit/s</code></td>
<td align="left" headers="r2c1-t20 r1c2-t20">Blocks read and blocks written per second (important for file system databases)</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r3c1-t20" headers="r1c1-t20"><code>pread/s</code>, <code>pwrit/s</code></td>
<td align="left" headers="r3c1-t20 r1c2-t20">Number of reads and writes per second from or to raw character devices</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<p>An important <code>sar -u</code> column for analyzing disk performance is <code>%wio</code>, the percentage of CPU time spent waiting on blocked Input-Output.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
Not all Linux distributions display the <code>%wio</code> column in the output of the <code>sar -u</code> command. For detailed Input-Output statistics, you can use <code>iostat -x</code> command.</div>
<p>Key indicators are:</p>
<ul>
<li>
<p>The sum of the <code>bread</code>, <code>bwrit</code>, <code>pread</code>, and <code>pwrit</code> column values indicates the level of activity of the disk Input-Output subsystem. The higher the sum, the busier the Input-Output subsystem. The larger the number of physical drives, the higher the sum threshold number can be. A good default value is no more than 40 for 2 drives and no more than 60 for 4 to 8 drives.</p>
</li>
<li>
<p>The <code>%rcache</code> column value should be greater than 90 and the <code>%wcache</code> column value should be greater than 60. Otherwise, the system may be disk Input-Output bound.</p>
</li>
<li>
<p>If the <code>%wio</code> column value is consistently greater than 20, then the system is Input-Output bound.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="BABIEIGD" name="BABIEIGD"></a><a id="UNXAR261" name="UNXAR261"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">8.5.2</span> Using Disk Resync to Monitor Automatic Storage Management Disk Group</h3>
<p>Use the <code>alter diskgroup disk online</code> and <code>alter diskgroup disk offline</code> commands to temporarily suspend Input-Output to a set of disks. You can use these commands to perform regular maintenance tasks or upgrades such as disk firmware upgrade. If transient failures occur on some disks in a disk group, then use <code>alter diskgroup disk online</code> to quickly recover the disk group.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i85390" name="i85390"></a><a id="UNXAR262" name="UNXAR262"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">8.6</span> System Global Area<a id="sthref423" name="sthref423"></a></h2>
<p>The SGA is the Oracle structure that is located in shared memory. It contains static data structures, locks, and data buffers.</p>
<p>The maximum size of a single shared memory segment is specified by the <code>shm</code><code>max</code><a id="sthref424" name="sthref424"></a><a id="sthref425" name="sthref425"></a><a id="sthref426" name="sthref426"></a><a id="sthref427" name="sthref427"></a> kernel parameter.</p>
<p>The following table shows the recommended value for this parameter, depending on the platform:</p>
<div class="inftblinformal">
<table class="Informal" title="Recommended SHMMAX Kernel Parameter Values" summary="This table lists platform-specific recommended values for the SHMMAX kernel parameter" dir="ltr" border="1" width="100%" frame="hsides" rules="groups" cellpadding="3" cellspacing="0">
<col width="27%" />
<col width="*" />
<thead>
<tr align="left" valign="top">
<th align="left" valign="bottom" id="r1c1-t22">Platform</th>
<th align="left" valign="bottom" id="r1c2-t22">Recommended Value</th>
</tr>
</thead>
<tbody>
<tr align="left" valign="top">
<td align="left" id="r2c1-t22" headers="r1c1-t22">AIX</td>
<td align="left" headers="r2c1-t22 r1c2-t22">NA</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r3c1-t22" headers="r1c1-t22">HP-UX</td>
<td align="left" headers="r3c1-t22 r1c2-t22">The size of the physical memory installed on the system</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r4c1-t22" headers="r1c1-t22">Linux</td>
<td align="left" headers="r4c1-t22 r1c2-t22">Minimum of the following values:
<ul>
<li>
<p>Half the size of the physical memory installed on the system</p>
</li>
<li>
<p>4GB - 1 byte</p>
</li>
</ul>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r5c1-t22" headers="r1c1-t22">Solaris</td>
<td align="left" headers="r5c1-t22 r1c2-t22">4294967295 or 4 GB minus 16 MB
<p><span class="bold">Note:</span> If the system runs both Oracle9<span class="italic">i</span> Database and Oracle Database 11<span class="italic">g</span> instances, then you must set the value of <code>shm_max</code> to 2 GB minus 16 MB. On Solaris, this value can be greater than 4 GB to accommodate larger SGA sizes.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<p>If the size of the SGA exceeds the maximum size of a shared memory segment (<code>shm</code><code>max</code> or <code>shm</code><code>_max</code>), then Oracle Database attempts to attach more contiguous segments to fulfill the requested SGA size. The <code>shm</code><code>seg</code><a id="sthref428" name="sthref428"></a><a id="sthref429" name="sthref429"></a><a id="sthref430" name="sthref430"></a><a id="sthref431" name="sthref431"></a> kernel parameter specifies the maximum number of segments that can be attached by any process. Set the following initialization parameters to control the size of the SGA:</p>
<ul>
<li>
<p><code>DB_CACHE_SIZE</code><a id="sthref432" name="sthref432"></a><a id="sthref433" name="sthref433"></a><a id="sthref434" name="sthref434"></a><a id="sthref435" name="sthref435"></a></p>
</li>
<li>
<p><code>DB_BLOCK_SIZE</code><a id="sthref436" name="sthref436"></a><a id="sthref437" name="sthref437"></a><a id="sthref438" name="sthref438"></a><a id="sthref439" name="sthref439"></a></p>
</li>
<li>
<p><code>JAVA_POOL_SIZE</code><a id="sthref440" name="sthref440"></a><a id="sthref441" name="sthref441"></a></p>
</li>
<li>
<p><code>LARGE_POOL_SIZE</code><a id="sthref442" name="sthref442"></a><a id="sthref443" name="sthref443"></a></p>
</li>
<li>
<p><code>LOG_BUFFERS</code><a id="sthref444" name="sthref444"></a><a id="sthref445" name="sthref445"></a></p>
</li>
<li>
<p><code>SHARED_POOL_SIZE</code><a id="sthref446" name="sthref446"></a><a id="sthref447" name="sthref447"></a></p>
</li>
</ul>
<p>Alternatively, set the <code>SGA_TARGET</code> initialization parameter to enable automatic tuning of the SGA size.</p>
<p>Use caution when setting values for these parameters. When values are set too high, too much of the physical memory is devoted to shared memory. This results in poor performance.</p>
<p>An Oracle Database configured with Shared Server requires a higher setting for the <code>SHARED_POOL_SIZE</code> initialization parameter, or a custom configuration that uses the <code>LARGE_POOL_SIZE</code> initialization parameter. If you installed the database with Oracle Universal Installer, then the value of the <code>SHARED_POOL_SIZE</code> parameter is set automatically by Oracle Database Configuration Assistant. However, if you created a database manually, then increase the value of the <code>SHARED_POOL_SIZE</code> parameter in the parameter file by 1 KB for each concurrent user.</p>
<p>Sufficient shared memory must be available to each Oracle process to address the entire SGA:</p>
<ul>
<li>
<p><a href="#BABHFEEH">Determining the Size of the SGA</a></p>
</li>
<li>
<p><a href="#BABBDBDE">Shared Memory on AIX</a></p>
</li>
</ul>
<a id="BABHFEEH" name="BABHFEEH"></a><a id="UNXAR263" name="UNXAR263"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">8.6.1</span> Determining the Size of the SGA<a id="sthref448" name="sthref448"></a></h3>
<p>You can determine the SGA size in one of the following ways:</p>
<ul>
<li>
<p>Run the following SQL*Plus command to display the size of the SGA for a running database:</p>
<pre xml:space="preserve" class="oac_no_warn">SQL&gt; SHOW SGA
</pre>
<p>The result is shown in bytes.</p>
</li>
<li>
<p>When you start the database instance, the size of the SGA is displayed next to the Total System Global Area heading.</p>
</li>
<li>
<p>Run the <code>ipcs</code> command as the <code>oracle</code> user.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="BABBDBDE" name="BABBDBDE"></a><a id="UNXAR264" name="UNXAR264"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">8.6.2</span> Shared Memory on AIX<a id="sthref449" name="sthref449"></a></h3>
<div class="infoboxnote">
<p class="notep1">Note:</p>
The information in this section applies only to AIX.</div>
<p>Shared memory uses common virtual memory resources across processes. Processes share virtual memory segments through a common set of virtual memory translation resources, for example, tables and cached entries, for improved performance.</p>
<p>Shared memory can be pinned to prevent paging and to reduce Input-Output overhead. To perform this, set the <code>LOCK_SGA</code> parameter to <code>true</code>. On AIX 5L, the same parameter activates the large page feature whenever the underlying hardware supports it.</p>
<p>Run the following command to make pinned memory available to Oracle Database:</p>
<pre xml:space="preserve" class="oac_no_warn">$ /usr/sbin/vmo -r -o v_pinshm=1
</pre>
<p>Run a command similar to the following to set the maximum percentage of real memory available for pinned memory, where <code><span class="codeinlineitalic">percent_of_real_memory</span></code> is the maximum percent of real memory that you want to set:</p>
<pre xml:space="preserve" class="oac_no_warn">$ /usr/sbin/vmo -r -o maxpin percent=<span class="italic">percent_of_real_memory</span>
</pre>
<p>When using the <code>maxpin percent</code> option, it is important that the amount of pinned memory exceeds the Oracle SGA size by at least 3 percent of the real memory on the system, enabling free pinnable memory for use by the kernel. For example, if you have 2 GB of physical memory and you want to pin the SGA by 400 MB (20 percent of the RAM), then run the following command:</p>
<pre xml:space="preserve" class="oac_no_warn">$ /usr/sbin/vmo -r -o maxpin percent=23
</pre>
<div class="infoboxnote">
<p class="notep1">Note:</p>
The default <code>maxpin percent</code> value, which is set at 80 <code>percent</code>, works for most installations.</div>
<p>Use the <code>svmon</code> command to monitor the use of pinned memory during the operation of the system. Oracle Database attempts to pin memory only if the <code>LOCK_SGA</code> parameter is set to <code>true</code>. If the SGA size exceeds the size of memory available for pinning, then the portion of the SGA exceeding these sizes is allocated to ordinary shared memory.</p>
<p class="subhead2"><a id="UNXAR265" name="UNXAR265"></a>Large Page Feature on AIX POWER4- and POWER5-Based Systems</p>
<p>To turn on and reserve 10 large pages each of size 16 MB on a POWER4 or POWER 5 system, run the following command:</p>
<pre xml:space="preserve" class="oac_no_warn">$ /usr/sbin/vmo -r -o lgpg_regions=10 -o lgpg_size=16777216
</pre>
<p>This command proposes bosboot and warns that a restart is required for the changes to take affect.</p>
<p>Oracle recommends specifying enough large pages to contain the entire SGA. The Oracle database instance attempts to allocate large pages when the <code>LOCK_SGA</code> parameter is set to <code>true</code>.</p>
<p>The 16 MB pages are always pinned, and cannot be used for standard memory. If a pool of 16MB size pages is configured, then this memory will be unusable for allocation of standard memory even if no other application is currently using large pages.</p>
<p>The <code>POWER5</code> based systems support 64 K pages. Oracle uses them for SGA if they are available. These 64K pages do not require any additional configuration and do not depend on <code>LOCK_SGA</code> parameter setting.</p>
<p>To monitor use of large pages, use the following command:</p>
<pre xml:space="preserve" class="oac_no_warn">$ vmstat -P all
</pre>
<p>For the AIX operating system to use 16MB pages, or pinned memory when allocating shared memory, the Oracle user ID must have <code>CAP_BYPASS_RAC_VMM</code> and <code>CAP_PROPAGATE</code> capabilities. User ID that is used to start the database instance must also have the same capabilities. In particular, when using large pages on an Oracle Real Application Cluster (Oracle RAC) database, where the <code>srvctl</code> command is used to start and stop the Oracle RAC database instances, it is also necessary to set the <code>CAP_BYPASS_RAC_VMM</code> and <code>CAP_PROPAGATE</code> capabilities for the <code>root</code> user.</p>
<div align="center">
<div class="inftblinformal"><br />
<table class="Informal oac_no_warn" summary="" border="1" width="80%" frame="hsides" rules="groups" cellpadding="3" cellspacing="0">
<tbody>
<tr align="left" valign="top">
<td align="left">
<p class="notep1">See Also:</p>
The AIX documentation for more information about enabling and tuning pinned memory and large pages</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" --></div>
<p>Capabilities can be set and examined using the following commands:</p>
<ul>
<li>
<p>Run the following command to check the current capabilities:</p>
<pre xml:space="preserve" class="oac_no_warn">$ lsuser &#x2013;a capabilities oracle
</pre></li>
<li>
<p>Add the <code>CAP_BYPASS_RAC_VMM</code> and <code>CAP_PROPAGATE</code> capabilities to this user ID:</p>
<pre xml:space="preserve" class="oac_no_warn">$ chuser capabilities=CAP_BYPASS_RAC_VMM,CAP_PROPAGATE oracle
</pre></li>
</ul>
<div class="infoboxnote">
<p class="notep1">Note:</p>
Only the <code>root</code> user can display and set the capabilities attribute.</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i23890" name="i23890"></a><a id="UNXAR266" name="UNXAR266"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">8.7</span> Tuning the Operating System Buffer Cache<a id="sthref450" name="sthref450"></a></h2>
<p>Adjust the size of Oracle Database buffer cache. If memory is limited, then adjust the operating system buffer cache.<a id="sthref451" name="sthref451"></a><a id="sthref452" name="sthref452"></a><a id="sthref453" name="sthref453"></a></p>
<p>The operating system buffer cache holds blocks of data in memory while they are being transferred from memory to disk, or from disk to memory.</p>
<p>Oracle Database buffer cache is the area in memory that stores Oracle Database buffers.</p>
<p>If the amount of memory on the system is limited, then make a corresponding decrease in the operating system buffer cache size.</p>
<p>Use the <code>sar</code> command to determine which buffer caches you must increase or decrease.</p>
</div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<div class="footer">
<hr />
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<col width="33%" />
<col width="*" />
<col width="33%" />
<tr>
<td align="left">
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="98">
<tr>
<td align="center" valign="top"><a href="ldr_demo.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td align="center" valign="top"><a href="appa_aix.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td style="font-size: 90%" align="center" class="copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2006, 2011,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td align="right">
<table class="icons oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="245">
<tr>
<td align="center" valign="top"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td align="center" valign="top"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td align="center" valign="top"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td align="center" valign="top"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td align="center" valign="top"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
</div>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
