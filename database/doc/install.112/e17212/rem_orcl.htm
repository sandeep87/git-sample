<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
<meta http-equiv="Content-Language" content="en" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<title>How to Modify or Deinstall Oracle Grid Infrastructure</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 020" />
<meta name="Date" content="2011-03-24T11:1:6Z" />
<meta name="robots" content="all" scheme="http://www.robotstxt.org/" />
<meta name="doctitle" content="Oracle&reg; Grid Infrastructure Installation Guide 11g Release 2 (11.2) for Linux" />
<meta name="partno" content="E17212-11" />
<meta name="docid" content="CWLIN" />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />
<link rel="Stylesheet" href="../../dcommon/css/blafdoc.css" title="Default" type="text/css" />
<script type="text/javascript" src="../../dcommon/js/doccd.js">
</script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="postinst.htm" title="Previous" type="text/html" />
<link rel="Next" href="trouble.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e17212.pdf" title="PDF version" type="application/pdf" />
</head>
<body>
<div class="header">
<div class="zz-skip-header"><a name="top" id="top" href="#BEGIN">Skip Headers</a></div>
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<tr>
<td align="left" valign="top"><b>Oracle&reg; Grid Infrastructure Installation Guide<br />
11<i>g</i> Release 2 (11.2) for Linux</b><br />
Part Number E17212-11</td>
<td valign="bottom" align="right">
<table class="icons oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="245">
<tr>
<td align="center" valign="top"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td align="center" valign="top"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td align="center" valign="top"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td align="center" valign="top"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td align="center" valign="top"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
<hr />
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<tr>
<td align="left" valign="top">
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="98">
<tr>
<td align="center" valign="top"><a href="postinst.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td align="center" valign="top"><a href="trouble.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td align="right" valign="top" style="font-size: 90%"><a href="../e17212.pdf">View PDF</a></td>
</tr>
</table>
<a name="BEGIN" id="BEGIN"></a></div>
<div class="IND"><!-- End Header --><a id="CWLIN345" name="CWLIN345"></a><a id="sthref720" name="sthref720"></a>
<h1 class="chapter"><span class="secnum">6</span> How to Modify or Deinstall Oracle Grid Infrastructure</h1>
<p>This chapter describes how to remove Oracle Clusterware and Oracle ASM.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CBHFFAGE">Deciding When to Deinstall Oracle Clusterware</a></p>
</li>
<li>
<p><a href="#CBHEEJAA">Migrating Standalone Grid Infrastructure Servers to a Cluster</a></p>
</li>
<li>
<p><a href="#CBHEJEAF">Relinking Oracle Grid Infrastructure for a Cluster Binaries</a></p>
</li>
<li>
<p><a href="#CIHIFHDD">Changing the Oracle Grid Infrastructure Home Path</a></p>
</li>
<li>
<p><a href="#CBHJAGJC">Deconfiguring Oracle Clusterware Without Removing Binaries</a></p>
</li>
<li>
<p><a href="#CBHEFHAC">Removing Oracle Clusterware and Oracle ASM</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Product-specific documentation for requirements and restrictions to remove an individual product</div>
<a id="CBHFFAGE" name="CBHFFAGE"></a><a id="CWLIN346" name="CWLIN346"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">6.1</span> <a id="sthref721" name="sthref721"></a><a id="sthref722" name="sthref722"></a><a id="sthref723" name="sthref723"></a><a id="sthref724" name="sthref724"></a><a id="sthref725" name="sthref725"></a>Deciding When to Deinstall Oracle Clusterware</h2>
<p>Remove installed components in the following situations:</p>
<ul>
<li>
<p>You have successfully installed Oracle Clusterware, and you want to remove the Oracle Clusterware installation, either in an educational environment, or a test environment.</p>
</li>
<li>
<p>You have encountered errors during or after installing or upgrading Oracle Clusterware, and you want to reattempt an installation.</p>
</li>
<li>
<p>Your installation or upgrade stopped because of a hardware or operating system failure.</p>
</li>
<li>
<p>You are advised by Oracle Support to reinstall Oracle Clusterware.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="CBHEEJAA" name="CBHEEJAA"></a><a id="CWLIN347" name="CWLIN347"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">6.2</span> Migrating Standalone Grid Infrastructure Servers to a Cluster</h2>
<p>If you have an Oracle Database installation using Oracle Restart (that is, an Oracle Grid Infrastructure installation for a standalone server), and you want to configure that server as a cluster member node, then complete the following tasks:</p>
<ol>
<li>
<p>Inspect the Oracle Restart configuration with <code>srvctl</code> using the following syntax, where <span class="italic">db_unique_name</span> is the unique name for the database, and <span class="italic">lsnrname</span> is the name of the listeners:</p>
<p>srvctl config database -d <span class="italic">db_unique_name</span></p>
<p>srvctl config service -d <span class="italic">db_unique_name</span></p>
<p>srvctl config listener -l <span class="italic">lsnrname</span></p>
<p>Write down the configuration information for the server.</p>
</li>
<li>
<p>Change directory to <span class="italic">Grid home</span><code>/crs/install</code>. For example:</p>
<pre xml:space="preserve" class="oac_no_warn"># cd /u01/app/11.2.0/grid/crs/install
</pre></li>
<li>
<p>Stop all of the databases, services, and listeners that you discovered in step 1.</p>
</li>
<li>
<p>If present, unmount all Oracle ACFS filesystems.</p>
</li>
<li>
<p>Deconfigure and deinstall the Oracle Grid Infrastructure installation for a standalone server, using the following command:</p>
<pre xml:space="preserve" class="oac_no_warn"># roothas.pl -deconfig -force
</pre></li>
<li>
<p>Prepare the server for Oracle Clusterware configuration, as described in this document.</p>
</li>
<li>
<p>As the Oracle Grid Infrastructure installation owner, run Oracle Clusterware Configuration Wizard, and save and stage the response file. For example:</p>
<pre xml:space="preserve" class="oac_no_warn">$ Grid_home/crs/config/config.sh -silent -responseFile $HOME/GI.rsp
</pre></li>
<li>
<p>Run <code>root.sh</code> for the Oracle Clusterware Configuration Wizard.</p>
</li>
<li>
<p>Mount the Oracle Restart disk group.</p>
</li>
<li>
<p>Enter the <code>volenable</code> command to enable all Oracle Restart disk group volumes.</p>
</li>
<li>
<p>Mount all Oracle ACFS filesystems manually.</p>
</li>
<li>
<p>Add back Oracle Clusterware services to the Oracle Clusterware home, using the information you wrote down in step 1, including adding back Oracle ACFS resources. For example:</p>
<pre xml:space="preserve" class="oac_no_warn">/u01/app/grid/product/11.2.0/grid/bin/srvctl add filesystem -d /dev/asm/db1  -g ORestartData -v db1 -m /u01/app/grid/product/11.2.0/db1 -u grid
</pre></li>
<li>
<p>Add the Oracle Database for support by Oracle Grid Infrastructure for a cluster, using the configuration information you recorded in step 1. Use the following command syntax, where <span class="italic">db_unique_name</span> is the unique name of the database on the node, and nodename is the name of the node:</p>
<p>srvctl add database -d db_unique_name -o $ORACLE_HOME -x nodename</p>
<p>For example, with the database name <code>mydb</code>, and the service <code>myservice</code>, enter the following commands:</p>
<pre xml:space="preserve" class="oac_no_warn">srvctl add database -d mydb -o $ORACLE_HOME -x node1

</pre></li>
<li>
<p>Add each service to the database, using the command <code>srvctl add service</code>. For example:</p>
<pre xml:space="preserve" class="oac_no_warn">srvctl add service -d mydb -s myservice
</pre></li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CBHEJEAF" name="CBHEJEAF"></a><a id="CWLIN348" name="CWLIN348"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">6.3</span> Relinking Oracle Grid Infrastructure for a Cluster Binaries</h2>
<p><a id="sthref726" name="sthref726"></a>After installing Oracle Grid Infrastructure for a cluster (Oracle Clusterware and Oracle ASM configured for a cluster), if you need to modify the binaries, then use the following procedure, where <code><span class="codeinlineitalic">Grid_home</span></code> is the Oracle Grid Infrastructure for a Cluster home:</p>
<div class="infoboxnote">
<p class="notep1">Caution:</p>
Before relinking executables, you must shut down all executables that run in the Oracle home directory that you are relinking. In addition, shut down applications linked with Oracle shared libraries.</div>
<p>As <code>root</code>:</p>
<pre xml:space="preserve" class="oac_no_warn"># cd <span class="italic">Grid_home</span>/crs/install
# perl rootcrs.pl -unlock
</pre>
<p>As the Oracle Grid Infrastructure for a Cluster owner:</p>
<pre xml:space="preserve" class="oac_no_warn">$ export ORACLE_HOME=<span class="italic">Grid_home</span>
$ <span class="italic">Grid_home</span>/bin/relink
</pre>
<p>As root again:</p>
<pre xml:space="preserve" class="oac_no_warn"># cd <span class="italic">Grid_home</span>/crs/install
# perl rootcrs.pl -patch
</pre>
<p>You must relink the Oracle Clusterware and Oracle ASM binaries every time you apply an operating system patch or after an operating system upgrade.</p>
<p>For upgrades from previous releases, if you want to deinstall the prior release Grid home, then you must first unlock the prior release Grid home. Unlock the previous release Grid home by running the command <code>rootcrs.pl -unlock</code> from the previous release home. After the script has completed, you can run the deinstall command.</p>
</div>
<!-- class="sect1" -->
<a id="CIHIFHDD" name="CIHIFHDD"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">6.4</span> Changing the Oracle Grid Infrastructure Home Path</h2>
<p><a id="sthref727" name="sthref727"></a>After installing Oracle Grid Infrastructure for a cluster (Oracle Clusterware and Oracle ASM configured for a cluster), if you need to change the Grid home path, then use the following example as a guide to detach the existing Grid home, and to attach a new Grid home:</p>
<div class="infoboxnote">
<p class="notep1">Caution:</p>
Before changing the Grid home, you must shut down all executables that run in the Grid home directory that you are relinking. In addition, shut down applications linked with Oracle shared libraries.</div>
<ol>
<li>
<p>Detach the existing Grid home by running the following command as the Oracle Grid Infrastructure installation owner (<code>grid</code>), where <code>/u01/app/11.2.0/grid</code> is the existing Grid home location:</p>
<pre xml:space="preserve" class="oac_no_warn">$ cd /u01/app/11.2.0/grid/oui/bin
$ ./detachhome.sh -silent -local -invPtrLoc /u01/app/11.2.0/grid/oraInst.loc
</pre></li>
<li>
<p>As root, move the Grid binaries from the old Grid home location to the new Grid home location. For example, where the old Grid home is <code>/u01/app/11.2.0/grid</code> and the new Grid home is <code>/u01/app/grid</code>:</p>
<pre xml:space="preserve" class="oac_no_warn"># mv /u01/app/11.2.0/grid /u01/app/grid
</pre></li>
<li>
<p>Attach the new Grid home by running the following command on each cluster member node as the Oracle Grid Infrastructure installation owner (<code>grid</code>), where:</p>
<ul>
<li>
<p>ORACLE_HOME (<code>/u01/app/grid</code>) is the new Grid home location</p>
</li>
<li>
<p>ORACLE_HOME_NAME (<code>grid</code>) is the Grid home name</p>
</li>
<li>
<p>CLUSTER_NODES (<code>node1,node2,node3)</code> is a comma-delimited list of cluster member nodes</p>
</li>
<li>
<p>LOCAL_NODE (<code>node1</code>) is the name of the node on which you are running the <code>attachhome.sh</code> script</p>
</li>
</ul>
<pre xml:space="preserve" class="oac_no_warn">$ cd /u01/app/grid/oui/bin
$ ./attachhome.sh -silent -local -invPtrLoc /u01/app/grid/oraInst.loc \
ORACLE_HOME=/u01/app/grid ORACLE_HOME_NAME=grid \
"CLUSTER_NODES={node1,node2,node3}" LOCAL_NODE=node1 CRS=true
</pre>
<p>If the Grid home that you are attaching is a shared Grid home location, then add the flag <code>-cfs</code> to the <code>attachhome.sh</code> command line.</p>
</li>
<li>
<p>As root again, enter the following command:</p>
<pre xml:space="preserve" class="oac_no_warn"># cd /u01/app/grid/crs/install
# perl rootcrs.pl -patch
</pre></li>
<li>
<p>Repeat steps 1 through 4 on each cluster member node.</p>
</li>
</ol>
<p>You must relink the Oracle Clusterware and Oracle ASM binaries every time you move the Grid home.</p>
</div>
<!-- class="sect1" -->
<a id="CBHJAGJC" name="CBHJAGJC"></a><a id="CWLIN349" name="CWLIN349"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">6.5</span> Deconfiguring Oracle Clusterware Without Removing Binaries</h2>
<p><a id="sthref728" name="sthref728"></a><a id="sthref729" name="sthref729"></a><a id="sthref730" name="sthref730"></a><a id="sthref731" name="sthref731"></a>Running the <code>rootcrs.pl</code> command flags <code>-deconfig -force</code> enables you to deconfigure Oracle Clusterware on one or more nodes without removing installed binaries. This feature is useful if you encounter an error on one or more cluster nodes during installation when running the <code>root.sh</code> command, such as a missing operating system package on one node. By running <code>rootcrs.pl -deconfig -force</code> on nodes where you encounter an installation error, you can deconfigure Oracle Clusterware on those nodes, correct the cause of the error, and then run <code>root.sh</code> again.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
Stop any databases, services, and listeners that may be installed and running before deconfiguring Oracle Clusterware.</div>
<div class="infoboxnote">
<p class="notep1">Caution:</p>
Commands used in this section remove the Oracle Grid infrastructure installation for the entire cluster. If you want to remove the installation from an individual node, then refer to <a class="olink CWADD1167" href="http://www.oracle.com/pls/db112/lookup?id=CWADD1167"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a>.</div>
<p>To deconfigure Oracle Clusterware:</p>
<ol>
<li>
<p>Log in as the <code>root</code> user on a node where you encountered an error.</p>
</li>
<li>
<p>Change directory to Grid_home/crs/install. For example:</p>
<pre xml:space="preserve" class="oac_no_warn"># cd /u01/app/11.2.0/grid/crs/install
 
</pre></li>
<li>
<p>Run rootcrs.pl with the -deconfig -force flags. For example:</p>
<pre xml:space="preserve" class="oac_no_warn"># perl rootcrs.pl -deconfig -force
</pre>
<p>Repeat on other nodes as required.</p>
</li>
<li>
<p>If you are deconfiguring Oracle Clusterware on all nodes in the cluster, then on the last node, enter the following command:</p>
<pre xml:space="preserve" class="oac_no_warn"># perl rootcrs.pl -deconfig -force -lastnode
</pre>
<p>The <code>-lastnode</code> flag completes deconfiguration of the cluster, including the OCR and voting disks.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CBHEFHAC" name="CBHEFHAC"></a><a id="CWLIN350" name="CWLIN350"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">6.6</span> Removing Oracle Clusterware and Oracle ASM</h2>
<p>The <code>deinstall</code> command removes Oracle Clusterware and Oracle ASM from your server. The following sections describe the command, and provide information about additional options to use the command:</p>
<ul>
<li>
<p><a href="#CBHEFJFI">About the Deinstallation Tool</a></p>
</li>
<li>
<p><a href="#CHDBHGBJ">Downloading The Deinstall Tool for Use with Failed Installations</a></p>
</li>
<li>
<p><a href="#CBHEECDB">Deinstall Command Example for Oracle Clusterware and Oracle ASM</a></p>
</li>
<li>
<p><a href="#CBHHDFDA">Deinstallation Parameter File Example for Grid Infrastructure for a Cluster</a></p>
</li>
</ul>
<a id="CBHEFJFI" name="CBHEFJFI"></a><a id="CWLIN351" name="CWLIN351"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">6.6.1</span> About the Deinstallation Tool</h3>
<p>The Deinstallation Tool (<code>deinstall</code>) stops Oracle software, and removes Oracle software and configuration files on the operating system. It is available in the installation media before installation, and is available in Oracle home directories after installation. It is located in the path <code>$ORACLE_HOME/deinstall</code>.</p>
<div class="infoboxnote">
<p class="notep1">Caution:</p>
When you run the deinstall command, if the central inventory (oraInventory) contains no other registered homes besides the home that you are deconfiguring and removing, then the deinstall command removes the following files and directory contents in the Oracle base directory of the Oracle RAC installation owner:
<ul>
<li>
<p>admin</p>
</li>
<li>
<p>cfgtoollogs</p>
</li>
<li>
<p>checkpoints</p>
</li>
<li>
<p>diag</p>
</li>
<li>
<p>oradata</p>
</li>
<li>
<p>flash_recovery_area</p>
</li>
</ul>
<p>Oracle strongly recommends that you configure your installations using an Optimal Flexible Architecture (OFA) configuration, and that you reserve Oracle base and Oracle home paths for exclusive use of Oracle software. If you have any user data in these locations in the Oracle base that is owned by the user account that owns the Oracle software, then the deinstall command deletes this data.</p>
</div>
<p>The command uses the following syntax, where variable content is indicated by italics:</p>
<pre xml:space="preserve" class="oac_no_warn">deinstall -home <span class="italic">complete path of Oracle home</span> [-silent] [-checkonly] [-local]
[-paramfile <span class="italic">complete path of input parameter property file</span>] [-params <span class="italic">name1</span>=<span class="italic">value</span>
<span class="italic">name2</span>=<span class="italic">value</span> . . .] [-o <span class="italic">complete path of directory for saving files</span>] -help
 
</pre>
<p>The default method for running the deinstall tool is from the deinstall directory in the Grid home. For example:</p>
<pre xml:space="preserve" class="oac_no_warn">$ cd /u01/app/11.2.0/grid/deinstall
$ ./deinstall
</pre>
<p>In addition, you can run the deinstall tool from other locations, or with a parameter file, or select other options to run the tool.</p>
<p>The options are:</p>
<ul>
<li>
<p><code>-home</code></p>
<p>Use this flag to indicate the home path of the Oracle home that you want to check or deinstall. To deinstall Oracle software using the <code>deinstall</code> command in the Oracle home you plan to deinstall, provide a parameter file in another location, and do not use the <code>-home</code> flag.</p>
<p>If you run <code>deinstall</code> from the $ORACLE_HOME/deinstall path, then the <code>-home</code> flag is not required because the tool knows from which home it is being run. If you use the standalone version of the tool, then <code>-home</code> is mandatory.</p>
</li>
<li>
<p>-<code>silent</code></p>
<p>Use this flag to run the command in noninteractive mode. This option requires a properties file that contains the configuration values for the Oracle home that is being deinstalled or deconfigured.</p>
<p>To create a properties file and provide the required parameters, refer to the template file <code>deinstall.rsp.tmpl</code>, located in the <code>response</code> folder of the Deinstallation tool home or the Oracle home.</p>
<p>If you have a working system, then instead of using the template file, you can generate a properties file by running the <code>deinstall</code> command using the <code>-checkonly</code> flag. The <code>deinstall</code> command then discovers information from the Oracle home that you want to deinstall and deconfigure. It generates the properties file, which you can then use with the <code>-silent</code> option.</p>
</li>
<li>
<p><code>-checkonly</code></p>
<p>Use this flag to check the status of the Oracle software home configuration. Running the command with the <code>checkonly</code> flag does not remove the Oracle configuration.</p>
</li>
<li>
<p><code>-local</code></p>
<p>Use this flag on a multinode non-shared environment to deconfigure Oracle software in a cluster.</p>
<p>When you run <code>deinstall</code> with this flag, it deconfigures and deinstalls the Oracle software on the local node (the node where <code>deinstall</code> is run) for non-shared home directories. On remote nodes, it deconfigures Oracle software, but does not deinstall the Oracle software.</p>
</li>
<li>
<p><code>-paramfile</code> <code><span class="codeinlineitalic">complete path of input parameter property file</span></code></p>
<p>Use this flag to run <code>deinstall</code> with a parameter file in a location other than the default. When you use this flag, provide the complete path where the parameter file is located. If you are running the deinstall command from the Oracle home that you plan to deinstall, then you do not need to use the <code>-paramfile</code> flag.</p>
<p>The default location of the parameter file depends on the location of <code>deinstall</code>:</p>
<ul>
<li>
<p>From the installation media or stage location: <code>$ORACLE_HOME/inventory/response</code>.</p>
</li>
<li>
<p>From a unzipped archive file from Oracle Technology Network (OTN): <code>/</code><code><span class="codeinlineitalic">ziplocation</span></code><code>/response</code>.</p>
</li>
<li>
<p>After installation from the installed Oracle home: <code>$ORACLE_HOME/deinstall/response</code>.</p>
</li>
</ul>
</li>
<li>
<p><code>-params</code> [<code><span class="codeinlineitalic">name1</span></code>=<code><span class="codeinlineitalic">value</span></code> <code><span class="codeinlineitalic">name2</span></code>=<code><span class="codeinlineitalic">value</span></code> <code><span class="codeinlineitalic">name3</span></code>=<code><span class="codeinlineitalic">value</span></code> ...]</p>
<p>Use this flag with a parameter file to override one or more values in a parameter file you have already created.</p>
</li>
<li>
<p>-<code>o</code> <code><span class="codeinlineitalic">complete path of directory for saving response files</span></code></p>
<p>Use this flag to provide a path other than the default location where the properties file (<code>deinstall.rsp.tmpl</code>) is saved.</p>
<p>The default location of the parameter file depends on the location of <code>deinstall</code>:</p>
<ul>
<li>
<p>From the installation media or stage location before installation: <code>$ORACLE_HOME/</code>.</p>
</li>
<li>
<p>From a unzipped archive file from OTN: <code>/</code><code><span class="codeinlineitalic">ziplocation</span></code><code>/response/</code>.</p>
</li>
<li>
<p>After installation from the installed Oracle home: <code>$ORACLE_HOME/deinstall/response</code>.</p>
</li>
</ul>
</li>
<li>
<p><code>-help</code></p>
<p>Use the help option (<code>-help</code>) to obtain additional information about the command option flags.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CHDBHGBJ" name="CHDBHGBJ"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">6.6.2</span> Downloading The Deinstall Tool for Use with Failed Installations</h3>
<p>You can use the Deinstallation tool (<code>deinstall</code>) to remove failed or incomplete installations. It is available as a separate download from the Oracle Technology Network (OTN) Web site.</p>
<p>To download the Deinstallation tool:</p>
<ol>
<li>
<p>Go to the following URL:</p>
<pre xml:space="preserve" class="oac_no_warn"><a href="http://www.oracle.com/technetwork/database/enterprise-edition/downloads/index.html">http://www.oracle.com/technetwork/database/enterprise-edition/downloads/index.html</a>
</pre></li>
<li>
<p>Under <span class="bold">Oracle Database 11g Release 2</span>, click <span class="bold">See All</span> for the respective platform for which you want to download the Deinstallation Tool.</p>
<p>The Deinstallation tool is available for download at the end of this page.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CBHEECDB" name="CBHEECDB"></a><a id="CWLIN352" name="CWLIN352"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">6.6.3</span> Deinstall Command Example for Oracle Clusterware and Oracle ASM</h3>
<p>As the <code>deinstall</code> command runs, you are prompted to provide the home directory of the Oracle software that you want to remove from your system. Provide additional information as prompted.</p>
<p>To run the <code>deinstall</code> command from an Oracle Grid Infrastructure for a cluster home, enter the following command:</p>
<pre xml:space="preserve" class="oac_no_warn">$ cd /u01/app/11.2.0/grid/deinstall/
$ ./deinstall 
</pre>
<p>You can run generate a <code>deinstall</code> parameter file by running the <code>deinstall</code> command using the <code>-checkonly</code> flag before you run the command to deinstall the home, or you can use the response file template and manually edit it to create the parameter file to use with the <code>deinstall</code> command.</p>
</div>
<!-- class="sect2" -->
<a id="CBHHDFDA" name="CBHHDFDA"></a><a id="CWLIN353" name="CWLIN353"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">6.6.4</span> Deinstallation Parameter File Example for Grid Infrastructure for a Cluster</h3>
<p>You can run the <code>deinstall</code> command with the <code>-paramfile</code> option to use the values you specify in the parameter file. The following is an example of a parameter file for a cluster on nodes <code>node1</code> and <code>node2</code>, in which the Oracle Grid Infrastructure for a cluster software binary owner is <code>grid</code>, the Oracle Grid Infrastructure home (Grid home) is in the path <code>/u01/app/11.2.0/grid</code>, the Oracle base (the Oracle base for Oracle Grid Infrastructure, containing Oracle ASM log files, Oracle Clusterware logs, and other administrative files) is <code>/u01/app/11.2.0/grid/</code>, the central Oracle Inventory home (<code>oraInventory</code>) is <code>/u01/app/oraInventory</code>, the virtual IP addresses (VIP) are <code>192.0.2.2</code> and <code>192.0.2.4</code>, the local node (the node where you are running the deinstallation session from) is <code>node1</code>:</p>
<pre xml:space="preserve" class="oac_no_warn">#Copyright (c) 2005, 2006 Oracle Corporation.  All rights reserved.
#Fri Feb 06 00:08:58 PST 2009
LOCAL_NODE=node1
HOME_TYPE=CRS
ASM_REDUNDANCY=\
ORACLE_BASE=/u01/app/11.2.0/grid/
VIP1_MASK=255.255.252.0
VOTING_DISKS=/u02/storage/grid/vdsk
SCAN_PORT=1522
silent=true
ASM_UPGRADE=false
ORA_CRS_HOME=/u01/app/11.2.0/grid
GPNPCONFIGDIR=$ORACLE_HOME
LOGDIR=/home/grid/SH/deinstall/logs/
GPNPGCONFIGDIR=$ORACLE_HOME
ORACLE_OWNER=grid
NODELIST=node1,node2
CRS_STORAGE_OPTION=2
NETWORKS="eth0"/192.0.2.1\:public,"eth1"/10.0.0.1\:cluster_interconnect
VIP1_IP=192.0.2.2
NETCFGJAR_NAME=netcfg.jar
ORA_DBA_GROUP=dba
CLUSTER_NODES=node1,node2
JREDIR=/u01/app/11.2.0/grid/jdk/jre
VIP1_IF=eth0
REMOTE_NODES=node2
VIP2_MASK=255.255.252.0
ORA_ASM_GROUP=asm
LANGUAGE_ID=AMERICAN_AMERICA.WE8ISO8859P1
CSS_LEASEDURATION=400
NODE_NAME_LIST=node1,node2
SCAN_NAME=node1scn
SHAREJAR_NAME=share.jar
HELPJAR_NAME=help4.jar
SILENT=false
local=false
INVENTORY_LOCATION=/u01/app/oraInventory
GNS_CONF=false
JEWTJAR_NAME=jewt4.jar
OCR_LOCATIONS=/u02/storage/grid/ocr
EMBASEJAR_NAME=oemlt.jar
ORACLE_HOME=/u01/app/11.2.0/grid
CRS_HOME=true
VIP2_IP=192.0.2.4
ASM_IN_HOME=n
EWTJAR_NAME=ewt3.jar
HOST_NAME_LIST=node1,node2
JLIBDIR=/u01/app/11.2.0/grid/jlib
VIP2_IF=eth0
VNDR_CLUSTER=false
CRS_NODEVIPS='node1-vip/255.255.252.0/eth0,node2-vip/255.255.252.0/eth0'
CLUSTER_NAME=node1-cluster  
</pre>
<div class="infoboxnote">
<p class="notep1">Note:</p>
Do not use quotation marks with variables except in the following cases:
<ul>
<li>
<p>Around addresses in CRS_NODEVIPS:</p>
<pre xml:space="preserve" class="oac_no_warn">CRS_NODEVIPS='n1-vip/255.255.252.0/eth0,n2-vip/255.255.252.0/eth0'
</pre></li>
<li>
<p>Around interface names in NETWORKS:</p>
<pre xml:space="preserve" class="oac_no_warn">NETWORKS="eth0"/192.0.2.1\:public,"eth1"/10.0.0.1\:cluster_interconnect VIP1_IP=192.0.2.2
</pre></li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<div class="footer">
<hr />
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<col width="33%" />
<col width="*" />
<col width="33%" />
<tr>
<td align="left">
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="98">
<tr>
<td align="center" valign="top"><a href="postinst.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td align="center" valign="top"><a href="trouble.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td style="font-size: 90%" align="center" class="copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2011,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td align="right">
<table class="icons oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="245">
<tr>
<td align="center" valign="top"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td align="center" valign="top"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td align="center" valign="top"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td align="center" valign="top"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td align="center" valign="top"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
</div>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
