<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
<meta http-equiv="Content-Language" content="en" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<title>Oracle Grid Infrastructure</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.1" />
<meta name="Date" content="2011-03-08T13:46:17Z" />
<meta name="robots" content="all" scheme="http://www.robotstxt.org/" />
<meta name="doctitle" content="Oracle&reg; Database Installation Guide 11g Release 2 (11.2) for Linux" />
<meta name="partno" content="E16763-08" />
<meta name="docid" content="LADBI" />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />
<link rel="Stylesheet" href="../../dcommon/css/blafdoc.css" title="Default" type="text/css" />
<script type="text/javascript" src="../../dcommon/js/doccd.js">
</script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="pre_install.htm" title="Previous" type="text/html" />
<link rel="Next" href="inst_task.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e16763.pdf" title="PDF version" type="application/pdf" />
</head>
<body>
<div class="header">
<div class="zz-skip-header"><a name="top" id="top" href="#BEGIN">Skip Headers</a></div>
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<tr>
<td align="left" valign="top"><b>Oracle&reg; Database Installation Guide<br />
11<i>g</i> Release 2 (11.2) for Linux</b><br />
Part Number E16763-08</td>
<td valign="bottom" align="right">
<table class="icons oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="245">
<tr>
<td align="center" valign="top"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td align="center" valign="top"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td align="center" valign="top"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td align="center" valign="top"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td align="center" valign="top"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
<hr />
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<tr>
<td align="left" valign="top">
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="98">
<tr>
<td align="center" valign="top"><a href="pre_install.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td align="center" valign="top"><a href="inst_task.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td align="right" valign="top" style="font-size: 90%"><a href="../e16763.pdf">View PDF</a></td>
</tr>
</table>
<a name="BEGIN" id="BEGIN"></a></div>
<div class="IND"><!-- End Header --><a id="CIHCBGCC" name="CIHCBGCC"></a>
<h1 class="chapter"><span class="secnum">3</span> <a name="LADBI999" id="LADBI999"></a>Oracle Grid Infrastructure</h1>
<p>The Oracle Grid Infrastructure for a standalone server is the Oracle software that provides system support for an Oracle database including volume management, file system, and automatic restart capabilities. If you plan to use Oracle Restart or Oracle Automatic Storage Management (Oracle ASM), you must install Oracle Grid Infrastructure before installing your database. Oracle Grid Infrastructure for a standalone server is the software that includes Oracle Restart and Oracle ASM. Oracle combined the two infrastructure products into a single set of binaries that is installed as the Oracle Grid Infrastructure home. Oracle Grid Infrastructure should be installed before installing Oracle Database 11<span class="italic">g</span> Release 2.</p>
<p>Oracle ASM is a volume manager and a file system for Oracle database files that supports single-instance Oracle Database and Oracle Real Application Clusters (Oracle RAC) configurations. Oracle ASM also supports a general purpose file system for your application needs including Oracle Database binaries. Oracle ASM is Oracle's recommended storage management solution that provides an alternative to conventional volume managers, file systems, and raw devices.</p>
<p>Oracle Restart<a id="sthref419" name="sthref419"></a><a id="sthref420" name="sthref420"></a><a id="sthref421" name="sthref421"></a> improves the availability of your Oracle database by providing the following:</p>
<ul>
<li>
<p>When there is a hardware or a software failure, Oracle Restart automatically starts all Oracle components, including Oracle database instance, Oracle Net Listener, database services, and Oracle ASM.</p>
</li>
<li>
<p>Oracle Restart starts components in the proper order when the database host is restarted.</p>
</li>
<li>
<p>Oracle Restart runs periodic checks to monitor the health of Oracle components. If a check operation fails for a component, then the component is shut down and restarted.</p>
</li>
</ul>
<div class="infoboxnote">
<p class="notep1">Note:</p>
<ul>
<li>
<p>If you want to use Oracle ASM or Oracle Restart, then you must first install Oracle Grid Infrastructure for a standalone server and then install Oracle Database.</p>
</li>
<li>
<p>Oracle Restart is used in single-instance (non-clustered) environments only.</p>
</li>
</ul>
</div>
<p>This chapter contains the following sections:</p>
<ul>
<li>
<p><a href="#i1011299">Requirements for Oracle Grid Infrastructure Installation</a></p>
</li>
<li>
<p><a href="#BGBGEDGA">Oracle ACFS and Oracle ADVM Support</a></p>
</li>
<li>
<p><a href="#BABBHJAA">Managing Disk Groups for Older Database Versions</a></p>
</li>
<li>
<p><a href="#CFAGEIFE">Migrating Existing Oracle Automatic Storage Management Instances</a></p>
</li>
<li>
<p><a href="#BABGDFIC">Oracle Automatic Storage Management Installation Considerations</a></p>
</li>
<li>
<p><a href="#CHDFDAIG">Preparing Disks for an Oracle Automatic Storage Management Installation</a></p>
</li>
<li>
<p><a href="#CIHECGII">Installing Oracle Grid Infrastructure Using a Software-Only Installation</a></p>
</li>
<li>
<p><a href="#BABHEBIG">Installing and Configuring Oracle Grid Infrastructure for a Standalone Server</a></p>
</li>
<li>
<p><a href="#BABJCHIJ">Modifying Oracle Grid Infrastructure Binaries After Installation</a></p>
</li>
<li>
<p><a href="#BABGFGCF">Manually Configuring Oracle Automatic Storage Management Disk Groups</a></p>
</li>
<li>
<p><a href="#BABJDJCB">Testing the Oracle Automatic Storage Management Installation</a></p>
</li>
</ul>
<a id="i1011299" name="i1011299"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">3.1</span> Requirements for Oracle Grid Infrastructure Installation<a id="sthref422" name="sthref422"></a><a id="sthref423" name="sthref423"></a><a id="sthref424" name="sthref424"></a><a id="sthref425" name="sthref425"></a><a id="sthref426" name="sthref426"></a><a id="sthref427" name="sthref427"></a></h2>
<p>The system must meet the following requirements:</p>
<ul>
<li>
<p><a href="#CHDCEBFD">Memory Requirements</a></p>
</li>
<li>
<p><a href="#CHDIFGAD">Disk Space Requirements</a></p>
</li>
<li>
<p><a href="#BABIEBHH">Configuring the User's Environment</a></p>
</li>
</ul>
<a id="CHDCEBFD" name="CHDCEBFD"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">3.1.1</span> Memory Requirements</h3>
<p>The following are the memory requirements for installing Oracle Grid Infrastructure.</p>
<p><span class="bold">On Linux x86</span>:</p>
<ul>
<li>
<p>At least 1 GB of RAM (for Oracle Grid Infrastructure for a Standalone Server installations, including installations where you plan to install Oracle Database).</p>
<p>To determine the RAM size, enter the following command:</p>
<pre xml:space="preserve" class="oac_no_warn"># grep MemTotal /proc/meminfo
</pre>
<p>If the size of the RAM is less than the required size, then you must install more memory before continuing.</p>
</li>
<li>
<p>The following table describes the relationship between installed RAM and the configured swap space requirement:</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
On Linux, the HugePages feature allocates non-swappable memory for large page tables using memory-mapped files. If you enable HugePages, then you should deduct the memory allocated to HugePages from the available RAM before calculating swap space.</div>
<div class="inftblinformal">
<table class="Informal" title="swap" summary="Swap space requirements" dir="ltr" border="1" width="100%" frame="hsides" rules="groups" cellpadding="3" cellspacing="0">
<col width="48%" />
<col width="*" />
<thead>
<tr align="left" valign="top">
<th align="left" valign="bottom" id="r1c1-t4">RAM</th>
<th align="left" valign="bottom" id="r1c2-t4">Swap Space</th>
</tr>
</thead>
<tbody>
<tr align="left" valign="top">
<td align="left" id="r2c1-t4" headers="r1c1-t4">Between 1 GB and 2 GB</td>
<td align="left" headers="r2c1-t4 r1c2-t4">1.5 times the size of RAM</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r3c1-t4" headers="r1c1-t4">Between 2 GB and 16 GB</td>
<td align="left" headers="r3c1-t4 r1c2-t4">Equal to the size of RAM</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r4c1-t4" headers="r1c1-t4">More than 16 GB</td>
<td align="left" headers="r4c1-t4 r1c2-t4">16 GB</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" --></li>
</ul>
<p><span class="bold">On Linux x86-64 and IBM: Linux on System z</span>:</p>
<ul>
<li>
<p>At least 4 GB of RAM (for Oracle Grid Infrastructure for a Standalone Server installations, including installations where you plan to install Oracle Database).</p>
<p>To determine the RAM size, enter the following command:</p>
<pre xml:space="preserve" class="oac_no_warn"># grep MemTotal /proc/meminfo
</pre>
<p>If the size of the RAM is less than the required size, then you must install more memory before continuing.</p>
</li>
<li>
<p>The following table describes the relationship between installed RAM and the configured swap space requirement:</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
On Linux, the HugePages feature allocates non-swappable memory for large page tables using memory-mapped files. If you enable HugePages, then you should deduct the memory allocated to HugePages from the available RAM before calculating swap space.</div>
<div class="inftblinformal">
<table class="Informal" title="swap" summary="Swap space requirements" dir="ltr" border="1" width="100%" frame="hsides" rules="groups" cellpadding="3" cellspacing="0">
<col width="48%" />
<col width="*" />
<thead>
<tr align="left" valign="top">
<th align="left" valign="bottom" id="r1c1-t6">RAM</th>
<th align="left" valign="bottom" id="r1c2-t6">Swap Space</th>
</tr>
</thead>
<tbody>
<tr align="left" valign="top">
<td align="left" id="r2c1-t6" headers="r1c1-t6">Between 4 GB and 8 GB</td>
<td align="left" headers="r2c1-t6 r1c2-t6">2 times the size of RAM</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r3c1-t6" headers="r1c1-t6">Between 8 GB and 32 GB</td>
<td align="left" headers="r3c1-t6 r1c2-t6">1.5 times the size of RAM</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r4c1-t6" headers="r1c1-t6">More than 32 GB</td>
<td align="left" headers="r4c1-t6 r1c2-t6">32 GB</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" --></li>
</ul>
<p>If the size of the RAM is less than the required size, then you must install more memory before continuing.</p>
<p>To determine the size of the configured swap space, enter the following command:</p>
<pre xml:space="preserve" class="oac_no_warn"># grep SwapTotal /proc/meminfo
</pre>
<p><a id="sthref428" name="sthref428"></a>If necessary, refer to the operating system documentation for information about how to configure additional swap space.</p>
<p><a id="sthref429" name="sthref429"></a><a id="sthref430" name="sthref430"></a>To determine the available RAM and swap space, enter the following command:</p>
<pre xml:space="preserve" class="oac_no_warn"># free
</pre>
<div class="infoboxnote">
<p class="notep1">Note:</p>
Oracle recommends that you take multiple values for the available RAM and swap space before finalizing a value. This is because the available RAM and swap space keep changing depending on the user interactions with the computer.</div>
</div>
<!-- class="sect2" -->
<a id="CHDIFGAD" name="CHDIFGAD"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">3.1.2</span> Disk Space Requirements</h3>
<p>The following are the disk space requirements for installing Oracle Grid Infrastructure:</p>
<ul>
<li>
<p>At least 2.3 GB of disk space.</p>
</li>
<li>
<p>At least 1 GB of space in the <code>/tmp</code> directory.</p>
</li>
</ul>
<p>To determine the amount of free space available in the <code>/tmp</code> directory, enter the following command:</p>
<pre xml:space="preserve" class="oac_no_warn"># df -k /tmp
</pre>
<p><a id="sthref431" name="sthref431"></a><a id="sthref432" name="sthref432"></a><a id="sthref433" name="sthref433"></a>If there is less than 1 GB of free space available in the <code>/tmp</code> directory, then complete one of the following steps:</p>
<ul>
<li>
<p>Delete unnecessary files from the <code>/tmp</code> directory to meet the disk space requirement.</p>
</li>
<li>
<p>Set the <code>TMP</code> and <code>TMPDIR</code> environment variables to specify a temporary directory when setting the <code>oracle</code> user's environment.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="pre_install.htm#i1011717">"Configuring the oracle User's Environment"</a> for more information about setting <code>TMP</code> and <code>TMPDIR</code></div>
</li>
<li>
<p>Extend the file system that contains the <code>/tmp</code> directory. If necessary, contact the system administrator for information about extending file systems.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="BABIEBHH" name="BABIEBHH"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">3.1.3</span> Configuring the User's Environment</h3>
<p>Complete the following tasks to set the Oracle Grid Infrastructure software owner user's environment:</p>
<ul>
<li>
<p>Review the information in <a href="pre_install.htm#BABIBGFA">"Logging In to the System as root"</a> section.</p>
</li>
<li>
<p>Ensure that you set the path to the Oracle base directory. Oracle Restart and Oracle Database reside under the same Oracle base. For example:</p>
<pre xml:space="preserve" class="oac_no_warn"># ORACLE_BASE=/u01/app/oracle; 
# export ORACLE_BASE
</pre></li>
<li>
<p>Set the Oracle Grid Infrastructure software owner user default file mode creation mask (<code>umask</code>) to 022 in the shell startup file. Setting the mask to 022 ensures that the user performing the software installation creates files with 755 permissions.</p>
</li>
<li>
<p>Set <code>ulimit</code> settings for file descriptors and processes for the Oracle Grid Infrastructure installation software owner.</p>
</li>
<li>
<p>Set the <code>DISPLAY</code> environment variable in preparation for installation.</p>
</li>
</ul>
<p>If you plan to install Oracle Database, then you must meet additional preinstallation requirements. See <a href="pre_install.htm#BABFDGHJ">Chapter 2, " Oracle Database Preinstallation Requirements"</a>.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BGBGEDGA" name="BGBGEDGA"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">3.2</span> <a id="sthref434" name="sthref434"></a><a id="sthref435" name="sthref435"></a><a id="sthref436" name="sthref436"></a><a id="sthref437" name="sthref437"></a><a id="sthref438" name="sthref438"></a><a id="sthref439" name="sthref439"></a><a id="sthref440" name="sthref440"></a><a id="sthref441" name="sthref441"></a><a id="sthref442" name="sthref442"></a>Oracle ACFS and Oracle ADVM Support</h2>
<p>Oracle Automatic Storage Management Cluster File System (Oracle ACFS) extends Oracle ASM technology to support of all of your application data in both single instance and cluster configurations. Oracle Automatic Storage Management Dynamic Volume Manager (Oracle ADVM) provides volume management services and a standard disk device driver interface to clients. Oracle Automatic Storage Management Cluster File System is layered on Oracle ASM through the Oracle Automatic Storage Management Dynamic Volume Manager interface.</p>
<p>Oracle Automatic Storage Management Cluster File System and Oracle Automatic Storage Management Dynamic Volume Manager are supported on Oracle Linux 5 and Red Hat Enterprise Linux 5 for Linux x86 and Linux x86-64. Starting with Oracle Database 11g Release 2 (11.2.0.2), it is also supported on SUSE Linux Enterprise Server 10 SP3 and later SUSE Linux Enterprise Server 10 Service Pack's for Linux x86-64 only.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
Oracle recommends that Oracle data files are installed in Oracle ASM disk groups. Installing Oracle data files on an Oracle ACFS file system is not supported. Oracle ACFS can be used as an option only when Oracle ASM is configured.</div>
<p>Automatic Storage Management Cluster File System (ACFS) resources are not supported for Oracle Restart configurations on all platforms. ACFS drivers must be manually unloaded and loaded; ACFS file systems must be manually unmounted and mounted (after the ASM instance is running); ACFS database home file systems can be placed into the ACFS mount registry to be mounted along with other registered ACFS file systems.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink LADBN" href="../../relnotes.112/e16778/toc.htm"><span class="italic">Oracle Database Release Notes for Linux</span></a> for latest information about supported platforms and releases</p>
</li>
<li>
<p><span class="italic"><a class="olink OSTMG" href="http://www.oracle.com/pls/db112/lookup?id=OSTMG">Oracle Automatic Storage Management Administrator's Guide</a></span> for more information about Oracle Automatic Storage Management Cluster File System and Oracle Automatic Storage Management Dynamic Volume Manager</p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="BABBHJAA" name="BABBHJAA"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">3.3</span> Managing Disk Groups for Older Database Versions</h2>
<p>Releases prior to Oracle Database 11<span class="italic">g</span> Release 2 used Database Configuration Assistant to perform administrative tasks on Oracle ASM. Starting with 11<span class="italic">g</span> Release 2, Oracle ASM is installed with Oracle Restart.</p>
</div>
<!-- class="sect1" -->
<a id="CFAGEIFE" name="CFAGEIFE"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">3.4</span> Migrating Existing Oracle Automatic Storage Management Instances</h2>
<p>If you have an Oracle ASM installation from a prior release installed on your server, or in an existing Oracle Grid Infrastructure installation, you can use Oracle Automatic Storage Management Configuration Assistant (Oracle ASMCA) to upgrade the existing Oracle ASM instance to 11<span class="italic">g</span> Release 2 (11.2), and subsequently configure disk groups, Oracle ASM volumes and Oracle ASM file systems.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
You must first shut down all databases and applications using an existing Oracle ASM instance before upgrading it.</div>
<p>During installation, if you chose to use Oracle ASM and Oracle ASMCA detects that there is a prior Oracle ASM version installed in another Oracle ASM home, then after installing the Oracle ASM 11<span class="italic">g</span> Release 2 (11.2) binaries, you can start Oracle ASMCA to upgrade the existing Oracle ASM instance.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>"<a class="olink OSTMG51100" href="http://www.oracle.com/pls/db112/lookup?id=OSTMG51100">Upgrading an Oracle ASM Instance with Oracle ASM Configuration Assistant</a>" in <a class="olink OSTMG" href="http://www.oracle.com/pls/db112/lookup?id=OSTMG"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span></a></p>
</li>
<li>
<p>"<a class="olink OSTMG13650" href="http://www.oracle.com/pls/db112/lookup?id=OSTMG13650">Upgrading an Oracle ASM Instance With Oracle Universal Installer</a>" in <a class="olink OSTMG" href="http://www.oracle.com/pls/db112/lookup?id=OSTMG"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="BABGDFIC" name="BABGDFIC"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">3.5</span> Oracle Automatic Storage Management Installation Considerations</h2>
<p>In previous releases, Oracle Automatic Storage Management (Oracle ASM) was installed as part of the Oracle Database installation. With Oracle Database 11<span class="italic">g</span> Release 2 (11.2), Oracle ASM is part of an Oracle Grid Infrastructure installation, either for a cluster, or for a standalone server.</p>
<p>If you want to upgrade an existing Oracle ASM installation, then you must upgrade Oracle ASM by running an Oracle Grid Infrastructure upgrade (upgrades of existing Oracle ASM installations). If you do not have Oracle ASM installed and you want to use Oracle ASM as your storage option, then you must complete an Oracle Grid Infrastructure installation before you start your Oracle Database installation.</p>
<p>You must run Oracle Automatic Storage Management Configuration Assistant (Oracle ASMCA) for installing and configuring Oracle ASM instances, disk groups, volumes, and Oracle Automatic Storage Management Cluster File System (Oracle ACFS). In addition, you can use the ASMCA command-line interface as a non-GUI utility.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Chapter 11, "Oracle ASM Configuration Assistant" in <a class="olink OSTMG" href="http://www.oracle.com/pls/db112/lookup?id=OSTMG"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span></a> for information about Oracle ASMCA</div>
<p><a id="sthref443" name="sthref443"></a>Apply the following guidelines when you install Oracle ASM:</p>
<ul>
<li>
<p>You must complete the steps listed under <a href="#CHDFDAIG">"Preparing Disks for an Oracle Automatic Storage Management Installation"</a> to prepare a disk partition to use for the Oracle ASM disk groups.</p>
</li>
<li>
<p>Ensure that at least one disk is configured appropriately for use in an Oracle ASM diskgroup before beginning the installation.</p>
</li>
<li>
<p>When you install Oracle ASM, Oracle Automatic Storage Management Configuration Assistant (Oracle ASMCA) creates a separate server parameter file (<a id="sthref444" name="sthref444"></a><a id="sthref445" name="sthref445"></a><a id="sthref446" name="sthref446"></a><code>SPFILE</code>) and <a id="sthref447" name="sthref447"></a><a id="sthref448" name="sthref448"></a>password file for the Oracle ASM instance. As soon as Oracle ASM is installed, the <code>ASMSNMP</code> schema and user are created. See <a class="olink OSTMG" href="http://www.oracle.com/pls/db112/lookup?id=OSTMG"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span></a> for more information.</p>
</li>
<li>
<p>The Oracle ASM instance that manages the existing disk group will be running in the Oracle Grid Infrastructure home directory.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="CHDFDAIG" name="CHDFDAIG"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">3.6</span> Preparing Disks for an Oracle Automatic Storage Management Installation</h2>
<p>This section describes how to configure disks for use with Oracle ASM. The following sections describe how to identify the requirements and configure the disks on each platform:</p>
<ul>
<li>
<p><a href="#CHDBJGEB">General Steps for Configuring Oracle Automatic Storage Management</a></p>
</li>
<li>
<p><a href="#CHDIDGBG">Step 1: Identifying Storage Requirements for Oracle Automatic Storage Management</a></p>
</li>
<li>
<p><a href="#CHDBHHEF">Step 2: Creating DAS or SAN Disk Partitions for Oracle Automatic Storage Management</a></p>
</li>
<li>
<p><a href="#CHDCCEDJ">Step 3: Configuring Disks for Oracle Automatic Storage Management</a></p>
</li>
</ul>
<div class="infoboxnote">
<p class="notep1">Note:</p>
Oracle does not recommend using identifiers for database object names that must be quoted. While these quoted identifiers may be valid as names in the <code>SQL CREATE</code> statement, such as <code>CREATE DISKGROUP</code> <code>"1data" ...</code>, the names may not be valid when using other tools that manage the database object.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
"<a class="olink OSTMG10206" href="http://www.oracle.com/pls/db112/lookup?id=OSTMG10206">Creating Disk Groups for a New Oracle Installation</a>", in <a class="olink OSTMG" href="http://www.oracle.com/pls/db112/lookup?id=OSTMG"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span></a> for information about creating and managing disk groups</div>
<a id="CHDBJGEB" name="CHDBJGEB"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">3.6.1</span> General Steps for Configuring Oracle Automatic Storage Management</h3>
<p><a id="ABC73594490" name="ABC73594490"></a><a id="ABC73594490SRI1" name="ABC73594490SRI1"></a><a id="ABC73594490SRI12" name="ABC73594490SRI12"></a>The following are the general steps to configure Oracle ASM:</p>
<ol>
<li>
<p>Identify the storage requirements of the site.</p>
</li>
<li>
<p>If you are creating a new Oracle ASM disk group, create partitions for DAS or SAN disks.</p>
</li>
<li>
<p>Configure the disks for use with Oracle ASM. You must provide the Oracle ASM disk configuration information during the Oracle Grid Infrastructure installation.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CHDIDGBG" name="CHDIDGBG"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">3.6.2</span> Step 1: Identifying Storage Requirements for Oracle Automatic Storage Management</h3>
<p>To identify the storage requirements for using Oracle ASM, you must determine the number of devices and the amount of free disk space that you require. To complete this task:</p>
<ol>
<li>
<p>Determine if you want to use Oracle ASM for Oracle Database files, recovery files, or both.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
You do not have to use the same storage mechanism for Oracle Database files and recovery files. You can use a file system for one file type and Oracle ASM for the other.
<p>If you choose to enable automated backups and you do not have a shared file system available, then you must choose Oracle ASM for recovery file storage.</p>
</div>
<p>During the database installation, if you plan to enable automated backups, then you can choose Oracle ASM as the storage mechanism for recovery files by specifying an Oracle ASM disk group for the fast recovery area. Depending on how you choose to create a database during the database installation, you have the following options:</p>
<ul>
<li>
<p>You can run Oracle ASMCA in interactive mode to create and configure the required disk groups.</p>
<p>During the database installation, if you select an installation method that runs Database Configuration Assistant in interactive mode (Advanced Installation type), then you can select the diskgroups that you created using Oracle ASMCA.</p>
<p>You have the option to use the disk groups you created using Oracle ASMCA both for database files and recovery files, or you can choose to use different disk groups for each file type. Ideally, you should create separate Oracle ASM disk groups for data files and for recovery files.</p>
</li>
<li>
<p>If you run Oracle ASMCA in noninteractive mode, then you must use the same Oracle ASM disk group for data files and recovery files. During the database installation (Typical Installation type), you will have to select the same disk group for both data files and recovery files.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>"Oracle ASM Configuration Assistant Command-Line Interface" section in <a class="olink OSTMG" href="http://www.oracle.com/pls/db112/lookup?id=OSTMG"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span></a></p>
</li>
<li>
<p><a href="post_inst_task.htm#BJFIFAIF">"Create a Fast Recovery Area Disk Group"</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Choose the Oracle ASM redundancy level that you want to use for each Oracle ASM disk group<a id="sthref449" name="sthref449"></a> that <a id="sthref450" name="sthref450"></a><a id="sthref451" name="sthref451"></a><a id="sthref452" name="sthref452"></a>you create.</p>
<p><a id="sthref453" name="sthref453"></a><a id="sthref454" name="sthref454"></a><a id="sthref455" name="sthref455"></a>The <a id="sthref456" name="sthref456"></a><a id="sthref457" name="sthref457"></a>redundancy level that you choose for the Oracle ASM disk group determines how Oracle ASM mirrors files in the disk group and determines the number of disks and amount of disk space that you require, as follows:<a id="sthref458" name="sthref458"></a><a id="sthref459" name="sthref459"></a></p>
<ul>
<li>
<p>External redundancy</p>
<p>This option does not allow Oracle ASM to mirror the contents of the disk group. Oracle recommends that you select this redundancy level either when the disk group contains devices, such as RAID devices, that provide their own data protection or when the database does not require an uninterrupted access to data.</p>
</li>
<li>
<p>Normal redundancy</p>
<p>To optimize performance and reliability in a normal redundancy disk group, Oracle ASM uses two-way mirroring for data files and three-way mirroring for control files, by default. In addition, you can choose the mirroring characteristics for individual files in a disk group. Alternatively, you can use two-way mirroring or no mirroring.</p>
<p>A normal redundancy disk group requires a minimum of two failure groups (or two disk devices) if you are using two-way mirroring. The effective disk space in a normal redundancy disk group is half the sum of the disk space in all of its devices.</p>
<p>For most installations, Oracle recommends that you use normal redundancy disk groups.</p>
</li>
<li>
<p>High redundancy</p>
<p>The contents of the disk group are three-way mirrored by default. To create a disk group with high redundancy, you must specify at least three failure groups (a minimum of 3 devices).</p>
<p>Although high-redundancy disk groups provide a high level of data protection, you must consider the higher cost of additional storage devices before deciding to use this redundancy level.</p>
</li>
</ul>
</li>
<li>
<p>Determine the total amount of disk space that you require for the database files <a id="sthref460" name="sthref460"></a><a id="sthref461" name="sthref461"></a>and recovery files.<a id="sthref462" name="sthref462"></a><a id="sthref463" name="sthref463"></a><a id="sthref464" name="sthref464"></a><a id="sthref465" name="sthref465"></a><a id="sthref466" name="sthref466"></a></p>
<p>If an Oracle ASM instance is already running on the system, then you can use an existing disk group to meet these storage requirements. If necessary, you can add disks to an existing disk group during the database installation.</p>
<p>Use the following table to determine the minimum number of disks and the minimum disk space requirements for the <a id="sthref467" name="sthref467"></a><a id="sthref468" name="sthref468"></a>installation:<a id="sthref469" name="sthref469"></a><a id="sthref470" name="sthref470"></a><a id="sthref471" name="sthref471"></a><a id="sthref472" name="sthref472"></a></p>
<div class="inftblinformal">
<table class="Informal" title="Disk Space Calculation Table" summary="This table provides information to help you determine the disk space requirements." dir="ltr" border="1" width="100%" frame="hsides" rules="groups" cellpadding="3" cellspacing="0">
<col width="21%" />
<col width="*" />
<col width="18%" />
<col width="18%" />
<col width="19%" />
<thead>
<tr align="left" valign="top">
<th align="left" valign="bottom" id="r1c1-t18">Redundancy Level</th>
<th align="left" valign="bottom" id="r1c2-t18">Minimum Number of Disks</th>
<th align="left" valign="bottom" id="r1c3-t18">Data Files</th>
<th align="left" valign="bottom" id="r1c4-t18">Recovery Files</th>
<th align="left" valign="bottom" id="r1c5-t18">Both File Types</th>
</tr>
</thead>
<tbody>
<tr align="left" valign="top">
<td align="left" id="r2c1-t18" headers="r1c1-t18">External</td>
<td align="left" headers="r2c1-t18 r1c2-t18">1</td>
<td align="left" headers="r2c1-t18 r1c3-t18">1.8 GB</td>
<td align="left" headers="r2c1-t18 r1c4-t18">3.6 GB</td>
<td align="left" headers="r2c1-t18 r1c5-t18">5.4 GB</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r3c1-t18" headers="r1c1-t18">Normal</td>
<td align="left" headers="r3c1-t18 r1c2-t18">2</td>
<td align="left" headers="r3c1-t18 r1c3-t18">3.6 GB</td>
<td align="left" headers="r3c1-t18 r1c4-t18">7.2 GB</td>
<td align="left" headers="r3c1-t18 r1c5-t18">10.8 GB</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r4c1-t18" headers="r1c1-t18">High</td>
<td align="left" headers="r4c1-t18 r1c2-t18">3</td>
<td align="left" headers="r4c1-t18 r1c3-t18">5.4 GB</td>
<td align="left" headers="r4c1-t18 r1c4-t18">10.8 GB</td>
<td align="left" headers="r4c1-t18 r1c5-t18">16.2 GB</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" --></li>
<li>
<p>Optionally, identify failure groups for the Oracle ASM disk group devices.<a id="sthref473" name="sthref473"></a><a id="sthref474" name="sthref474"></a><a id="sthref475" name="sthref475"></a></p>
<p><a id="sthref476" name="sthref476"></a><a id="sthref477" name="sthref477"></a><a id="sthref478" name="sthref478"></a><a id="sthref479" name="sthref479"></a><a id="sthref480" name="sthref480"></a>If <a id="sthref481" name="sthref481"></a><a id="sthref482" name="sthref482"></a><a id="sthref483" name="sthref483"></a>you intend to use a normal or high redundancy disk group, then you can further protect the database against hardware failure by associating a set of disk devices in a custom failure group. By default, each device comprises its failure group. However, if two disk devices in a normal redundancy disk group are attached to the same SCSI controller, then the disk group becomes unavailable if the controller fails. The controller in this example is a single point of failure.</p>
<p>For instance, to avoid failures of this type, you can use two SCSI controllers, each with two disks, and define a failure group for the disks attached to each controller. This configuration would enable the disk group to tolerate the failure of one SCSI controller.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
If you define custom failure groups, then you must specify a minimum of two failure groups for normal redundancy disk groups and three failure groups for high redundancy disk groups.</div>
</li>
<li>
<p>If you are sure that a suitable disk group does not exist on the system, then install or identify appropriate disk devices to add to a new disk group. Apply the following guidelines when identifying appropriate disk devices:</p>
<ul>
<li>
<p>The disk devices must be owned by the user performing the grid installation.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="pre_install.htm#BABJFCJF">Example 2-2, "Example of a Rules File With User grid"</a> for information about creating or modifying permissions</div>
</li>
<li>
<p>All the devices in an Oracle ASM disk group should be the same size and have the same performance characteristics.</p>
</li>
<li>
<p>Do not specify multiple partitions on a single physical disk as a disk group device. Oracle ASM expects each disk group device to be on a separate physical disk.</p>
</li>
<li>
<p>Oracle does not recommend the use of a logical volume as a device in Oracle ASM because the logical volume can hide the physical disk architecture which prevents Oracle ASM from optimizing I/O across physical devices.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDCCEDJ">"Step 3: Configuring Disks for Oracle Automatic Storage Management"</a> for information about completing this task</p>
</li>
<li>
<p>"<a class="olink OSTMG11000" href="http://www.oracle.com/pls/db112/lookup?id=OSTMG11000">Preparing Storage for ASM</a>" in <a class="olink OSTMG" href="http://www.oracle.com/pls/db112/lookup?id=OSTMG"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span></a> for information about configuring Oracle ASM disk groups</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CHDBHHEF" name="CHDBHHEF"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">3.6.3</span> Step 2: Creating DAS or SAN Disk Partitions for Oracle Automatic Storage Management</h3>
<p><a id="sthref484" name="sthref484"></a><a id="sthref485" name="sthref485"></a><a id="sthref486" name="sthref486"></a>In order to <a id="sthref487" name="sthref487"></a><a id="sthref488" name="sthref488"></a><a id="sthref489" name="sthref489"></a><a id="sthref490" name="sthref490"></a>use a DAS or SAN disk in Oracle ASM, the disk must have a partition table. Oracle recommends creating exactly one partition for each disk containing the entire disk.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
Y<a id="sthref491" name="sthref491"></a><a id="sthref492" name="sthref492"></a>ou can use any physical disk for Oracle ASM, as long as it is partitioned.</div>
</div>
<!-- class="sect2" -->
<a id="CHDCCEDJ" name="CHDCCEDJ"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">3.6.4</span> Step 3: Configuring Disks for Oracle Automatic Storage Management<a id="sthref493" name="sthref493"></a></h3>
<p>Oracle provides an Oracle ASM library driver that you can use to simplify the configuration and management of the disk devices that you want to use with Oracle ASM. A disk that is configured for Oracle ASM is known as a candidate disk.</p>
<p>If you intend to use Oracle ASM for database storage, then Oracle recommends that you install the Automatic Storage Management library driver (ASMLIB) and associated utilities and use them to configure the devices that you want to include in an Oracle ASM disk group.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
If you choose to configure disks using the Oracle Automatic Storage Management library driver, then you must change the default disk discovery string to <code>ORCLDISK:*</code>. If the diskstring is set to <code>ORCLDISK:*</code>, or is left empty (""), then the installer discovers these disks.</div>
<p>This section describes how to configure storage for use with Oracle ASM.</p>
<ul>
<li>
<p><a href="#CHDFEDHB">Configuring Disks for Oracle Automatic Storage Management Using the Automatic Storage Management Library Driver (ASMLIB)</a></p>
</li>
<li>
<p><a href="#BABEAEDB">Configuring Disk Devices Manually for Oracle Automatic Storage Management</a></p>
</li>
</ul>
<a id="CHDFEDHB" name="CHDFEDHB"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">3.6.4.1</span> Configuring Disks for Oracle Automatic Storage Management Using the Automatic Storage Management Library Driver (ASMLIB)</h4>
<p>To use the Automatic Storage Management library driver to configure Automatic Storage Management devices, complete the following tasks:</p>
<ul>
<li>
<p><a href="#CHDHFFEJ">Installing and Configuring the Automatic Storage Management Library Driver Software</a></p>
</li>
<li>
<p><a href="#CHDIAECD">Configuring the Disk Devices to Use the Automatic Storage Management Library Driver</a></p>
</li>
<li>
<p><a href="#CHDHAHCB">Administering the Automatic Storage Management Library Driver and Disks</a></p>
</li>
</ul>
<p class="subhead2"><a id="CHDHFFEJ" name="CHDHFFEJ"></a>Installing and Configuring the Automatic Storage Management Library Driver Software</p>
<p>To install and configure the Automatic Storage Management library driver software:</p>
<ol>
<li>
<p>Enter the following command to determine the kernel version and architecture of the system:</p>
<pre xml:space="preserve" class="oac_no_warn"># uname -rm
</pre></li>
<li>
<p>If necessary, download the required Automatic Storage Management library driver packages from the Oracle Technology Network Web site:</p>
<pre xml:space="preserve" class="oac_no_warn"><a href="http://www.oracle.com/technology/tech/linux/asmlib/index.html">http://www.oracle.com/technology/tech/linux/asmlib/index.html</a>
</pre>
<p>You must install the following packages, where <code><span class="codeinlineitalic">version</span></code> is the version of the Automatic Storage Management library driver, <code><span class="codeinlineitalic">arch</span></code> is the system architecture, and <code><span class="codeinlineitalic">kernel</span></code> is the version of the kernel that you are using:</p>
<pre xml:space="preserve" class="oac_no_warn">oracleasm-support-<span class="italic">version</span>.<span class="italic">arch</span>.rpm
oracleasm-<span class="italic">kernel</span>-<span class="italic">version</span>.<span class="italic">arch</span>.rpm
oracleasmlib-<span class="italic">version</span>.<span class="italic">arch</span>.rpm
</pre></li>
<li>
<p>Enter a command similar to the following to install the packages:</p>
<pre xml:space="preserve" class="oac_no_warn"># sudo rpm -Uvh oracleasm-support-<span class="italic">version</span>.<span class="italic">arch</span>.rpm \
           oracleasm-<span class="italic">kernel</span>-<span class="italic">version</span>.<span class="italic">arch</span>.rpm \
           oracleasmlib-<span class="italic">version</span>.<span class="italic">arch</span>.rpm
</pre>
<p>For example, if you are using the Red Hat Enterprise Linux AS 3.0 enterprise kernel on an x86 system, then enter a command similar to the following:</p>
<pre xml:space="preserve" class="oac_no_warn"># sudo rpm -Uvh oracleasm-support-1.0.0-1.i386.rpm \
           oracleasm-2.4.9-e-enterprise-1.0.0-1.i686.rpm \
           oracleasmlib-1.0.0-1.i386.rpm
</pre></li>
<li>
<p>Enter a command similar to the following to determine the UID of the Oracle software owner user that you are using for this installation and the GID of the OSASM group:</p>
<pre xml:space="preserve" class="oac_no_warn"># id oracle
</pre></li>
<li>
<p>Enter the following command to run the <code>oracleasm</code> initialization script with the <code>configure</code> option:</p>
<pre xml:space="preserve" class="oac_no_warn"># /etc/init.d/oracleasm configure
</pre></li>
<li>
<p>Enter the following information in response to the prompts that the script displays:</p>
<div class="inftblinformal">
<table class="Informal" title="Initialization Script Prompts" summary="This table lists the inititialization script prompts and the suggested responses." dir="ltr" border="1" width="100%" frame="hsides" rules="groups" cellpadding="3" cellspacing="0">
<col width="*" />
<col width="47%" />
<thead>
<tr align="left" valign="top">
<th align="left" valign="bottom" id="r1c1-t24">Prompt</th>
<th align="left" valign="bottom" id="r1c2-t24">Suggested Response</th>
</tr>
</thead>
<tbody>
<tr align="left" valign="top">
<td align="left" id="r2c1-t24" headers="r1c1-t24">Default UID to own the driver interface:</td>
<td align="left" headers="r2c1-t24 r1c2-t24">Specify the UID of the Oracle Grid Infrastructure owner user (typically, <code>grid</code>).</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r3c1-t24" headers="r1c1-t24">Default GID to own the driver interface:</td>
<td align="left" headers="r3c1-t24 r1c2-t24">Specify the GID of the OSASM group (typically, <code>asmadmin</code>).</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r4c1-t24" headers="r1c1-t24">Start Oracle Automatic Storage Management Library driver on start (y/n):</td>
<td align="left" headers="r4c1-t24 r1c2-t24">Enter <code>y</code> to start the Oracle Automatic Storage Management library driver when the system starts.</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r5c1-t24" headers="r1c1-t24">Scan for Oracle ASM disks on boot (y/n):</td>
<td align="left" headers="r5c1-t24 r1c2-t24">Enter <code>y</code> to scan for presence of any Oracle Automatic Storage Management disks when the system starts.</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" --></li>
</ol>
<p class="subhead2"><a id="CHDIAECD" name="CHDIAECD"></a>Configuring the Disk Devices to Use the Automatic Storage Management Library Driver</p>
<p>To configure the disk devices that you want to use in an Automatic Storage Management disk group:</p>
<ol>
<li>
<p>If you intend to use IDE, SCSI, or RAID devices in the Automatic Storage Management disk group, then:</p>
<ol>
<li>
<p>If necessary, install or configure the disk devices that you intend to use for the disk group and restart the system.</p>
</li>
<li>
<p>To identify the device name for the disks that you want to use, enter the following command:<a id="sthref494" name="sthref494"></a><a id="sthref495" name="sthref495"></a><a id="sthref496" name="sthref496"></a><a id="sthref497" name="sthref497"></a><a id="sthref498" name="sthref498"></a><a id="sthref499" name="sthref499"></a><a id="sthref500" name="sthref500"></a><a id="sthref501" name="sthref501"></a></p>
<pre xml:space="preserve" class="oac_no_warn"># /sbin/fdisk -l
</pre>
<p>Depending on the type of disk, the device name can vary:<a id="sthref502" name="sthref502"></a><a id="sthref503" name="sthref503"></a></p>
<div class="inftblhruleinformal">
<table class="HRuleInformal" title="Disk Device Name Formats on Linux" summary="This table shows the format of Linux disk device names" dir="ltr" border="1" width="100%" frame="hsides" rules="rows" cellpadding="3" cellspacing="0">
<col width="20%" />
<col width="24%" />
<col width="*" />
<thead>
<tr align="left" valign="top">
<th align="left" valign="bottom" id="r1c1-t25">Disk Type</th>
<th align="left" valign="bottom" id="r1c2-t25">Device Name Format</th>
<th align="left" valign="bottom" id="r1c3-t25">Description</th>
</tr>
</thead>
<tbody>
<tr align="left" valign="top">
<td align="left" id="r2c1-t25" headers="r1c1-t25"><a id="sthref504" name="sthref504"></a><a id="sthref505" name="sthref505"></a>IDE disk</td>
<td align="left" headers="r2c1-t25 r1c2-t25">
<pre xml:space="preserve" class="oac_no_warn">/dev/hd<span class="italic">xn</span>
</pre></td>
<td align="left" headers="r2c1-t25 r1c3-t25">In this example, <code><span class="codeinlineitalic">x</span></code> is a letter that identifies the IDE disk and <code><span class="codeinlineitalic">n</span></code> is the partition number. For example, <code>/dev/hda</code> is the first disk on the first IDE bus.</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r3c1-t25" headers="r1c1-t25"><a id="sthref506" name="sthref506"></a><a id="sthref507" name="sthref507"></a>SCSI disk</td>
<td align="left" headers="r3c1-t25 r1c2-t25">
<pre xml:space="preserve" class="oac_no_warn">/dev/sd<span class="italic">xn</span>
</pre></td>
<td align="left" headers="r3c1-t25 r1c3-t25">In this example, <code><span class="codeinlineitalic">x</span></code> is a letter that identifies the SCSI disk and <code><span class="codeinlineitalic">n</span></code> is the partition number. For example, <code>/dev/sda</code> is the first disk on the first SCSI bus.</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r4c1-t25" headers="r1c1-t25"><a id="sthref508" name="sthref508"></a><a id="sthref509" name="sthref509"></a>RAID disk</td>
<td align="left" headers="r4c1-t25 r1c2-t25">
<pre xml:space="preserve" class="oac_no_warn">/dev/rd/c<span class="italic">x</span>d<span class="italic">y</span>p<span class="italic">z</span>
/dev/ida/c<span class="italic">x</span>d<span class="italic">y</span>p<span class="italic">z</span>
</pre></td>
<td align="left" headers="r4c1-t25 r1c3-t25">Depending on the RAID controller, RAID devices can have different device names. In the examples shown, <code><span class="codeinlineitalic">x</span></code> is a number that identifies the controller, <code><span class="codeinlineitalic">y</span></code> is a number that identifies the disk, and <code><span class="codeinlineitalic">z</span></code> is a number that identifies the partition. For example, <code>/dev/ida/c0d1</code> is the second logical drive on the first controller.</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblhruleinformal" -->
<div class="infoboxnote">
<p class="notep1">Note:</p>
Oracle recommends that you create a single whole-disk partition on each disk that you want to use.</div>
</li>
<li>
<p>Use either <code>fdisk</code> or <code>parted</code> to create a single whole-disk partition on the disk devices that you want to use.</p>
</li>
</ol>
</li>
<li>
<p>Enter a command similar to the following to mark a disk as an Automatic Storage Management disk:</p>
<pre xml:space="preserve" class="oac_no_warn"># /etc/init.d/oracleasm createdisk DISK1 /dev/sdb1
</pre>
<p>In this example, <code>DISK1</code> is a name that you want to assign to the disk.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
<ul>
<li>
<p>If you are using a multipathing disk driver with Automatic Storage Management, then ensure that you specify the correct logical device name for the disk.</p>
<p>The disk names that you specify can contain uppercase letters, numbers, and the underscore character. They must start with an uppercase letter.</p>
</li>
<li>
<p>To create a database during the installation using the Automatic Storage Management library driver, you must change the default disk discovery string to <code>ORCLDISK:*</code>.</p>
</li>
</ul>
</div>
</li>
</ol>
<p class="subhead2"><a id="CHDHAHCB" name="CHDHAHCB"></a>Administering the Automatic Storage Management Library Driver and Disks</p>
<p>To administer the Automatic Storage Management library driver and disks, use the <code>oracleasm</code> initialization script with different options, as follows:</p>
<div class="inftblhruleinformal">
<table class="HRuleInformal" title="oracleasm script options" summary="This table lists the options available with the oracleasm script" dir="ltr" border="1" width="100%" frame="hsides" rules="rows" cellpadding="3" cellspacing="0">
<col width="22%" />
<col width="*" />
<thead>
<tr align="left" valign="top">
<th align="left" valign="bottom" id="r1c1-t28">Option</th>
<th align="left" valign="bottom" id="r1c2-t28">Description</th>
</tr>
</thead>
<tbody>
<tr align="left" valign="top">
<td align="left" id="r2c1-t28" headers="r1c1-t28">
<pre xml:space="preserve" class="oac_no_warn">configure
</pre></td>
<td align="left" headers="r2c1-t28 r1c2-t28">Use the <code>configure</code> option to reconfigure the Automatic Storage Management library driver, if necessary:
<pre xml:space="preserve" class="oac_no_warn"># /etc/init.d/oracleasm configure
</pre></td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r3c1-t28" headers="r1c1-t28">
<pre xml:space="preserve" class="oac_no_warn">enable
disable
</pre></td>
<td align="left" headers="r3c1-t28 r1c2-t28">Use the <code>disable</code> and <code>enable</code> options to change the behavior of the Automatic Storage Management library driver when the system starts. The <code>enable</code> option causes the Automatic Storage Management library driver to load when the system starts:
<pre xml:space="preserve" class="oac_no_warn"># /etc/init.d/oracleasm enable
</pre></td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r4c1-t28" headers="r1c1-t28">
<pre xml:space="preserve" class="oac_no_warn">start
stop
restart
</pre></td>
<td align="left" headers="r4c1-t28 r1c2-t28">Use the <code>start</code>, <code>stop</code>, and <code>restart</code> options to load or unload the Automatic Storage Management library driver without restarting the system:
<pre xml:space="preserve" class="oac_no_warn"># /etc/init.d/oracleasm restart
</pre></td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r5c1-t28" headers="r1c1-t28">
<pre xml:space="preserve" class="oac_no_warn">createdisk
</pre></td>
<td align="left" headers="r5c1-t28 r1c2-t28">Use the <code>createdisk</code> option to mark a disk device for use with the Automatic Storage Management library driver and give it a name:
<pre xml:space="preserve" class="oac_no_warn"># /etc/init.d/oracleasm createdisk <span class="italic">DISKNAME</span> <span class="italic">devicename</span>
</pre></td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r6c1-t28" headers="r1c1-t28">
<pre xml:space="preserve" class="oac_no_warn">deletedisk
</pre></td>
<td align="left" headers="r6c1-t28 r1c2-t28">Use the <code>deletedisk</code> option to unmark a named disk device:
<pre xml:space="preserve" class="oac_no_warn"># /etc/init.d/oracleasm deletedisk <span class="italic">DISKNAME</span>
</pre>
<p><span class="bold">Note:</span> Do not use this command to unmark disks that are being used by an Automatic Storage Management disk group. You must drop the disk from the Automatic Storage Management disk group before you unmark it.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r7c1-t28" headers="r1c1-t28">
<pre xml:space="preserve" class="oac_no_warn">querydisk
</pre></td>
<td align="left" headers="r7c1-t28 r1c2-t28">Use the <code>querydisk</code> option to determine if a disk device or disk name is being used by the Automatic Storage Management library driver:
<pre xml:space="preserve" class="oac_no_warn"># /etc/init.d/oracleasm querydisk {<span class="italic">DISKNAME </span>| <span class="italic">devicename</span>}
</pre></td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r8c1-t28" headers="r1c1-t28">
<pre xml:space="preserve" class="oac_no_warn">listdisks
</pre></td>
<td align="left" headers="r8c1-t28 r1c2-t28">Use the <code>listdisks</code> option to list the disk names of marked Automatic Storage Management library driver disks:
<pre xml:space="preserve" class="oac_no_warn"># /etc/init.d/oracleasm listdisks
</pre></td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r9c1-t28" headers="r1c1-t28">
<pre xml:space="preserve" class="oac_no_warn">scandisks
</pre></td>
<td align="left" headers="r9c1-t28 r1c2-t28">Use the <code>scandisks</code> option to enable cluster nodes to identify which shared disks have been marked as Automatic Storage Management library driver disks on another node:
<pre xml:space="preserve" class="oac_no_warn"># /etc/init.d/oracleasm scandisks
</pre></td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="sect3" -->
<a id="BABEAEDB" name="BABEAEDB"></a>
<div class="sect3">
<h4 class="sect3"><span class="secnum">3.6.4.2</span> Configuring Disk Devices Manually for Oracle Automatic Storage Management<a id="sthref510" name="sthref510"></a><a id="sthref511" name="sthref511"></a></h4>
<p>By default, the 2.6 kernel device file naming scheme <code>udev</code> dynamically creates device file names when the server is started, and assigns ownership of them to <code>root</code>. If <code>udev</code> applies default settings, then it changes device file names and owners for the disks, corrupting them when Oracle Storage Management instance is restarted. If you use ASMLIB, then you do not need to ensure permissions and device path persistency in udev.</p>
<p>If you do not use ASMLIB, then you must create a custom rules file. When <code>udev</code> is started, it sequentially carries out rules (configuration directives) defined in rules files. These files are in the path <code>/etc/udev/rules.d/</code>. Rules files are read in lexical order. For example, rules in the file <code>10-wacom.rules</code> are parsed and carried out before rules in the rules file <code>90-ib.rules</code>.</p>
<p>Where rules files describe the same devices, on Asianux, Red Hat, and Oracle Linux, the last file read is the one that is applied. On SUSE 2.6 kernels, the first file read is the one that is applied.</p>
<p>To configure a permissions file for disk devices, complete the following tasks:</p>
<ol>
<li>
<p>Configure SCSI devices as trusted devices (white listed), by editing the <code>/etc/scsi_id.config</code> file and adding "options=-g" to the file. For example:</p>
<pre xml:space="preserve" class="oac_no_warn"># cat &gt; /etc/scsi_id.config
vendor="ATA",options=-p 0x80
options=-g
</pre></li>
<li>
<p>Using a text editor, create a UDEV rules file for the Oracle ASM devices, setting permissions to 0660 for the installation owner and the group whose members are administrators of the grid infrastructure software. For example, using the installation owner <code>grid</code> and using a role-based group configuration, with the OSASM group <code>asmadmin</code>:</p>
<pre xml:space="preserve" class="oac_no_warn"># vi /etc/udev/rules.d/99-oracle-asmdevices.rules

KERNEL=="sd?1", BUS=="scsi", PROGRAM=="/sbin/scsi_id",
RESULT=="14f70656e66696c00000000", OWNER="grid", GROUP="asmadmin", MODE="0660"
KERNEL=="sd?2", BUS=="scsi", PROGRAM=="/sbin/scsi_id",
RESULT=="14f70656e66696c00000000", OWNER="grid", GROUP="asmadmin", MODE="0660"
KERNEL=="sd?3", BUS=="scsi", PROGRAM=="/sbin/scsi_id",
RESULT=="14f70656e66696c00000000", OWNER="grid", GROUP="asmadmin", MODE="0660"
</pre></li>
<li>
<p>Load updated block device partition tables on the server, using <code>/sbin/partprobe</code> <code><span class="codeinlineitalic">devicename</span></code>.<a id="sthref512" name="sthref512"></a> You must do this as <code>root</code>.</p>
</li>
<li>
<p>Enter the command to restart the UDEV service.</p>
<p>On Asianux, OEL5, and RHEL5, the commands are:</p>
<pre xml:space="preserve" class="oac_no_warn"># /sbin/udevcontrol reload_rules
# /sbin/start_udev
</pre>
<p>On SUSE 10 and 11, the command is:</p>
<pre xml:space="preserve" class="oac_no_warn"># /etc/init.d boot.udev restart
</pre>
<p>Check to ensure that your system is configured correctly.</p>
</li>
</ol>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHECGII" name="CIHECGII"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">3.7</span> Installing Oracle Grid Infrastructure Using a Software-Only Installation</h2>
<p>A software-only installation only copies the Oracle Grid Infrastructure for a Standalone Server binaries to the specified location. Configuring Oracle Grid Infrastructure for a standalone server and Oracle ASM must be done manually after the installation has finished.</p>
<p>When you perform a software-only installation of Oracle Grid Infrastructure software, you must complete a few manual configuration steps to enable Oracle Restart after you install the software.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
<a id="sthref513" name="sthref513"></a>Oracle recommends that only advanced users perform the software-only installation, because this installation method provides no validation of the installation and this installation option requires manual postinstallation steps to enable the Oracle Grid Infrastructure software.</div>
<p>Performing a software-only installation involves the following steps:</p>
<ol>
<li>
<p><a href="#CIHIHCCD">Installing the Software Binaries</a></p>
</li>
<li>
<p><a href="#CIHGFBCJ">Configuring the Software Binaries</a></p>
</li>
</ol>
<a id="CIHIHCCD" name="CIHIHCCD"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">3.7.1</span> Installing the Software Binaries</h3>
<ol>
<li>
<p><a id="sthref514" name="sthref514"></a>Start the <code>runInstaller</code> command from the relevant directory on the Oracle Database 11<span class="italic">g</span> release 2 (11.2) installation media or download directory.</p>
</li>
<li>
<p>Complete a software-only installation of Oracle Grid Infrastructure.</p>
<p>See <a href="#CIHGFBCJ">"Configuring the Software Binaries"</a> for information about configuring Oracle Grid Infrastructure after performing a software-only installation.</p>
</li>
<li>
<p>V<a id="sthref515" name="sthref515"></a>erify that the server meets the installation requirements using the command <code>runcluvfy.bat stage -pre</code> <code>hacfg</code>. Ensure that you have completed all storage and server preinstallation requirements.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CIHGFBCJ" name="CIHGFBCJ"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">3.7.2</span> Configuring the Software Binaries</h3>
<p>To configure and activate a software-only Oracle Grid Infrastructure installation for Oracle Restart, complete the following tasks:</p>
<ol>
<li>
<p>Run the <code>roothas.pl</code> script from <code><span class="codeinlineitalic">Grid_home</span></code>, using the following syntax:</p>
<pre xml:space="preserve" class="oac_no_warn"><span class="italic">Grid_home</span>/perl/bin/perl -I Grid_home/perl/lib -I Grid_home/crs/install 
<span class="italic">Grid_home</span>/crs/install/roothas.pl
</pre>
<p>For example, if your Grid home is <code>/app/11.2.0/grid</code>, then run the following script:</p>
<pre xml:space="preserve" class="oac_no_warn">$ /app/11.2.0/grid/perl/bin/perl -I /app/11.2.0/grid/perl/lib -I /app
/11.2.0/grid/crs/install /app/11.2.0/grid/crs/install/roothas.pl
</pre></li>
<li>
<p>Change the directory to <code><span class="codeinlineitalic">Grid_home/</span></code><code>oui/bin</code>, where <code><span class="codeinlineitalic">Grid_home</span></code> is the path of the Oracle Grid Infrastructure home.</p>
</li>
<li>
<p>Enter the following command:</p>
<pre xml:space="preserve" class="oac_no_warn">./runInstaller -updateNodeList ORACLE_HOME=<span class="codeinlineitalic">Grid_home</span> -defaultHomeName
</pre>
<p>For example:</p>
<pre xml:space="preserve" class="oac_no_warn">$ ./runInstaller -updateNodeList ORACLE_HOME=/u01/app/11.2.0/grid
-defaultHomeName
CLUSTER_NODES= CRS=TRUE
</pre></li>
<li>
<p>Use the <code>SRVCTL</code> utility along with Network Configuration Assistant and Oracle ASMCA to add the listener, the Oracle ASM instance, and all Oracle ASM disk groups to the Oracle Restart configuration.</p>
</li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABHEBIG" name="BABHEBIG"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">3.8</span> Installing and Configuring Oracle Grid Infrastructure for a Standalone Server</h2>
<p>If you install Oracle Grid Infrastructure and then create your database, the database is automatically added to the Oracle Grid Infrastructure configuration, and is then automatically restarted when required. However, if you install Oracle Grid Infrastructure on a host computer on which a database already exists, you must manually add the database, the listener, the Oracle ASM instance, and other components to the Oracle Grid Infrastructure configuration.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
Oracle Grid Infrastructure can accommodate multiple single-instance databases on a single host computer.</div>
<p>This section includes the following topics:</p>
<ul>
<li>
<p><a href="#BABCHCBG">Installing Oracle Grid Infrastructure with a New Database Installation</a></p>
</li>
<li>
<p><a href="#BABCIBEF">Installing Oracle Grid Infrastructure for an Existing Database</a></p>
</li>
</ul>
<a id="BABCHCBG" name="BABCHCBG"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">3.8.1</span> Installing Oracle Grid Infrastructure with a New Database Installation<a id="sthref516" name="sthref516"></a><a id="sthref517" name="sthref517"></a></h3>
<p>Perform the following steps to install Oracle Grid Infrastructure and then create a database that is managed by Oracle Restart. First install Oracle Grid Infrastructure, which installs Oracle Restart and Oracle ASM, then configure Oracle ASM with at least one disk group, and then install Oracle database that stores database files in Oracle ASM disk groups. Click the help button on the Oracle Universal Installer page for page level assistance.</p>
<p>You may need to shut down existing Oracle processes before you proceed with the Oracle Grid Infrastructure installation. Refer to <a href="pre_install.htm#BABDFJAE">"Stopping Existing Oracle Processes"</a> for more information.</p>
<p>To install Oracle Grid Infrastructure for a standalone server with a new database installation:</p>
<ol>
<li>
<p>Start Oracle Universal Installer as the Oracle Grid Infrastructure software owner user. Complete one of the following steps depending on the location of the installation files:</p>
<ul>
<li>
<p>If the installation files are on installation media, enter commands similar to the following, where <code><span class="codeinlineitalic">directory_path</span></code> is the path of the Oracle Grid Infrastructure directory on the installation media:</p>
<pre xml:space="preserve" class="oac_no_warn">$ /<span class="italic">directory_path</span>/runInstaller
</pre>
<div class="infoboxnote">
<p class="notep1">Note:</p>
You must install Oracle Grid Infrastructure for a standalone server from the Oracle Grid Infrastructure media.</div>
</li>
<li>
<p>If the installation files are on the hard disk, change the directory to the path of the Oracle Grid Infrastructure (<code>clusterware</code>) directory and enter the following command:</p>
<pre xml:space="preserve" class="oac_no_warn">$ ./runInstaller
</pre></li>
<li style="list-style: none">
<p><span class="bold">Downloading Updates Before Installation</span></p>
<p>Starting with Oracle Database 11<span class="italic">g</span> Release 2 (11.2.0.2), if you plan to run the<a id="sthref518" name="sthref518"></a> installation in a secured data center, then you can download updates before starting the installation by starting Oracle Universal Installer on a system that has Internet access in update download mode. To start Oracle Universal Installer to download updates, enter the following command:</p>
<pre xml:space="preserve" class="oac_no_warn">$ ./runInstaller -downloadUpdates
</pre>
<p>Provide the My Oracle Support user name and password, and provide proxy settings if needed. After you download updates, transfer the update file to a directory on the server where you plan to run the installation.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink OUICG" href="../../em.112/e12255/toc.htm"><span class="italic">Oracle Universal Installer and OPatch User's Guide for Windows and UNIX</span></a> for more information about response file formats</p>
</li>
<li>
<p><a href="install_overview.htm#CJAGAAIA">"Software Updates Option"</a></p>
</li>
<li>
<p><a href="#BABIEBHH">"Configuring the User's Environment"</a> for information about setting the Oracle Grid Infrastructure software owner user's environment</p>
</li>
</ul>
</div>
</li>
</ul>
<div class="infoboxnote">
<p class="notep1">Note:</p>
Start Oracle Universal Installer from the terminal session where you logged in as the Oracle Grid Infrastructure software owner user and set the user's environment.</div>
<p>If Oracle Universal Installer is not displayed, refer to <a href="app_ts.htm#BABBIJFD">"X Window Display Errors"</a> and <a href="app_ts.htm#BEIGDIDJ">"Remote Terminal Installation Error"</a> for information about troubleshooting.</p>
</li>
<li>
<p>Starting with Oracle Database 11<span class="italic">g</span> Release 2 (11.2.0.2), you can use the Software Updates feature to dynamically download and apply latest updates. In the Download Software<a id="sthref519" name="sthref519"></a> Updates screen, select one of the following options and click <span class="bold">Next:</span></p>
<ul>
<li>
<p>Use My Oracle Support credentials for download: Select this option to download and apply the latest software updates.</p>
<p>Click <span class="bold">Proxy Settings</span> to configure a proxy for Oracle Universal Installer to use to connect to the Internet. Provide the proxy server information for your site, along with a user account that has access to the local area network through which the server is connecting.</p>
<p>Click <span class="bold">Test Connection</span> to ensure that your proxy settings are correctly entered, and the installer can download the updates.</p>
</li>
<li>
<p>Use pre-downloaded software updates: Select this option to apply the software updates previously downloaded using the <code>-downloadUpdates</code> flag.</p>
</li>
<li>
<p>Skip Software Updates: Select this option if you do not want to apply any updates.</p>
</li>
</ul>
</li>
<li>
<p>The Apply Software Updates screen is displayed if you select to download the software updates or provide the pre-downloaded software updates location. If you selected Use My Oracle Support credentials for download in the previous screen, then select <span class="bold">Download and apply all updates</span>, and click <span class="bold">Next.</span></p>
<p>If you selected Use pre-downloaded software updates in the previous screen, then select <span class="bold">Apply all updates</span>, and click <span class="bold">Next.</span></p>
</li>
<li>
<p><a id="CIHHIJIJ" name="CIHHIJIJ"></a>In the Select Installation Option screen, select the <span class="bold">Install and Configure Grid Infrastructure for a Standalone Server</span> option to install and configure Oracle Restart and Oracle ASM. Click <span class="bold">Next.</span></p>
</li>
<li>
<p>In the Select Product Languages screen, select one or more languages. Move the languages from the Available Languages list to the Selected Languages list. Click <span class="bold">Next.</span></p>
</li>
<li>
<p>The Create ASM Disk Group screen lists all the Oracle ASM disks under <code>ORCLDISK:*</code></p>
<p>Click <span class="bold">Change Disk Discovery Path</span> to select any devices that will be used by Oracle ASM but are not listed. In the Change Disk Discovery Path window, enter a string to use to search for devices that Oracle ASM will use. If the diskstring is set to <code>ORCLDISK:*</code> or is left empty (""), then the installer discovers these disks. Click <span class="bold">OK.</span></p>
<p>After you finish selecting the disks to be used by Oracle ASM, click <span class="bold">Next</span>.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
During installation, disk paths mounted on ASM and registered on ASMLIB with the string <code>ORCLDISK:*</code> are listed as default database storage candidate disks.</div>
<p>Consider the following information about disk devices while performing this step:</p>
<ul>
<li>
<p>The Disk Group Name default is <code>DATA</code>. You can enter a new name for the disk group, or use the default name.</p>
</li>
<li>
<p>The disk devices must be owned by the user performing the grid installation.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="pre_install.htm#BABJFCJF">Example 2-2, "Example of a Rules File With User grid"</a> for information about creating or modifying permissions</div>
</li>
<li>
<p>Check with your system administrator to determine if the disks used by Oracle ASM are mirrored at the storage level. If so, select External for the redundancy. If the disks are not mirrored at the storage level, then choose Normal for the redundancy.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
For normal redundancy, you require twice as much disk space to hold the same amount of data. For example, if your database is 100 GB, then you require approximately 200 GB of storage.</div>
</li>
</ul>
</li>
<li>
<p>In the Specify ASM Password screen, enter <code>SYSASM</code> password required to connect to the Oracle ASM instance. The Oracle ASM instance is managed by a privileged role called <code>SYSASM</code>, which grants full access to Oracle ASM disk groups. Oracle recommends that you create a less privileged user, <code>ASMSNMP</code>, with <code>SYSDBA</code> privileges to monitor the Oracle ASM instance.</p>
<p>Enter passwords for the <code>SYS</code> and <code>ASMSNMP</code> user accounts. The passwords should be at least eight characters in length and include at least one alphabetic and one numeric character.</p>
<p>Optionally, you can use the same password for all accounts. However, Oracle recommends that you specify a different password for each account. You must remember the passwords that you specify.</p>
</li>
<li>
<p>In the Privileged Operating System Groups screen, select the name of the operating system group you created for the <code>OSDBA</code> group, the <code>OSASM</code> group, and the database operator group <code>OSOPER</code>. If you choose to create only the <code>dba</code> group, then you can use that group for all three privileged groups. If you created a separate <code>asmadmin</code> group, then use that value for the <code>OSASM</code> group. Click <span class="bold">Next</span>.</p>
</li>
<li>
<p>In the Specify Installation Location screen, enter the following details, and click <span class="bold">Next:</span></p>
<ul>
<li>
<p><span class="bold">Oracle Base</span>: Enter the directory location for Oracle base. Do not include spaces in the path name.</p>
</li>
<li>
<p><span class="bold">Software Location:</span> This field is populated by default in concurrence with Oracle base location.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="appendix_ofa.htm#BGBIBCAC">"Naming Directories"</a> for directory naming conventions</div>
</li>
<li>
<p>If you have not installed any Oracle software previously on this server, the Create Inventory screen appears.</p>
<p>Change the path for the Inventory Directory, if required. Select <code>oinstall</code> for the oraInventory Group Name, if required. Click <span class="bold">Next.</span></p>
</li>
<li>
<p>The Perform Prerequisite Checks screen checks if the minimum system requirements are met to perform the Oracle Grid Infrastructure installation. If all the system requirements are met, then you will be directed to the Summary screen. However, if an installation fails, you can review the error.</p>
<p>If you click <span class="bold">Check Again</span>, then you can run the prerequisite check again to see if the minimum requirements are met to carry on with the database installation.</p>
<p>Click <span class="bold">Fix &amp; Check Again</span>, if you want the installer to fix the problem and check the system requirements once more.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
The Fix &amp; Check Again option generates a script that you must run as the <code>root</code> user. This generated script sets some of the system parameter values. Oracle recommends that you do not modify the contents of this script. Refer to <a href="pre_install.htm#BABGICDD">"Installation Fixup Scripts"</a> for more information about fixup scripts.</div>
<p>To get a list of failed requirements, select <span class="bold">Show Failed</span> from the list. To get a list of all the prerequirement checks run by the OUI, select <span class="bold">Show All</span>. To get a list of the prerequirement checks that are successful, select <span class="bold">Show Succeeded.</span></p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
Oracle recommends that you use caution in checking the Ignore All option. If you check this option, then Oracle Universal Installer may not confirm that your system is able to install Oracle Database successfully.</div>
</li>
<li>
<p>Review the contents of the Summary screen, and click <span class="bold">Finish.</span></p>
<p>Starting with Oracle Database 11<span class="italic">g</span> Release 2 (11.2), you can click <span class="bold">Save Response File</span> to save all the installation steps into a response file. This file can be used for a silent installation.</p>
</li>
<li>
<p>The Setup screen displays the progress of the Oracle Grid Infrastructure installation. During the installation process, the Execute Configuration Scripts window appears. Do <span class="italic">not</span> click <span class="bold">OK</span> until you have run the scripts mentioned in this screen.</p>
<p>Run the <code>root.sh</code> and, if required, the <code>orainstRoot.sh</code> configuration scripts as the <code>root</code> user.</p>
</li>
<li>
<p>The Finish screen displays the installation status. Click <span class="bold">Close</span> to end the installation, then <span class="bold">Yes</span> to confirm that you want to exit Oracle Universal Installer.</p>
<p>If you encounter any problems, refer to the configuration log for information. The path to the configuration log is displayed on the Configuration Assistants window.</p>
</li>
<li>
<p>To create additional disk groups, run the Oracle ASMCA utility. For example, you can create another disk group named <code>RECOVERY</code> to store the fast recovery area.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#BABGFGCF">"Manually Configuring Oracle Automatic Storage Management Disk Groups"</a></p>
</li>
<li>
<p><a href="post_inst_task.htm#BJFIFAIF">"Create a Fast Recovery Area Disk Group"</a></p>
</li>
</ul>
</div>
<div class="infoboxnote">
<p class="notep1">Note:</p>
To check if the Oracle High Availability Service is installed properly, run <code>./crsctl check has</code> command from <code><span class="codeinlineitalic">Grid_home</span></code><code>/bin</code> directory.
<p><code><span class="codeinlineitalic">Grid_home</span></code> is the path to the Oracle Grid Infrastructure home for a standalone server. <code>Ohasd</code> is a daemon installed with Oracle Grid Infrastructure that starts software services, such as Oracle ASM.</p>
</div>
</li>
<li>
<p>Install Oracle Database. Refer to <a href="inst_task.htm#BABJGGJH">"Installing the Oracle Database Software"</a> for information about installing Oracle Database.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
<ul>
<li>
<p>If a new database is installed after a grid infrastructure installation, then the listener runs from the Oracle Grid Infrastructure home. Because Oracle ASM is installed as part of Oracle Grid Infrastructure, the default listener is created and runs from the Oracle Grid Infrastructure home. If you perform a database installation, then the database must use the same listener created during the Oracle Grid Infrastructure installation.</p>
</li>
<li>
<p>If you are using Oracle Restart, then the default listener and any additional listeners must run from the Oracle Grid Infrastructure home.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BABCIBEF" name="BABCIBEF"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">3.8.2</span> Installing Oracle Grid Infrastructure for an Existing Database</h3>
<p>Follow the high-level instructions in this section to install Oracle Grid Infrastructure and configure it for an existing Oracle database. Please note that Oracle Restart can only manage existing 11.2 resources and hence you can install Oracle Grid Infrastructure only for an existing 11.2 database. However, Oracle database releases prior to 11.2 can coexist on the same server without being managed by Oracle Restart.</p>
<p>To install Oracle Grid Infrastructure for an existing database:</p>
<ul>
<li>
<p>On the same host computer as the database, use Oracle Universal Installer to install Oracle Grid Infrastructure, and select <span class="bold">Install and Configure Grid Infrastructure</span> <span class="bold">for a Standalone Server</span> as the installation option.</p>
<p>The Oracle Grid Infrastructure components are installed in a separate Oracle home.</p>
<p>Refer to <a href="#BABCHCBG">"Installing Oracle Grid Infrastructure with a New Database Installation"</a> for detailed instructions.</p>
</li>
<li>
<p>Go to the Grid home's <code>bin</code> directory. Use the <code>srvctl add database</code> command to manually add the database, the listener, the Oracle ASM instance, all Oracle ASM disk groups, and any database services to the Oracle Grid Infrastructure configuration.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
"<a class="olink ADMIN5011" href="http://www.oracle.com/pls/db112/lookup?id=ADMIN5011">srvctl add database</a>" in <span class="italic"><a class="olink ADMIN12708" href="http://www.oracle.com/pls/db112/lookup?id=ADMIN12708">Oracle Database Administrator's Guide</a></span> for more information about the <code>srvctl add database</code> command</div>
</li>
</ul>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABJCHIJ" name="BABJCHIJ"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">3.9</span> Modifying Oracle Grid Infrastructure Binaries After Installation</h2>
<p>After installation, you must first stop the Oracle Restart stack to modify the software installed in your Grid home. For example, if you want to apply a one-off patch or modify any of the DLLs used by Oracle Restart or Oracle ASM, then you must follow these steps to stop and restart the Oracle Restart stack.</p>
<div class="infoboxnote">
<p class="notep1">Caution:</p>
Before relinking executables, you must shut down all executables that run in the Oracle home directory that you are relinking. In addition, shut down applications linked with Oracle shared libraries.</div>
<p>Prepare the Oracle Grid Infrastructure home for modification using the following procedure:</p>
<ol>
<li>
<p>Log in as the Oracle Grid Infrastructure software owner user and change the directory to the path <code><span class="codeinlineitalic">Grid_home</span></code><code>\bin</code>, where <code><span class="codeinlineitalic">Grid_home</span></code> is the path to the Oracle Grid Infrastructure home:</p>
<pre xml:space="preserve" class="oac_no_warn">$ cd <span class="codeinlineitalic">Grid_home</span>/bin
</pre></li>
<li>
<p>Shut down the Oracle Restart stack using the following command:</p>
<pre xml:space="preserve" class="oac_no_warn">$ crsctl stop has -f
</pre></li>
<li>
<p>After the Oracle Restart stack is completely shut down, perform the updates to the software installed in the Grid home.</p>
</li>
<li>
<p>Use the following command to restart the Oracle Restart stack:</p>
<pre xml:space="preserve" class="oac_no_warn">$ crsctl start has
</pre></li>
</ol>
</div>
<!-- class="sect1" -->
<a id="BABGFGCF" name="BABGFGCF"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">3.10</span> Manually Configuring Oracle Automatic Storage Management Disk Groups</h2>
<p>The Oracle Automatic Storage Management Configuration Assistant utility creates a new Automatic Storage Management instance if there is no Oracle ASM instance currently configured on the computer.</p>
<p>After installing Oracle Grid Infrastructure, you can also use Oracle ASMCA to create and configure disk groups, Oracle Automatic Storage Management Dynamic Volume Manager (Oracle ADVM) and Oracle Automatic Storage Management Cluster File System (Oracle ACFS).</p>
<p>If you want to create additional disk groups or manually configure Oracle ASM disks, then you can run the Oracle ASMCA as follows:</p>
<pre xml:space="preserve" class="oac_no_warn">$ cd <span class="codeinlineitalic">Grid_home</span>/bin
$ ./asmca
</pre>
<p>Where <code><span class="codeinlineitalic">Grid_home</span></code> is the path to the Oracle Grid Infrastructure home for a standalone server.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink UNXAR" href="../../server.112/e10839/toc.htm"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span></a> for more information on Oracle ASMCA</div>
</div>
<!-- class="sect1" -->
<a id="BABJDJCB" name="BABJDJCB"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">3.11</span> Testing the Oracle Automatic Storage Management Installation</h2>
<p><a id="sthref520" name="sthref520"></a>To <a id="sthref521" name="sthref521"></a><a id="sthref522" name="sthref522"></a>test the Oracle ASM installation, try logging in by using the <code>asmcmd</code> command-line utility, which lets you manage Oracle ASM disk group files and directories. To do this:</p>
<ol>
<li>
<p>Open a shell window, and temporarily set the <code>ORACLE_SID</code> and <code>ORACLE_HOME</code> environment variables to specify the appropriate values for the Oracle ASM instance that you want to use.</p>
<p>For example, if the Oracle ASM <code>SID</code> is named <code>+ASM</code> and the Oracle home is located in the <code>grid</code> subdirectory of the <code>ORACLE_BASE</code> directory, then enter the following commands to create the required settings:</p>
<ul>
<li>
<p>Bourne, Bash, or Korn shell:</p>
<pre xml:space="preserve" class="oac_no_warn">$ ORACLE_SID=+ASM
$ export ORACLE_SID
$ ORACLE_HOME=/u01/app/oracle/product/11.2.0/grid
$ export ORACLE_HOME
</pre></li>
<li>
<p>C shell:</p>
<pre xml:space="preserve" class="oac_no_warn">% setenv ORACLE_SID +ASM
% setenv ORACLE_HOME /u01/app/oracle/product/11.2.0/grid
</pre></li>
</ul>
</li>
<li>
<p>Use ASMCMD to list the disk groups for the Oracle ASM instance:</p>
<pre xml:space="preserve" class="oac_no_warn">$ORACLE_HOME/bin/asmcmd lsdg
</pre>
<p>ASMCMD connects by default as the SYS user with SYSASM privileges.</p>
<p>If the Oracle ASM instance is not running, you can start the instance with the following:</p>
<pre xml:space="preserve" class="oac_no_warn">$ORACLE_HOME/bin/asmcmd startup
</pre></li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink SUTIL" href="http://www.oracle.com/pls/db112/lookup?id=SUTIL"><span class="italic">Oracle Database Utilities</span></a> for more information about ASMCMD</p>
</li>
<li>
<p><a class="olink OSTMG" href="http://www.oracle.com/pls/db112/lookup?id=OSTMG"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span></a> for a more information about Oracle ASM</p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<div class="footer">
<hr />
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<col width="33%" />
<col width="*" />
<col width="33%" />
<tr>
<td align="left">
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="98">
<tr>
<td align="center" valign="top"><a href="pre_install.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td align="center" valign="top"><a href="inst_task.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td style="font-size: 90%" align="center" class="copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2011,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td align="right">
<table class="icons oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="245">
<tr>
<td align="center" valign="top"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td align="center" valign="top"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td align="center" valign="top"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td align="center" valign="top"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td align="center" valign="top"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
</div>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
