<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
<meta http-equiv="Content-Language" content="en" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<title>Using NAS Devices</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.1" />
<meta name="Date" content="2011-03-08T13:46:18Z" />
<meta name="robots" content="all" scheme="http://www.robotstxt.org/" />
<meta name="doctitle" content="Oracle&reg; Database Installation Guide 11g Release 2 (11.2) for Linux" />
<meta name="partno" content="E16763-08" />
<meta name="docid" content="LADBI" />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />
<link rel="Stylesheet" href="../../dcommon/css/blafdoc.css" title="Default" type="text/css" />
<script type="text/javascript" src="../../dcommon/js/doccd.js">
</script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="app_cloning.htm" title="Previous" type="text/html" />
<link rel="Next" href="appendix_ofa.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e16763.pdf" title="PDF version" type="application/pdf" />
</head>
<body>
<div class="header">
<div class="zz-skip-header"><a name="top" id="top" href="#BEGIN">Skip Headers</a></div>
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<tr>
<td align="left" valign="top"><b>Oracle&reg; Database Installation Guide<br />
11<i>g</i> Release 2 (11.2) for Linux</b><br />
Part Number E16763-08</td>
<td valign="bottom" align="right">
<table class="icons oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="245">
<tr>
<td align="center" valign="top"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td align="center" valign="top"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td align="center" valign="top"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td align="center" valign="top"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td align="center" valign="top"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
<hr />
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<tr>
<td align="left" valign="top">
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="98">
<tr>
<td align="center" valign="top"><a href="app_cloning.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td align="center" valign="top"><a href="appendix_ofa.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td align="right" valign="top" style="font-size: 90%"><a href="../e16763.pdf">View PDF</a></td>
</tr>
</table>
<a name="BEGIN" id="BEGIN"></a></div>
<div class="IND"><!-- End Header --><a id="BCFIDEJA" name="BCFIDEJA"></a>
<h1 class="appendix"><span class="secnum">C</span> Using NAS Devices</h1>
<p>This appendix provides guidelines for using a network attached storage (NAS) storage device for Oracle software and database files. It includes information about the following:</p>
<ul>
<li>
<p><a href="#BCFEAGFJ">General Configuration Guidelines for NAS Devices</a></p>
</li>
<li>
<p><a href="#CIHFDGEB">NFS Feature Description</a></p>
</li>
<li>
<p><a href="#BCFEAHIC">Choosing Mount Points</a></p>
</li>
<li>
<p><a href="#BCFHCIEC">Creating Files on a NAS Device for Use with Oracle Automatic Storage Management</a></p>
</li>
<li>
<p><a href="#CHDIAGAD">NFS Mount Options</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="post_inst_task.htm#CHDCHFGC">"Configuring and Using Direct NFS Client"</a></p>
</li>
<li>
<p><a class="olink CWGEN" href="http://www.oracle.com/pls/db112/lookup?id=CWGEN"><span class="italic">Oracle Grid Infrastructure Installation Guide</span></a> for information about using NAS devices on Oracle Real Application Clusters</p>
</li>
</ul>
</div>
<a id="BCFEAGFJ" name="BCFEAGFJ"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">C.1</span> General Configuration Guidelines for NAS Devices<a id="sthref769" name="sthref769"></a></h2>
<p>Refer to the documentation provided with the NAS device for specific information about how to configure it. In addition, use the following guidelines to ensure that the performance of the Oracle software meets the requirements:</p>
<ul>
<li>
<p>Before using the NAS device for the installation, verify that it is certified.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
For certify information refer to note 359515.1 on the My Oracle Support (formerly Oracle<span class="italic">MetaLink</span>) Web site:
<pre xml:space="preserve" class="oac_no_warn"><a href="https://support.oracle.com/">https://support.oracle.com/</a>
</pre></div>
</li>
<li>
<p>The performance of Oracle software and databases stored on NAS devices depends on the performance of the network connection between the Oracle server and the NAS device.</p>
<p>For this reason, Oracle recommends that you connect the server to the NAS device using a private dedicated network connection, which should be Gigabit Ethernet or better.</p>
</li>
<li>
<p>For single instance database installations, Oracle recommends that you create a separate Oracle home directory for each installation. Run the software in this Oracle home directory only from the system that you used to install it.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="CIHFDGEB" name="CIHFDGEB"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">C.2</span> NFS Feature Description</h2>
<p>The following are the features of NFS:</p>
<ul>
<li>
<p>Oracle kernel handles best possible configuration to perform optimal I/O using available resources. This enables better configuration management.</p>
</li>
<li>
<p>NFS storage is now available across different platforms.</p>
</li>
<li>
<p>ODM NFS helps standardize all the tunable configuration parameters.</p>
</li>
<li>
<p>ODM NFS has a stable NFS client that does not affect kernel performance. It optimizes the I/O path when making NFS operations.This ensures higher stability.</p>
</li>
<li>
<p>NFA provides better diagnostics in case of errors.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="BCFEAHIC" name="BCFEAHIC"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">C.3</span> Choosing Mount Points<a id="sthref770" name="sthref770"></a></h2>
<p>This section provides guidelines on how to choose the mount points for the file systems that you want to use for the Oracle software and database files. The guidelines contained in the following sections comply with the Optimal Flexible Architecture recommendations:</p>
<ul>
<li>
<p><a href="#BCFHEEIE">Choosing Mount Points for Oracle Software Files</a></p>
</li>
<li>
<p><a href="#BCFEGAGE">Choosing Mount Points for Oracle Database and Recovery Files</a></p>
</li>
</ul>
<a id="BCFHEEIE" name="BCFHEEIE"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">C.3.1</span> Choosing Mount Points for Oracle Software Files</h3>
<p>Oracle software files are stored in three different directories:</p>
<ul>
<li>
<p>Oracle base directory</p>
</li>
<li>
<p>Oracle Inventory directory</p>
</li>
<li>
<p>Oracle home directory</p>
</li>
</ul>
<p>For the first installation of Oracle software on a system, the Oracle base directory, identified by the <code>ORACLE_BASE</code> environment variable, is normally the parent directory for both the Oracle Inventory and Oracle home directories. For example, for a first installation, the Oracle base, Oracle Inventory, and Oracle home directories might have paths similar to the following:</p>
<div class="inftblinformal">
<table class="Informal" title="Directory Paths" summary="This table lists the typical paths for the Oracle base, Oracle Inventory, and Oracle home directories." dir="ltr" border="1" width="100%" frame="hsides" rules="groups" cellpadding="3" cellspacing="0">
<col width="39%" />
<col width="*" />
<thead>
<tr align="left" valign="top">
<th align="left" valign="bottom" id="r1c1-t4">Directory</th>
<th align="left" valign="bottom" id="r1c2-t4">Path</th>
</tr>
</thead>
<tbody>
<tr align="left" valign="top">
<td align="left" id="r2c1-t4" headers="r1c1-t4">Oracle base (<code>$ORACLE_BASE</code>)</td>
<td align="left" headers="r2c1-t4 r1c2-t4"><code>/u01/app/oracle</code></td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r3c1-t4" headers="r1c1-t4">Oracle Inventory</td>
<td align="left" headers="r3c1-t4 r1c2-t4"><code>$ORACLE_BASE/oraInventory</code></td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r4c1-t4" headers="r1c1-t4">Oracle home</td>
<td align="left" headers="r4c1-t4 r1c2-t4"><code>$ORACLE_BASE/product/11.2.0/dbhome_1</code></td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<p>For subsequent installations, you can choose to use either the same Oracle base directory or a different one, but every subsequent installation uses the original Oracle Inventory directory. For example, if you use the <code>/u02/app/oracle</code> directory as the Oracle base directory for a new installation, then the Oracle Inventory directory continues to be <code>/u01/app/oracle/oraInventory</code>.</p>
<p>To enable you to effectively maintain the Oracle software on a particular system, Oracle recommends that you locate the Oracle Inventory directory only on a local file system, if possible. If you must place the Oracle Inventory directory on a NAS device, create a specific directory for each system, then to prevent more than one system from writing to the same Inventory.</p>
<p class="subhead2"><a id="sthref771" name="sthref771"></a>Directory-Specific Guidelines</p>
<p>You can use any of the following directories as mount points for NFS file systems used to store Oracle software:</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
In the following examples, the paths shown are the defaults if the <code>ORACLE_BASE</code> environment variable is set before you start Oracle Universal Installer.</div>
<ul>
<li>
<p>Oracle base directory or its parents (<code>/u01/app/oracle</code> for example)</p>
<p>If you use the Oracle base directory of one of its parents as a mount point, then the default location for all Oracle software and database files is on that file system. During the installation, you might consider changing the default location of the following directories:</p>
<ul>
<li>
<p>The Oracle Inventory directory (<code><span class="codeinlineitalic">oracle_base</span></code><code>/oraInventory</code>)</p>
<p>Specify a local file system or a host-specific directory on the NFS file system, for example:</p>
<pre xml:space="preserve" class="oac_no_warn"><span class="italic">oracle_base</span>/<span class="italic">hostname</span>/oraInventory
</pre></li>
<li>
<p>The Oracle database file directory (<code><span class="codeinlineitalic">oracle_base</span></code><code>/oradata</code>)</p>
<p>You might want to use a different file system for database files, for example, to enable you to specify different mount options or to distribute I/O.</p>
</li>
<li>
<p>The Oracle database recovery file directory (<code><span class="codeinlineitalic">oracle_base</span></code><code>/recovery_area</code>)</p>
<p>Oracle recommends that you use different file systems for database and recovery files.</p>
</li>
</ul>
<p>If you use this mount point, then all Oracle installations that use this Oracle base directory will use the NFS file system.</p>
</li>
<li>
<p>The product directory (<code><span class="codeinlineitalic">oracle_base</span></code><code>/product</code>)</p>
<p>By default, only software files are located on the NFS file system. You can also use this mount point to install software from different releases, for example:</p>
<pre xml:space="preserve" class="oac_no_warn">/u01/app/oracle/product/9.2.0
/u01/app/oracle/product/10.2.0/dbhome_1
/u01/app/oracle/product/11.2.0/dbhome_1
</pre></li>
<li>
<p>The release directory (<code><span class="codeinlineitalic">oracle_base</span></code><code>/product/11.2.0</code>)</p>
<p>By default, only software files are located on the NFS file system. You can also use this mount point to install different products from the same release, for example:</p>
<pre xml:space="preserve" class="oac_no_warn">/u01/app/oracle/product/11.2.0/dbhome_1
/u01/app/oracle/product/11.2.0/client_1
</pre></li>
<li>
<p>The Oracle home directory (<code><span class="codeinlineitalic">oracle_base</span></code><code>/product/11.2.0/dbhome_1</code>)</p>
<p>By default, only software files are located on the NFS file system. This is the most restrictive mount point. You can use it only to install a single release of one product:</p>
<pre xml:space="preserve" class="oac_no_warn">/u01/app/oracle/product/11.2.0/dbhome_1
</pre></li>
</ul>
</div>
<!-- class="sect2" -->
<a id="BCFEGAGE" name="BCFEGAGE"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">C.3.2</span> Choosing Mount Points for Oracle Database and Recovery Files</h3>
<p>To store Oracle database or recovery files on a NAS device, you can use different paths depending on if you want to store files from only one database or from more than one database:</p>
<ul>
<li>
<p>Use the NFS file system for files from more than one database</p>
<p>If you want to store the database files or recovery files from more than one database on the same NFS file systems, then use paths or mount points similar to the following:</p>
<div class="inftblinformal">
<table class="Informal" title="Single Mount Points for Database and Recovery Files" summary="Single Mount Points for Database and Recovery Files" dir="ltr" border="1" width="100%" frame="hsides" rules="groups" cellpadding="3" cellspacing="0">
<col width="29%" />
<col width="*" />
<thead>
<tr align="left" valign="top">
<th align="left" valign="bottom" id="r1c1-t6">File Type</th>
<th align="left" valign="bottom" id="r1c2-t6">Path or Mount Point</th>
</tr>
</thead>
<tbody>
<tr align="left" valign="top">
<td align="left" id="r2c1-t6" headers="r1c1-t6">Database files</td>
<td align="left" headers="r2c1-t6 r1c2-t6"><code>/u02/oradata</code></td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r3c1-t6" headers="r1c1-t6">Recovery files</td>
<td align="left" headers="r3c1-t6 r1c2-t6"><code>/u03/recovery_area</code></td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<p>When Oracle Universal Installer prompts you for the data file and the recovery file directories, specify these paths. The Database Configuration Assistant and Enterprise Manager create subdirectories in these directories using the value you specify for the database name (DB_NAME) as the directory name, for example:</p>
<pre xml:space="preserve" class="oac_no_warn">/u02/oradata/<span class="italic">db_name1</span>
/u03/recovery_area/<span class="italic">db_name1</span>
</pre></li>
<li>
<p>Use the NFS file system for files from only one database</p>
<p>If you want to store the database files or recovery files for only one database in the NFS file system, then you can create mount points similar to the following, where <code>orcl</code> is the name that you want to use for the database:</p>
<pre xml:space="preserve" class="oac_no_warn">/u02/oradata/orcl
/u03/recovery_area/orcl
</pre>
<p>Specify the directory <code>/u02/oradata</code> when Oracle Universal Installer prompts you for the data file directory and specify the directory <code>/u03/recovery_area</code> when Oracle Universal Installer prompts you for the recovery file location. The <code>orcl</code> directory is used automatically either by Database Configuration Assistant or by Enterprise Manager.</p>
</li>
</ul>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BCFHCIEC" name="BCFHCIEC"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">C.4</span> Creating Files on a NAS Device for Use with Oracle Automatic Storage Management<a id="sthref772" name="sthref772"></a></h2>
<p>If you have a certified NAS storage device, then you can create zero-padded files in an NFS mounted directory and use those files as disk devices in an Oracle Automatic Storage Management (Oracle ASM) disk group. To create these files, follow these steps:</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
To use files as disk devices in an Oracle ASM disk group, the files must be on an NFS mounted file system. You cannot use files on local file systems.</div>
<ol>
<li>
<p>If necessary, create an exported directory for the disk group files on the NAS device.</p>
<p>Refer to the NAS device documentation for more information about completing this step.</p>
</li>
<li>
<p>Switch user to <code>root</code>:</p>
<pre xml:space="preserve" class="oac_no_warn">$ sudo sh
password:
</pre></li>
<li>
<p>Create a mount point directory on the local system:</p>
<pre xml:space="preserve" class="oac_no_warn"># mkdir -p /mnt/oracleasm
</pre></li>
<li>
<p>To ensure that the NFS file system is mounted when the system restarts, add an entry for the file system in the <code>/etc/</code><code>mtab</code> mount file.</p>
<p>For more information about editing the mount file for the operating system, refer to the man pages. For more information about recommended mount options, refer to the <a href="#CHDIAGAD">"NFS Mount Options"</a> section.</p>
</li>
<li>
<p>Enter a command similar to the following to mount the NFS file system on the local system:</p>
<pre xml:space="preserve" class="oac_no_warn"># mount /mnt/oracleasm
</pre></li>
<li>
<p>Choose a name for the disk group that you want to create, for example, <code>nfsdg</code>.</p>
</li>
<li>
<p>Create a directory for the files on the NFS file system, using the disk group name as the directory name:</p>
<pre xml:space="preserve" class="oac_no_warn"># mkdir /mnt/oracleasm/nfsdg
</pre></li>
<li>
<p>Use commands similar to the following to create the required number of zero-padded files in this directory:</p>
<pre xml:space="preserve" class="oac_no_warn"># dd if=/dev/zero of=/mnt/oracleasm/nfsdg/disk1 bs=1024k count=1000
</pre>
<p>This example creates 1 GB files on the NFS file system. You must create one, two, or three files respectively to create an external, normal, or high redundancy disk group.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
Creating multiple zero-padded files on the same NAS box does not guard against NAS box failure. Instead, create one file for each NAS box and mirror them using the Oracle ASM technology.</div>
</li>
<li>
<p>Enter the following commands to change the owner, group, and permissions on the directory and files that you created:</p>
<pre xml:space="preserve" class="oac_no_warn"># chown -R oracle:dba /mnt/oracleasm
# chmod -R 660 /mnt/oracleasm
</pre></li>
<li>
<p>When you are creating the database, edit the Oracle ASM disk discovery string to specify a regular expression that matches the file names you created. For example, you might specify a disk discovery string similar to the following:</p>
<pre xml:space="preserve" class="oac_no_warn">/mnt/oracleasm/nfsdg/*
</pre></li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CHDIAGAD" name="CHDIAGAD"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">C.5</span> NFS Mount Options<a id="sthref773" name="sthref773"></a></h2>
<p>You must mount NFS volumes used for storing database files with special mount options on the host where the database server is running. When mounting an NFS file system, Oracle recommends that you use the same mount point options that the NAS vendor used when certifying the device. Refer to the device documentation or contact the vendor for information about recommended mount-point options.</p>
</div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<div class="footer">
<hr />
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<col width="33%" />
<col width="*" />
<col width="33%" />
<tr>
<td align="left">
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="98">
<tr>
<td align="center" valign="top"><a href="app_cloning.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td align="center" valign="top"><a href="appendix_ofa.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td style="font-size: 90%" align="center" class="copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2011,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td align="right">
<table class="icons oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="245">
<tr>
<td align="center" valign="top"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td align="center" valign="top"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td align="center" valign="top"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td align="center" valign="top"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td align="center" valign="top"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
</div>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
