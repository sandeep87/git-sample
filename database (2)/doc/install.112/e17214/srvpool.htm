<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
<meta http-equiv="Content-Language" content="en" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<title>Configuring Server Pools and Enterprise Manager Database Control</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 020" />
<meta name="Date" content="2011-02-18T17:43:29Z" />
<meta name="robots" content="all" scheme="http://www.robotstxt.org/" />
<meta name="doctitle" content="Oracle&reg; Real Application Clusters Installation Guide 11g Release 2 (11.2) for Linux and UNIX" />
<meta name="partno" content="E17214-08" />
<meta name="docid" content="RILIN" />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />
<link rel="Stylesheet" href="../../dcommon/css/blafdoc.css" title="Default" type="text/css" />
<script type="text/javascript" src="../../dcommon/js/doccd.js">
</script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="params.htm" title="Previous" type="text/html" />
<link rel="Next" href="undrstnd.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e17214.pdf" title="PDF version" type="application/pdf" />
</head>
<body>
<div class="header">
<div class="zz-skip-header"><a name="top" id="top" href="#BEGIN">Skip Headers</a></div>
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<tr>
<td align="left" valign="top"><b>Oracle&reg; Real Application Clusters Installation Guide<br />
11<i>g</i> Release 2 (11.2) for Linux and UNIX</b><br />
Part Number E17214-08</td>
<td valign="bottom" align="right">
<table class="icons oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="245">
<tr>
<td align="center" valign="top"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td align="center" valign="top"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td align="center" valign="top"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td align="center" valign="top"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td align="center" valign="top"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
<hr />
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<tr>
<td align="left" valign="top">
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="98">
<tr>
<td align="center" valign="top"><a href="params.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td align="center" valign="top"><a href="undrstnd.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td align="right" valign="top" style="font-size: 90%"><a href="../e17214.pdf">View PDF</a></td>
</tr>
</table>
<a name="BEGIN" id="BEGIN"></a></div>
<div class="IND"><!-- End Header --><a id="sthref314" name="sthref314"></a>
<h1 class="chapter"><span class="secnum">6</span> Configuring Server Pools and Enterprise Manager Database Control</h1>
<p><a id="sthref315" name="sthref315"></a>This chapter describes server pool and Enterprise Manager Database Control configuration in Oracle Real Application Clusters (Oracle RAC) environments. This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#BHBBGEIE">Understanding Server Pools</a></p>
</li>
<li>
<p><a href="#BHBGJGBI">Configuring Database Control During and After Installation</a></p>
</li>
</ul>
<a id="BHBBGEIE" name="BHBBGEIE"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">6.1</span> Understanding Server Pools</h2>
<p>Server pools are logical divisions of a cluster into pools of servers, which are allocated to host databases or other applications. Server pools are managed using <code>crsctl</code> and <code>srvctl</code> commands.</p>
<p>Each server pool name must be unique within the cluster. Two server pools cannot use the same name.</p>
<p>There are two types of server pool management:</p>
<ul>
<li>
<p><span class="bold">Administrator-managed</span>: Database administrators define the servers on which databases resource run, and place resources manually as needed. This is the management strategy used in previous releases.</p>
</li>
<li>
<p><span class="bold">Policy managed</span>: Database administrators specify in which server pool (excluding generic or free) the database resource will run. Oracle Clusterware is responsible for placing the database resource on a server.</p>
<p>The server pool name is a required attribute. You can also provide values for the following attributes; if you do not specify them, then they are set to the default value:</p>
<ul>
<li>
<p><span class="bold">MIN_SIZE</span>: Minimum number of servers on which you want a resource to run. The default is <code>0</code>.</p>
</li>
<li>
<p><span class="bold">MAX_SIZE</span>: Maximum number of servers on which you want a resource to run. The default is <code>-1</code>, which indicates that resources can run on all available nodes in the cluster.</p>
</li>
<li>
<p><span class="bold">IMPORTANCE</span>: The relative importance of the resource pool, used to determine how to reconfigure servers when a node joins or leaves the cluster. The default is <code>0</code>.</p>
</li>
</ul>
<div class="infoboxnote">
<p class="notep1">Note:</p>
<a id="sthref316" name="sthref316"></a><a id="sthref317" name="sthref317"></a><a id="sthref318" name="sthref318"></a>Clients using Oracle Database 11<span class="italic">g</span> release 2 and later databases using policy-managed server pools must access the database using the Single Client Access Name (SCAN). This is required because policy-managed databases can run on different servers at different times, so connecting to a particular node virtual IP address for a policy-managed database is not possible</div>
</li>
</ul>
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref319" name="sthref319"></a>
<h3 class="sect2"><span class="secnum">6.1.1</span> Oracle RAC One Node and Server Pools</h3>
<p>Note the following about Oracle RAC One Node and server pools:</p>
<ul>
<li>
<p>Oracle RAC One Node runs only in one server pool. This server pool is treated the same as any other server pool.</p>
</li>
<li>
<p>Online relocation of an Oracle RAC One Node database instances permits planned migrations of an Oracle RAC One Node database from one node to another node. Relocations must always be within a server pool.</p>
</li>
<li>
<p>With WLM integration, online relocation of Oracle RAC One Node database instance operations do not take a server away from a server pool with its importance set to a lower value, because the target server must already be in the server pool, or in Free.</p>
</li>
<li>
<p>An Oracle RAC One Node database can be a Data Guard physical standby.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref320" name="sthref320"></a>
<h3 class="sect2"><span class="secnum">6.1.2</span> Policy-Based Cluster and Capacity Management</h3>
<p>Using policy-based server pool management, database administrators define resource requirements for the workload, including the following:</p>
<ul>
<li>
<p>Defining the number of servers or instances preferred for the application. Oracle Clusterware automatically allocates resources up to the number specified, so long as they are physically available, and relocates a resource to another node as necessary.</p>
</li>
<li>
<p>Defining the number of instances required to support the application.</p>
</li>
</ul>
<p>Resources are no longer defined as belonging to a specific instance or node. Instead, the priority of resource requirements is defined.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
The <a class="olink RACAD" href="http://www.oracle.com/pls/db112/lookup?id=RACAD"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a></div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BHBGJGBI" name="BHBGJGBI"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">6.2</span> Configuring <a id="sthref321" name="sthref321"></a><a id="sthref322" name="sthref322"></a>Database Control During and After Installation</h2>
<p>The following sections describe how Oracle Enterprise Manager Database Control is configured during the Oracle RAC installation, and how you can configure Database Control after installation:</p>
<ul>
<li>
<p><a href="#CACIAIFG">Understanding Using EMCA with Oracle RAC</a></p>
</li>
<li>
<p><a href="#BHBBBBEH">Configuring Database Control During Installation</a></p>
</li>
<li>
<p><a href="#BHBCICBI">Configuring Database Control with DBCA</a></p>
</li>
<li>
<p><a href="#BHBJIIDC">Configuring Database Control After Installation Using EMCA</a></p>
</li>
<li>
<p><a href="#CACBFHBB">Using an Input File for EMCA Parameters</a></p>
</li>
<li>
<p><a href="#BABCIIBD">Specifying the Ports Used by Database Control</a></p>
</li>
<li>
<p><a href="#CACIHHBG">EMCA Troubleshooting Tips</a></p>
</li>
</ul>
<a id="CACIAIFG" name="CACIAIFG"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">6.2.1</span> Understanding Using <a id="sthref323" name="sthref323"></a>EMCA with Oracle RAC</h3>
<p>Each EMCA command can be used in Oracle RAC environments, and certain commands are only applicable in cluster configurations. To perform EMCA cluster commands, use the <code>-cluster</code> flag that is available in almost every EMCA operational mode.</p>
<p>When you use EMCA to configure Database Control for Oracle RAC, you configure the Database Control for each instance in the cluster. However, by default, the Database Control Console will only start on the local node. On every other node of the cluster, only the Enterprise Manager agent will start. This is because the Database Control Console opens a number of connections to the database. If an instance of the console is running on every host in the cluster, then you can easily exceed the maximum number of permitted open connections on a 32-node or 64-node environment.</p>
<p>When Database Control Console is started on the local node, on every other node, the commands <code>emctl start dbconsole</code> and <code>emctl stop dbconsole</code> only start and stop the agent. Each of the remote agents upload their respective data to the console running on the local node, where you can monitor and manage all the targets in the cluster. On each instance of the Oracle RAC database, the following subdirectories will be created, where <code><span class="codeinlineitalic">nodename</span></code> is the name of a node in the cluster, and <code><span class="codeinlineitalic">DBUniqueName</span></code> is the database unique name.</p>
<pre xml:space="preserve" class="oac_no_warn">$ORACLE_HOME/<span class="italic">nodename</span>_<span class="italic">DBUniqueName</span>
$ORACLE_HOME/<span class="italic">nodename</span>_<span class="italic">DBUniqueName</span>
</pre>
<p>However, note that if you upgrade an existing Oracle RAC 10<span class="italic">g</span> release 1 database configured with Database Control to the current release, then the existing Database Control configuration is retained. The existing Database Control has a Database Console running on each cluster node. The console will still be started on each individual node.</p>
<p>If you want to modify the existing configuration, then use the following command:</p>
<pre xml:space="preserve" class="oac_no_warn">emca -reconfig dbcontrol &#x2013;cluster &#x2013;EM_NODE <span class="italic">nodename</span> -EM_NODE_LIST <span class="italic">NODE_list</span>
</pre>
<p>where <code><span class="codeinlineitalic">nodename</span></code> is the public name of the node, and <code><span class="codeinlineitalic">NODE_list</span></code> is a comma-deliminated list of nodes. This command reconfigures the current Database Control setup, and performs the following actions in sequence:</p>
<ol>
<li>
<p>Starts a Database Control Console on <code><span class="codeinlineitalic">nodename</span></code>, if one has not been started yet.</p>
</li>
<li>
<p>Redirects the agents monitoring the database instances in <span class="italic">NODE_list</span> so that they upload their data to the console running on <code><span class="codeinlineitalic">nodename</span></code>. Also, agents monitoring database instances on <code><span class="codeinlineitalic">nodename</span></code> will also upload their data to the local console. Note that if you do not enter the command options -EM_NODE or -EM_NODE_LIST at the command line, you will be prompted for them.</p>
</li>
</ol>
<p>-EM_NODE defaults to the local node if not specified when prompted. If not specified, -EM_NODE_LIST defaults to all nodes where the database is configured.</p>
<p>Use this command to start the console on more than one node. For instance, on an eight-node cluster with nodes <code>node1</code>, <code>node2</code>, <code>node3</code>, <code>node4</code>, <code>node5</code>, <code>node6</code>, <code>node7</code>, and <code>node8</code>, you can run the following commands in succession:</p>
<pre xml:space="preserve" class="oac_no_warn">$ emca -reconfig dbcontrol &#x2013;cluster &#x2013;EM_NODE node1 -EM_NODE_LIST node2,node3,node4
$ emca -reconfig dbcontrol &#x2013;cluster &#x2013;EM_NODE node5 -EM_NODE_LIST node6,node7,node8
</pre>
<p>In this scenario, there are two Database Control consoles running, one on <code>node1</code> and the other on <code>node5</code>. From either of these consoles, you can manage and monitor all of the targets in the cluster.</p>
<p>For information about the current cluster configuration, you can run the following command:</p>
<pre xml:space="preserve" class="oac_no_warn">$ emca -displayConfig dbcontrol &#x2013;cluster
</pre>
<div class="infoboxnote">
<p class="notep1">Caution:</p>
If you use the command <code>emca -cluster</code> to configure Database Control for Oracle RAC, then check the <code>TNS_ADMIN</code> environment variable on all cluster nodes. If you have a different <code>TNS_ADMIN</code> set for each node, then the listener for the target cannot be configured correctly. In this case, set the same <code>TNS_ADMIN</code> on all cluster nodes before running the <code>emca -cluster</code> command.</div>
<p>To configure Enterprise Manager for a newly added node of a cluster, use the following command:</p>
<pre xml:space="preserve" class="oac_no_warn">$ emca -addNode db
</pre>
<p>On policy managed databases, another common operation is the addition and deletion of cluster nodes. After you add a new node, you can run EMCA to configure Database Control or central agent management for that node using the command <code>emca -addNode db</code>. Running EMCA only configures Enterprise Manager so that you can manage the instance in a way that is consistent with the rest of the cluster database instances.</p>
<p>When configuring Enterprise Manager for a new node, run the EMCA command only after you have added the node. Also, run the command from a node in the cluster that already has Enterprise Manager configured for it, because the Enterprise Manager configuration settings on the existing node are propagated to the new node when you run the command. Because the <code>-addNode</code> option can be used only in an Oracle RAC environment, you do not need to use the <code>-cluster</code> option on the command line.</p>
<p>After running the command <code>emca -addNode db</code>, enter the node name and database unique name for the node and database. For example:</p>
<pre xml:space="preserve" class="oac_no_warn">Node name: node2
Database Unique Name: EM102
</pre>
<p>To deconfigure Enterprise Manager for a specific node you are deleting from the cluster, log into a different node from the node that you plan to delete, and use the command <code>emca -deleteNode db</code>. Running this command removes the Enterprise Manager configuration so that you will no longer be able to manage the instance with Enterprise Manager on that node. Ensure that you run the EMCA command before you delete the cluster node. Because this option can be used only in an Oracle RAC environment, you do not need to use the <code>-cluster</code> option on the command line.</p>
</div>
<!-- class="sect2" -->
<a id="BHBBBBEH" name="BHBBBBEH"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">6.2.2</span> Configuring Database Control During Installation</h3>
<p>If you create a database while installing Oracle RAC 11<span class="italic">g</span> release 2 (11.2), you have the option of configuring your database so it can be managed by Oracle Enterprise Manager 10<span class="italic">g</span> Grid Control Console or by Oracle Enterprise Manager 11<span class="italic">g</span> Database Control Console.</p>
<p>To select Grid Control Console as your management option, the Oracle Management Service must be installed on a network host. In addition, the Oracle Management Agent must be installed on the host where you are installing the database. Otherwise, the Grid Control Console option is unavailable and you must instead manage your database with Database Control.</p>
<p>For most of the Oracle RAC 11<span class="italic">g</span> release 2 (11.2) installation types, you must choose either Database Control or Grid Control as your management option when you create a database during the installation.</p>
<p>However, if you create a database using one of the following methods, then you can choose not to configure Database Control:</p>
<ul>
<li>
<p>Choosing the Advanced database configuration option during an Enterprise or Standard Edition installation</p>
</li>
<li>
<p>Running Database Configuration Assistant (DBCA) after the installation</p>
</li>
</ul>
<p>If you do not configure Database Control during the Oracle RAC 11<span class="italic">g</span> release 2 (11.2) installation, no <span class="italic">hostname_dbuniquename</span> directory is created in the resulting Oracle home directory.</p>
</div>
<!-- class="sect2" -->
<a id="BHBCICBI" name="BHBCICBI"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">6.2.3</span> Configuring <a id="sthref324" name="sthref324"></a><a id="sthref325" name="sthref325"></a>Database Control with DBCA</h3>
<p>The primary method for configuring an existing Oracle Database 11<span class="italic">g</span> release 2 (11.2) database so it can be managed with Database Control is to use <a id="sthref326" name="sthref326"></a><a id="sthref327" name="sthref327"></a>DBCA. You can use DBCA to create a new database or to reconfigure an existing database.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
"Installing Oracle Software and Building the Database" in <a class="olink ADMQS" href="../../server.112/e10897/toc.htm"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information about using DBCA to create a new database instance, and <a class="olink TDPRC" href="http://www.oracle.com/pls/db112/lookup?id=TDPRC"><span class="italic">Oracle Database 2 Day + Real Application Clusters Guide</span></a> for Oracle RAC examples using DBCA</div>
<p>To use DBCA to reconfigure your database so it can be managed with Database Control:</p>
<ol>
<li>
<p>Log into the database host as a member of the administrative group that is authorized to install Oracle software and create and run the database.</p>
</li>
<li>
<p><a id="sthref328" name="sthref328"></a><a id="sthref329" name="sthref329"></a>Start DBCA and change directory to the <code>ORACLE_HOME/bin</code> directory and enter the following command:</p>
<pre xml:space="preserve" class="oac_no_warn">$ ./dbca
</pre>
<p>The DBCA Welcome page appears.</p>
</li>
<li>
<p>Advance to the Operations page and select <span class="bold">Configure Database Options</span>.</p>
</li>
<li>
<p>Advance to the Database page and select the database you want to configure.</p>
</li>
<li>
<p>Advance to the Management Options page and select the following options:</p>
<ul>
<li>
<p><span class="bold">Configure the Database with Enterprise Manager</span></p>
</li>
<li>
<p><span class="bold">Use Database Control for Database Management</span></p>
</li>
</ul>
</li>
<li>
<p>Optionally, select the options for enabling e-mail notifications and enabling daily backups.</p>
<p>For more information about Enterprise Manager notifications and daily backups, click <span class="bold">Help</span> on the Management Options page.</p>
</li>
<li>
<p>Advance until the <span class="bold">Finish</span> button is available.</p>
</li>
<li>
<p>Click <span class="bold">Finish</span> to reconfigure the database so it uses Database Control.</p>
<p>After DBCA reconfigures the database, a new subdirectory appears in the Oracle home. This directory is named using the following format and contains Database Control configuration and state files specific to the database you just configured:</p>
<pre xml:space="preserve" class="oac_no_warn"><span class="italic">hostname_dbuniquename</span>
</pre>
<p>Note that for cluster databases, the directories are named <code>nodename_dbuniquename</code>. For example:</p>
<pre xml:space="preserve" class="oac_no_warn">mycluster1.example.com_myNewDB
</pre></li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BHBJIIDC" name="BHBJIIDC"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">6.2.4</span> Configuring Database Control After Installation Using <a id="sthref330" name="sthref330"></a><a id="sthref331" name="sthref331"></a><a id="sthref332" name="sthref332"></a>EMCA</h3>
<p>When you use DBCA to configure Oracle RAC 11<span class="italic">g</span> release 2 (11.2), DBCA provides a graphical user interface to help you select Database Control options and to configure other aspects of your database. However, if you want to use the operating system command line to configure Database Control, then you can use the Enterprise Manager Configuration Assistant (EMCA).</p>
<div class="infoboxnote">
<p class="notep1">Caution:</p>
During the configuration of Database Control using EMCA, the database may become unavailable, and users may not be able to connect to the database or perform operations on the database.</div>
<p>To configure Database Control with EMCA:</p>
<ol>
<li>
<p>Set the <code>ORACLE_HOME</code> environment variable to identify the Oracle home for the database you want to manage:</p>
</li>
<li>
<p>Change directory to the <code>ORACLE_HOME/bin</code> directory.</p>
</li>
<li>
<p>Start EMCA by entering the following command with any of the optional command-line arguments shown in <a href="#CACHBEBA">Table 6-1</a>:</p>
<pre xml:space="preserve" class="oac_no_warn">$ ./emca 
</pre>
<p>Depending upon the arguments you include on the EMCA command line, EMCA prompts you for the information required to configure Database Control.</p>
<p>For example, enter the following command to configure Database Control so it will perform automatic daily backups of your database:</p>
<pre xml:space="preserve" class="oac_no_warn">$ ./emca -config dbcontrol db -backup
</pre></li>
</ol>
<p>EMCA commands are of the form:</p>
<pre xml:space="preserve" class="oac_no_warn">emca [operation] [mode] [flags] [parameters]
</pre>
<div class="infoboxnote">
<p class="notep1">Note:</p>
To configure Database Console for a single-instance database that uses Oracle ASM, you do not need to provide extra parameters with the EMCA command. Run the following command to configure the Database Console which will automatically detect the Oracle ASM instance:
<pre xml:space="preserve" class="oac_no_warn">emca -config dbcontrol db -repos create
</pre></div>
<p><a href="#CACHBEBA">Table 6-1</a> describes the valid execution operations and modes, and lists the optional parameters in brackets. <a href="#CHDCEDIC">Table 6-2</a> discusses the flags and their behavior, while <a href="#CHDIGDBB">Table 6-3</a> defines the optional parameters in detail. EMCA parameters are of the form [-parameterName parameterValue]. Multiple parameters can be used in combination at the command line.</p>
<div class="tblformal">
<p class="titleintable"><a id="sthref333" name="sthref333"></a><a id="CACHBEBA" name="CACHBEBA"></a>Table 6-1 <a id="sthref334" name="sthref334"></a>EMCA Command-Line Operations</p>
<table class="Formal" title="EMCA Command-Line Operations" summary="This table explains EMCA command-line operations." dir="ltr" border="1" width="100%" frame="hsides" rules="groups" cellpadding="3" cellspacing="0">
<col width="33%" />
<col width="*" />
<thead>
<tr align="left" valign="top">
<th align="left" valign="bottom" id="r1c1-t8">Command</th>
<th align="left" valign="bottom" id="r1c2-t8">Description</th>
</tr>
</thead>
<tbody>
<tr align="left" valign="top">
<td align="left" id="r2c1-t8" headers="r1c1-t8">
<p>emca -h | --h | -help | --help</p>
</td>
<td align="left" headers="r2c1-t8 r1c2-t8">
<p>Use this option to display the Help message for the EMCA utility. The options described in <a href="#CACHBEBA">Table 6-1</a>, <a href="#CHDCEDIC">Table 6-2</a>, and<a href="#CHDIGDBB">Table 6-3</a>, and the valid parameters you may include are listed.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r3c1-t8" headers="r1c1-t8">
<p>emca &#x2013;version</p>
</td>
<td align="left" headers="r3c1-t8 r1c2-t8">
<p>Prints the version information associated with EMCA.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r4c1-t8" headers="r1c1-t8">
<p>emca -config dbcontrol db [-repos (create | recreate)] [-cluster] [-silent] [-backup] [parameters]</p>
</td>
<td align="left" headers="r4c1-t8 r1c2-t8">
<p>Configures Database Control for a database. Options include creating (or recreating) Database Control repository, configuring automatic backups, and performing these operations on a cluster database.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r5c1-t8" headers="r1c1-t8">
<p>emca -config centralAgent (db | asm) [-cluster] [-silent] [parameters]</p>
</td>
<td align="left" headers="r5c1-t8 r1c2-t8">
<p>Configures central agent management for a database or an Oracle Automatic Storage Management (ASM) instance. Options include performing this operation on a cluster environment.This operation will configure the database so that it can be centrally managed by the Oracle Enterprise Manager 10g Grid Control Console. To use this option, you must have previously installed the Oracle Management Service component of Enterprise Manager on a network host. In addition, the Oracle Management Agent must be installed on the host where you are running the database.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r6c1-t8" headers="r1c1-t8">
<p>emca -config all db [-repos (create | recreate)] [-cluster] [-silent] [-backup] [parameters]</p>
</td>
<td align="left" headers="r6c1-t8 r1c2-t8">
<p>Configures both Database Control and central agent management for a database. The possible configuration options are similar to those described above.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r7c1-t8" headers="r1c1-t8">
<p>emca -deconfig dbcontrol db [-repos drop] [-cluster] [-silent] [parameters]</p>
</td>
<td align="left" headers="r7c1-t8 r1c2-t8">
<p>Deconfigures Database Control for a database. Options include dropping the Database Control repository and performing these operations on a cluster database. For example, you might use this command to remove the Database Control configuration from a database you are planning to delete. In such a scenario, remove the Database Control configuration before physically deleting the database. This operation does not remove the actual database or its data files.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r8c1-t8" headers="r1c1-t8">
<p>emca -deconfig centralAgent (db | asm) [-cluster] [-silent] [parameters]</p>
</td>
<td align="left" headers="r8c1-t8 r1c2-t8">
<p>Deconfigures central agent management for a database or an Oracle ASM instance. Options include performing this operation on a cluster environment. For example, you might use this command to remove the central agent management configuration from a database you are planning to delete. In such a scenario, remove the central agent management configuration before physically deleting the database. This operation does not remove the actual database or its data files.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r9c1-t8" headers="r1c1-t8">
<p>emca -deconfig all db [-repos drop] [-cluster] [-silent] [parameters]</p>
</td>
<td align="left" headers="r9c1-t8 r1c2-t8">
<p>Deconfigures both Database Control and central agent management for a database. The possible deconfiguration options are similar to those described above.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r10c1-t8" headers="r1c1-t8">
<p>emca -addNode (db | asm) [-silent] [parameters]</p>
</td>
<td align="left" headers="r10c1-t8 r1c2-t8">
<p>Configures Enterprise Manager for a new cluster instance of a database or ASM storage.</p>
<p>For more information, refer to <a href="#CACIAIFG">"Understanding Using EMCA with Oracle RAC"</a>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r11c1-t8" headers="r1c1-t8">
<p>emca -deleteNode (db | asm) [-silent] [parameters]</p>
</td>
<td align="left" headers="r11c1-t8 r1c2-t8">
<p>Deconfigures Enterprise Manager for a node getting deleted. This is discussed further below, in "Understanding Using EMCA with Oracle RAC". For more information, refer to <a href="#CACIAIFG">"Understanding Using EMCA with Oracle RAC"</a>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r12c1-t8" headers="r1c1-t8">
<p>emca -addInst (db | asm) [-silent] [parameters]</p>
</td>
<td align="left" headers="r12c1-t8 r1c2-t8">
<p>Configures Enterprise Manager for a new cluster instance of a database or Oracle ASM storage. For more information, refer to <a href="#CACIAIFG">"Understanding Using EMCA with Oracle RAC"</a>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r13c1-t8" headers="r1c1-t8">
<p>emca -deleteInst (db | asm) [-silent] [parameters]</p>
</td>
<td align="left" headers="r13c1-t8 r1c2-t8">
<p>Deconfigures Enterprise Manager for a specific instance of a cluster database or Oracle ASM storage. This is discussed further below, in <a href="#CACIAIFG">"Understanding Using EMCA with Oracle RAC"</a>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r14c1-t8" headers="r1c1-t8">
<p>emca -reconfig ports [-cluster] [parameters]</p>
</td>
<td align="left" headers="r14c1-t8 r1c2-t8">
<p>Explicitly reassigns Database Control ports. Options include performing this operation on a cluster environment. For more information, refer to <a href="#BABCIIBD">"Specifying the Ports Used by Database Control"</a>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r15c1-t8" headers="r1c1-t8">
<p>emca -reconfig dbcontrol -cluster [-silent] [parameters]</p>
</td>
<td align="left" headers="r15c1-t8 r1c2-t8">
<p>Reconfigures Database Control deployment for a cluster database. Note that this command must be used with the "-cluster" option. For more information, refer to <a href="#CACIAIFG">"Understanding Using EMCA with Oracle RAC"</a>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r16c1-t8" headers="r1c1-t8">
<p>emca -displayConfig dbcontrol -cluster [-silent] [parameters]</p>
</td>
<td align="left" headers="r16c1-t8 r1c2-t8">
<p>Displays information about the current deployment configuration of Database Control in a cluster environment. Note that this command must be used with the "-cluster" option. For more information, refer to <a href="#CACIAIFG">"Understanding Using EMCA with Oracle RAC"</a>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r17c1-t8" headers="r1c1-t8">
<p>emca -upgrade (db | asm | db_asm) [-cluster] [-silent] [parameters]</p>
</td>
<td align="left" headers="r17c1-t8 r1c2-t8">
<p>Upgrades the configuration of an earlier version of Enterprise Manager to the current version. This operation can be performed for database, Oracle ASM, or database and Oracle ASM instances together simultaneously. This does not upgrade the actual database or Oracle ASM instances, nor does it upgrade the Enterprise Manager software. Instead, it upgrades the configuration files for the specified instance so that they are compatible with the current version of the Enterprise Manager software. EMCA will attempt to upgrade all instances of the specified database and/or Oracle ASM target on the host, across all Oracle Homes (since it is likely that certain target properties, such as listener port or Oracle Home, have changed).</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r18c1-t8" headers="r1c1-t8">
<p>emca -restore (db | asm | db_asm) [-cluster] [-silent] [parameters]</p>
</td>
<td align="left" headers="r18c1-t8 r1c2-t8">
<p>Restores the current version of Enterprise Manager configuration to an earlier version. This is the inverse of the "-upgrade" option (and will reverse any changes that result from an "-upgrade" operation), and as such, the options are similar.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div class="tblformal">
<p class="titleintable"><a id="sthref335" name="sthref335"></a><a id="CHDCEDIC" name="CHDCEDIC"></a>Table 6-2 EMCA Command-Line Flags</p>
<table class="Formal" title="EMCA Command-Line Flags" summary="This table explains EMCA command-line flags." dir="ltr" border="1" width="100%" frame="hsides" rules="groups" cellpadding="3" cellspacing="0">
<col width="31%" />
<col width="*" />
<thead>
<tr align="left" valign="top">
<th align="left" valign="bottom" id="r1c1-t9">Flag</th>
<th align="left" valign="bottom" id="r1c2-t9">Description</th>
</tr>
</thead>
<tbody>
<tr align="left" valign="top">
<td align="left" id="r2c1-t9" headers="r1c1-t9">
<p>db</p>
</td>
<td align="left" headers="r2c1-t9 r1c2-t9">
<p>Performs the operation for a database (including cluster databases). Use this option for databases that use Oracle Automatic Storage Management (ASM) to store the data files. If a database is using Oracle ASM, then all of the configuration operations and modes described here (except for <code>-upgrade</code> and "<code>-restore</code>) detect this automatically and apply the changes to both the database and Oracle ASM instance(s).</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r3c1-t9" headers="r1c1-t9">
<p>asm</p>
</td>
<td align="left" headers="r3c1-t9 r1c2-t9">
<p>Performs the operation only for Oracle ASM instances (including cluster Oracle ASM instances).</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r4c1-t9" headers="r1c1-t9">
<p>db_asm</p>
</td>
<td align="left" headers="r4c1-t9 r1c2-t9">
<p>This flag can only be used in <code>-upgrade</code> and <code>-restore</code> mode. Performs the upgrade/restore operation for a database and an Oracle ASM instance together. Database and Oracle ASM instances may be upgraded or restored separately (that is, upgrading an Oracle ASM instance does not require upgrading the database instances it services). Therefore, the Enterprise Manager configuration can be upgraded or restored separately for a database and its respective Oracle ASM instance.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r5c1-t9" headers="r1c1-t9">
<p>-repos create</p>
</td>
<td align="left" headers="r5c1-t9 r1c2-t9">
<p>Creates a new Database Control management repository.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r6c1-t9" headers="r1c1-t9">
<p>-repos drop</p>
</td>
<td align="left" headers="r6c1-t9 r1c2-t9">
<p>Drops the current Database Control management repository.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r7c1-t9" headers="r1c1-t9">
<p>-repos recreate</p>
</td>
<td align="left" headers="r7c1-t9 r1c2-t9">
<p>Drops the current Database Control management repository and then recreates a new one.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r8c1-t9" headers="r1c1-t9">
<p>-cluster</p>
</td>
<td align="left" headers="r8c1-t9 r1c2-t9">
<p>Performs the operation for a cluster database or Oracle ASM instance.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r9c1-t9" headers="r1c1-t9">
<p>-silent</p>
</td>
<td align="left" headers="r9c1-t9 r1c2-t9">
<p>Performs the operation without prompting for additional information. If this mode is specified, then all the required parameters must be entered at the command line or specified in an input file using the &#x2013;respFile argument. You can view a list of the available parameters by entering emca -help at the command line.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r10c1-t9" headers="r1c1-t9">
<p>-backup</p>
</td>
<td align="left" headers="r10c1-t9 r1c2-t9">
<p>Configures automatic backup for a database. EMCA will prompt for daily automatic backup options. The default Enterprise Manager settings will be used to backup the database files.</p>
<p>Note: If you use this option, EMCA will use the value of the db_recovery_file_dest initialization parameter to identify the recovery area for the automated backups. If that parameter is not set, EMCA will generate an error. You can modify these settings later using the Maintenance page in Database Control. For more information, see the Database Control online Help.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div class="tblformal">
<p class="titleintable"><a id="sthref336" name="sthref336"></a><a id="CHDIGDBB" name="CHDIGDBB"></a>Table 6-3 EMCA Command-Line Parameters</p>
<table class="Formal" title="EMCA Command-Line Parameters" summary="This table explains EMCA command-line parameters." dir="ltr" border="1" width="100%" frame="hsides" rules="groups" cellpadding="3" cellspacing="0">
<col width="31%" />
<col width="*" />
<thead>
<tr align="left" valign="top">
<th align="left" valign="bottom" id="r1c1-t10">Parameter</th>
<th align="left" valign="bottom" id="r1c2-t10">Description</th>
</tr>
</thead>
<tbody>
<tr align="left" valign="top">
<td align="left" id="r2c1-t10" headers="r1c1-t10">
<p>-respFile</p>
</td>
<td align="left" headers="r2c1-t10 r1c2-t10">
<p>Specifies the path of an input file listing parameters for EMCA to use while performing its configuration operation.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r3c1-t10" headers="r1c1-t10">
<p>-SID</p>
</td>
<td align="left" headers="r3c1-t10 r1c2-t10">
<p>Database system identifier</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r4c1-t10" headers="r1c1-t10">
<p>-PORT</p>
</td>
<td align="left" headers="r4c1-t10 r1c2-t10">
<p>Port number for the listener servicing the database</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r5c1-t10" headers="r1c1-t10">
<p>-ORACLE_HOME</p>
</td>
<td align="left" headers="r5c1-t10 r1c2-t10">
<p>Database Oracle Home, as an absolute path</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r6c1-t10" headers="r1c1-t10">
<p>-LISTENER_OH</p>
</td>
<td align="left" headers="r6c1-t10 r1c2-t10">
<p>Oracle Home from where the listener is running. If the listener is running from an Oracle Home other than the one on which the database is running, the parameter LISTENER_OH must be specified.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r7c1-t10" headers="r1c1-t10">
<p>-HOST_USER</p>
</td>
<td align="left" headers="r7c1-t10 r1c2-t10">
<p>Host machine user name (for automatic backup)</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r8c1-t10" headers="r1c1-t10">
<p>-HOST_USER_PWD</p>
</td>
<td align="left" headers="r8c1-t10 r1c2-t10">
<p>Host machine user password (for automatic backup)</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r9c1-t10" headers="r1c1-t10">
<p>-BACKUP_SCHEDULE</p>
</td>
<td align="left" headers="r9c1-t10 r1c2-t10">
<p>Schedule in the form of "HH:MM" (for daily automatic backups)</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r10c1-t10" headers="r1c1-t10">
<p>-EMAIL_ADDRESS</p>
</td>
<td align="left" headers="r10c1-t10 r1c2-t10">
<p>E-mail address for notifications</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r11c1-t10" headers="r1c1-t10">
<p>-MAIL_SERVER_NAME</p>
</td>
<td align="left" headers="r11c1-t10 r1c2-t10">
<p>Outgoing Mail (SMTP) server for notifications</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r12c1-t10" headers="r1c1-t10">
<p>-ASM_OH</p>
</td>
<td align="left" headers="r12c1-t10 r1c2-t10">
<p>Oracle Automatic Storage Management Oracle Home</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r13c1-t10" headers="r1c1-t10">
<p>-ASM_SID</p>
</td>
<td align="left" headers="r13c1-t10 r1c2-t10">
<p>System identifier for Oracle ASM instance</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r14c1-t10" headers="r1c1-t10">
<p>-ASM_PORT</p>
</td>
<td align="left" headers="r14c1-t10 r1c2-t10">
<p>Port number for the listener servicing the Oracle ASM instance</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r15c1-t10" headers="r1c1-t10">
<p>-ASM_USER_ROLE</p>
</td>
<td align="left" headers="r15c1-t10 r1c2-t10">
<p>User role for connecting to the Oracle ASM instance</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r16c1-t10" headers="r1c1-t10">
<p>-ASM_USER_NAME</p>
</td>
<td align="left" headers="r16c1-t10 r1c2-t10">
<p>User name for connecting to the Oracle ASM instance</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r17c1-t10" headers="r1c1-t10">
<p>-ASM_USER_PWD</p>
</td>
<td align="left" headers="r17c1-t10 r1c2-t10">
<p>Password for connecting to the Oracle ASM instance</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r18c1-t10" headers="r1c1-t10">
<p>-DBSNMP_PWD</p>
</td>
<td align="left" headers="r18c1-t10 r1c2-t10">
<p>Password for DBSNMP user</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r19c1-t10" headers="r1c1-t10">
<p>-SYSMAN_PWD</p>
</td>
<td align="left" headers="r19c1-t10 r1c2-t10">
<p>Password for SYSMAN user</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r20c1-t10" headers="r1c1-t10">
<p>-SYS_PWD</p>
</td>
<td align="left" headers="r20c1-t10 r1c2-t10">
<p>Password for SYS user</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r21c1-t10" headers="r1c1-t10">
<p>-SRC_OH</p>
</td>
<td align="left" headers="r21c1-t10 r1c2-t10">
<p>Oracle Home of the database with Enterprise Manager configuration to be upgraded/restored</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r22c1-t10" headers="r1c1-t10">
<p>-DBCONTROL_HTTP_PORT</p>
</td>
<td align="left" headers="r22c1-t10 r1c2-t10">
<p>Use this parameter to specify the port you use to display the Database Control Console in your Web browser. For more information, refer to <a href="#BABCIIBD">"Specifying the Ports Used by Database Control"</a>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r23c1-t10" headers="r1c1-t10">
<p>-AGENT_PORT</p>
</td>
<td align="left" headers="r23c1-t10 r1c2-t10">
<p>Use this parameter to specify the Management Agent port for Database Control. For more information, refer to <a href="#BABCIIBD">"Specifying the Ports Used by Database Control"</a>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r24c1-t10" headers="r1c1-t10">
<p>-RMI_PORT</p>
</td>
<td align="left" headers="r24c1-t10 r1c2-t10">
<p>Use this parameter to specify the RMI port for Database Control. For more information, refer to <a href="#BABCIIBD">"Specifying the Ports Used by Database Control"</a>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r25c1-t10" headers="r1c1-t10">
<p>-JMS_PORT</p>
</td>
<td align="left" headers="r25c1-t10 r1c2-t10">
<p>Use this parameter to specify the JMS port for Database Control. For more information, refer to <a href="#BABCIIBD">"Specifying the Ports Used by Database Control"</a>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r26c1-t10" headers="r1c1-t10">
<p>-CLUSTER_NAME</p>
</td>
<td align="left" headers="r26c1-t10 r1c2-t10">
<p>Cluster name (for cluster databases)</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r27c1-t10" headers="r1c1-t10">
<p>-DB_UNIQUE_NAME</p>
</td>
<td align="left" headers="r27c1-t10 r1c2-t10">
<p>Database unique name (for cluster databases)</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r28c1-t10" headers="r1c1-t10">
<p>-SERVICE_NAME</p>
</td>
<td align="left" headers="r28c1-t10 r1c2-t10">
<p>Database service name (for cluster databases)</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r29c1-t10" headers="r1c1-t10">
<p>-EM_NODE</p>
</td>
<td align="left" headers="r29c1-t10 r1c2-t10">
<p>Node from which Database Control console is to be run (for cluster databases). For more information, refer to <a href="#CACIAIFG">"Understanding Using EMCA with Oracle RAC"</a>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r30c1-t10" headers="r1c1-t10">
<p>-EM_NODE_LIST</p>
</td>
<td align="left" headers="r30c1-t10 r1c2-t10">
<p>Comma-separated list of nodes for agent-only configurations, uploading data to &#x2013;EM_NODE. For more information, refer to <a href="#CACIAIFG">"Understanding Using EMCA with Oracle RAC"</a>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="sect2" -->
<a id="CACBFHBB" name="CACBFHBB"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">6.2.5</span> Using an Input File for <a id="sthref337" name="sthref337"></a>EMCA Parameters</h3>
<p>Instead of answering a series of prompts when you run EMCA, you can use the <code>-respFile</code> argument to specify an input file. The input file that you create must be in a format similar to the following example:</p>
<pre xml:space="preserve" class="oac_no_warn">PORT=1521
SID=DB
DBSNMP_PWD=xpE234D
SYSMAN_PWD=KDOdk432
</pre>
<p>After you create an EMCA input file, you can use it on the command line as follows:</p>
<pre xml:space="preserve" class="oac_no_warn">$ ./emca -config dbcontrol db -respFile <span class="italic">input_file_path</span>
</pre>
<p>For example, to configure the Database Control to perform daily backups and create the Database Control Management Repository, create an input file similar to the one shown in the following example:</p>
<pre xml:space="preserve" class="oac_no_warn">PORT=1521
SID=DB
DBSNMP_PWD=dow3l224
SYSMAN_PWD=squN3243
HOST_USER=johnson
HOST_USER_PWD=diTf32of
SYS_PWD=qlKj4352
BACKUP_SCHEDULE=06:30
</pre>
<p>When you have created the input file, then enter the following command at the operating system prompt:</p>
<pre xml:space="preserve" class="oac_no_warn">$ ./emca -config dbcontrol db -repos create -backup -respFile <span class="italic">input_file_path</span>
</pre></div>
<!-- class="sect2" -->
<a id="BABCIIBD" name="BABCIIBD"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">6.2.6</span> Specifyin<a id="sthref338" name="sthref338"></a><a id="sthref339" name="sthref339"></a>g the Ports Used by Database Control</h3>
<p>When you initially install Oracle RAC 11<span class="italic">g</span> release 2 (11.2) or configure Database Control with EMCA, Database Control uses a set of default system ports. For example, by default, you access Database Control using port 1158 in 11g Release 2, as in:</p>
<pre xml:space="preserve" class="oac_no_warn">http://<span class="italic">host</span>.<span class="italic">domain</span>:1158/em
</pre>
<p>This is the default port assigned to Database Control by the Internet Assigned Numbers Authority (IANA). Likewise, the default Database Control Agent port, as assigned by the IANA, is 3938.</p>
<p>To use ports other than the default ports, use the following EMCA command-line arguments when you initially configure the Database Control with EMCA. Alternatively, you can explicitly assign ports after configuring Database Control using the following command:</p>
<pre xml:space="preserve" class="oac_no_warn">emca -reconfig ports [-cluster]
</pre>
<div class="infoboxnote">
<p class="notep1">Note:</p>
You can also use the following EMCA command-line arguments to configure Database Control after you have installed and configured Oracle RAC 11<span class="italic">g</span> release 2 (11.2).</div>
<p>The following list summarizes the EMCA command-line arguments that control the standard Database Control port assignments:</p>
<ul>
<li>
<p>-DBCONTROL_HTTP_PORT <span class="italic">port_number</span></p>
<p>This port number is used in the Database Control Console URL. For example, if you set this port to 5570, you can then display the Database Control Console using the following URL:</p>
<pre xml:space="preserve" class="oac_no_warn">http://<span class="italic">host</span>.<span class="italic">domain</span>:5570/em
</pre></li>
<li>
<p>-RMI_PORT <span class="italic">port_number</span></p>
<p>This port number is used by the <a id="sthref340" name="sthref340"></a>Remote Method Invocation (RMI) system, which is part of the J2EE software required by Database Control. The default port can be changed if you want to configure a specific port for Database Console. When a port other than the default port (1521) is used, use the -RMI_PORT or -JMS_PORT options along with the emca reconfig command.</p>
</li>
<li>
<p>-JMS_PORT <span class="italic">port_number</span></p>
<p>This port is used by the OC4J <a id="sthref341" name="sthref341"></a>Java Message Service (JMS), which is part of the J2EE software required by Database Control. The default port can be changed if you want to configure a specific port for Database Console. When a port other than the default port (1521) is used, use the -RMI_PORT or -JMS_PORT options along with the emca reconfig command.</p>
</li>
<li>
<p>-AGENT_PORT <span class="italic">port_number</span></p>
<p>This port is used by the Database Control Management Agent, which is monitoring and administering the database for the Database Control.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CACIHHBG" name="CACIHHBG"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">6.2.7</span> <a id="sthref342" name="sthref342"></a><a id="sthref343" name="sthref343"></a><a id="sthref344" name="sthref344"></a>EMCA <a id="sthref345" name="sthref345"></a><a id="sthref346" name="sthref346"></a>Troubleshooting Tips</h3>
<p>The following section describes some troubleshooting tips to consider when using EMCA to configure the Database Control:</p>
<ul>
<li>
<p><a href="#CHDEGDIJ">Using EMCA After Changing the Database Listener Port</a></p>
</li>
<li>
<p><a href="#CHDHCHBG">Upgrading 11g Release 2 Grid Control Agents</a></p>
</li>
<li>
<p><a href="#BHBBIACD">Using EMCA When Database Host Name or IP Address Changes</a></p>
</li>
<li>
<p><a href="#BHBCIJBI">Using EMCA When the TNS Configuration Is Changed</a></p>
</li>
</ul>
<a id="BABCBHFB" name="BABCBHFB"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" --><a id="CHDEGDIJ" name="CHDEGDIJ"></a>
<h4 class="sect3"><span class="secnum">6.2.7.1</span> Using <a id="sthref347" name="sthref347"></a><a id="sthref348" name="sthref348"></a>EMCA After Changing the Database Listener Port</h4>
<p>If you change the listener port of the database after you have configured Database Control, then the database status appears as down. To reconfigure Database Control so it uses the new listener port, run the EMCA command using the -config dbcontrol db [-cluster] command-line arguments.</p>
</div>
<!-- class="sect3" -->
<a id="CHDHCHBG" name="CHDHCHBG"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">6.2.7.2</span> Upgrading 11g Release 2 Grid Control Agents</h4>
<p>When upgrading an Oracle Database 10<span class="italic">g</span> Release 1 database and Oracle ASM instance that was configured for Oracle Enterprise Manager (either Database Control or a Grid Control central agent) to an Oracle Database 11<span class="italic">g</span> release 2 (11.2) database, all Enterprise Manager targets on the relevant hosts referring to the upgraded instances are updated automatically. This is because the upgrade involves altering the instance Oracle Home, port, or other target-associated properties. However, some of these targets on the hosts are not updated successfully during the upgrade if they are managed by an Oracle Database 11<span class="italic">g</span> release 2 (11.2) Grid Control Agent. To update these targets, in the Home page for the upgraded database (or Oracle ASM) target, click the <span class="bold">Monitoring Configuration</span>. On the Monitoring Configuration page, you can update properties such as Oracle Home, listener port and so on to the correct values.</p>
</div>
<!-- class="sect3" -->
<a id="BHBBIACD" name="BHBBIACD"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">6.2.7.3</span> Using EMCA When Database Host Name or IP Address Changes</h4>
<p>When the database host name (including the domain name) or the IP address changes, deconfigure and then reconfigure the Database Console with the <code>-repos create</code> flag for the <code>emca</code> command. For example:</p>
<pre xml:space="preserve" class="oac_no_warn">emca -deconfig dbcontrol db -repos drop
emca -config dbcontrol db -repos create
</pre>
<p>or</p>
<pre xml:space="preserve" class="oac_no_warn">emca -deconfig dbcontrol db
emca -config dbcontrol db -repos recreate
</pre></div>
<!-- class="sect3" -->
<a id="BHBCIJBI" name="BHBCIJBI"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">6.2.7.4</span> Using EMCA When the TNS Configuration Is Changed</h4>
<p>When the TNS configuration is changed, set the environment variable and then run the following command:</p>
<pre xml:space="preserve" class="oac_no_warn">emca -config dbcontrol db
</pre></div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<div class="footer">
<hr />
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<col width="33%" />
<col width="*" />
<col width="33%" />
<tr>
<td align="left">
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="98">
<tr>
<td align="center" valign="top"><a href="params.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td align="center" valign="top"><a href="undrstnd.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td style="font-size: 90%" align="center" class="copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2011,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td align="right">
<table class="icons oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="245">
<tr>
<td align="center" valign="top"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td align="center" valign="top"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td align="center" valign="top"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td align="center" valign="top"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td align="center" valign="top"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
</div>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
